import{p as se,d as Be,s as _i,a as mi,b as pi,c as ue,e as Ue,f as Me,w as gi,g as vi,h as yi,i as wi,r as Xt,o as Wt,j as We,F as bi,k as xi,l as ki,m as Ti,n as Mi}from"./vendor.369fb266.js";const Ei=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}};Ei();const xt=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",jt=document?document.documentElement:null,Li=xt?xt.indexOf("phantom")!==-1:!1,Vt=window&&"ActiveXObject"in window;Boolean(Vt&&xt.match(/MSIE 9/i));const ae=xt.indexOf("webkit")!==-1;xt.indexOf("android");const Di=xt.search("android [23]")!==-1,At=window?typeof window.orientation!="undefined":!1,Si=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,Ci=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:Si,Ge=window?window.opera:!1;xt.indexOf("gecko");const qt=xt.indexOf("gecko")!==-1&&!ae&&!Ge&&!Vt;xt.indexOf("chrome");const Ni=xt.indexOf("edge/")!==-1;jt&&Vt&&"transition"in jt.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;jt&&"MozPerspective"in jt.style;jt&&"OTransition"in jt.style;let Ee=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!Ee&&window&&"matchMedia"in window){let i=window.matchMedia("(min-resolution:144dpi)");Ee=i&&i.matches}const wt=window&&!window.L_NO_TOUCH&&!Li&&(Ci||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function Ii(){var i=window.innerWidth,t=window.innerHeight,e="portrait";return i>t&&(e="landscape"),e}function Yt(i){return typeof i=="string"?document.getElementById(i):i}function T(i,t,e){var s=document.createElement(i);return s.className=t,e&&e.appendChild(s),s}function fe(i){for(var t={x:0,y:0};i&&!isNaN(i.offsetLeft)&&!isNaN(i.offsetTop);)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;return t}function Ze(i){for(var t=document.documentElement.style,e=0;e<i.length;e++)if(i[e]in t)return i[e];return!1}Ze(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);Ze(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);function Ai(i,t){return i.className.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i.className)}function bt(i,t){Ai(i,t)||(i.className+=(i.className?" ":"")+t)}function Qt(i,t){i.className=i.className.replace(/(\S+)\s*/g,function(e,s){return s===t?"":e}).replace(/^\s+/,"")}class J extends Error{constructor(t,e){super();this.name="TLError",this.message=t||"error",this.message_key=this.message,this.detail=e||""}}const Le={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ve(i){Le[i.toLowerCase()]&&(i=Le[i.toLowerCase()]);var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;i=i.replace(t,function(s,a,o,l){return a+a+o+o+l+l});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function V(i,t){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i}function Oi(i){return i==null?!1:i==!0||String(i).toLowerCase()=="true"||Number(i)==1}function Rt(i){for(var t=Array.prototype.slice.call(arguments,1),e=0,s=t.length,a;e<s;e++)a=t[e]||{},V(i,a);return i}const Ye=[];function Pi(i){Ye.push(i)}function F(i){Ye.forEach(t=>{try{t(i)}catch(e){console&&console.log&&console.log("Error handling trace",e)}})}function Tt(i,t){for(i=String(i),t=t||2;i.length<t;)i="0"+i;return i}const De=function(){var i=0,t="_tl_id";return function(e){return e[t]=e[t]||++i,e[t]}}();function dt(i){return i&&typeof i.replace=="function"?i.replace(/^\s+|\s+$/g,""):""}function lt(i,...t){for(let s of t)for(var e of Object.getOwnPropertyNames(s.prototype))i.prototype[e]=s.prototype[e]}function Ri(i,t){if(t||(t=It(6)),!(t in i))return t;var e=t.match(/^(.+)(-\d+)?$/)[1],s=[];for(let o in i)o.match(/^(.+?)(-\d+)?$/)[1]==e&&s.push(o);t=e+"-"+(s.length+1);for(var a=s.length;s.indexOf(t)!=-1;a++)t=e+"-"+a;return t}function zi(i){var t=[];if(Object.keys)t=Object.keys(i);else for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&t.push(e);for(var s=0;s<t.length;s++){var a=t[s];if(i[a]!=null&&typeof i[a]!="string"||dt(i[a]).length!=0)return!1}return!0}function he(i){i=dt(i),i=i.toLowerCase();for(var t="\xE3\xE0\xE1\xE4\xE2\u1EBD\xE8\xE9\xEB\xEA\xEC\xED\xEF\xEE\xF5\xF2\xF3\xF6\xF4\xF9\xFA\xFC\xFB\xF1\xE7\xB7/_,:;",e="aaaaaeeeeeiiiiooooouuuunc------",s=0,a=t.length;s<a;s++)i=i.replace(new RegExp(t.charAt(s),"g"),e.charAt(s));return i=i.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),i=i.replace(/^([0-9])/,"_$1"),i}function It(i,t){var e=function(o){return Math.floor(Math.random()*o)},s=function(){var o="abcdefghijklmnopqurstuvwxyz";return o.substr(e(32),1)},a=function(o){for(var l="",u=0;u<o;u++)l+=s();return l};return t?t+"-"+a(i):"tl-"+a(i)}function ji(i,t,e){for(var s=0;s<i.length;s++)if(t<i[s])return i[s];return e||t}function qi(i,t,e){for(var s=i.length-1;s>=0;s--)if(t>i[s])return i[s];return e||t}function Hi(i){return i==parseFloat(i)?!(i%2):void 0}function $e(i,t,e,s){for(var a=s||0,o=0;o<t.length;o++)t[o].data[e]==i&&(a=o);return a}function zt(i){return i&&(i=i.replace(/<a\b[^>]*>/i,""),i=i.replace(/<\/a>/i,""),i)}function Fi(i,t){i.data=Rt({},i.data,t),i.data.unique_id===""&&(i.data.unique_id=It(6))}function Bi(i){return i.match(/<p>[\s\S]*?<\/p>/)?i:"<p>"+i+"</p>"}function Ht(i){return i=i.replace(/(<[^>]*>)+/g,""),i.replace('"',"'")}function _e(i,t,e){var s=function(u,v,b){b||(b="");var D=30;return v&&v.length>D&&(v=v.substring(0,D)+"\u2026"),b+"<a class='tl-makelink' href='"+u+"' onclick='void(0)'>"+v+"</a>"},a=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,o=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,l=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return i.replace(a,function(u,v,b,D){if(b>0){var L=D[b-1];if(L=='"'||L=="'"||L=="=")return u}return s(u,v)}).replace(o,function(u,v,b,D,L){return s("http://"+b,b,v)}).replace(l,function(u,v,b,D){return s("mailto:"+v,v)})}function Je(i){return i.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const Ot={square:i=>{var t={w:0,h:0};return i.w>i.h&&i.h>0?(t.h=i.h,t.w=i.h):(t.w=i.w,t.h=i.w),t},r16_9:i=>i.w!==null&&i.w!==""?Math.round(i.w/16*9):i.h!==null&&i.h!==""?Math.round(i.h/9*16):0,r4_3:i=>{if(i.w!==null&&i.w!=="")return Math.round(i.w/4*3);if(i.h!==null&&i.h!=="")return Math.round(i.h/3*4)}};function Ui(i){var t,e=[],s,a;t=i.toString(),t.match("&#038;")?t=t.replace("&#038;","&"):t.match("&#38;")?t=t.replace("&#38;","&"):t.match("&amp;")&&(t=t.replace("&amp;","&")),a=t.slice(t.indexOf("?")+1).split("&");for(var o=0;o<a.length;o++)s=a[o].split("="),e.push(s[0]),e[s[0]]=s[1];return e}function Wi(i){var t=[];for(var e in i)i.hasOwnProperty(e)&&t.push(e+"="+i[e]);return"?"+t.join("&")}function Gi(i,t){if(typeof i!="undefined"){var e=0;for(var s in i){if(t===e)return i[s];e++}return""}else return""}let Zi=function(i){var t=i||"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",e=t.length;return{encode:function(s){if(typeof s!="number"||s!==parseInt(s))throw'"encode" only accepts integers.';for(var a="";s;){var o=s%e;s=Math.floor(s/e),a=t[o].toString()+a}return a},decode:function(s){if(typeof s!="string")throw'"decode" only accepts strings.';for(var a=0;s;){var o=t.indexOf(s[0]);if(o<0)throw`"decode" can't find "`+s[0]+'" in the alphabet: "'+t+'"';var l=s.length-1;a+=o*Math.pow(e,l),s=s.substring(1)}return a}}}();function de(i){if(typeof i=="string"){let a=i.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(a){var t=parseInt(a[1])||0,e=parseInt(a[2])||0,s=parseInt(a[3])||0;return s+e*60+t*60*60}}else if(typeof i=="number")return i;return 0}function Vi(i){var t=new DOMParser().parseFromString(i,"text/html");return t.body.textContent||""}const Yi={ease:[.25,.1,.25,1],linear:[0,0,1,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[.42,0,.58,1]};function $i(i){}function ne(i){var t=new $i(Yi.easein);return t.get(i)}function Gt(i){return i==1?1:1-Math.pow(2,-10*i)}function Ft(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i}let te=function(){};te.extend=function(i){var t=function(){this.initialize&&this.initialize.apply(this,arguments)},e=function(){};e.prototype=this.prototype;var s=new e;s.constructor=t,t.prototype=s,t.superclass=this.prototype;for(var a in this)this.hasOwnProperty(a)&&a!=="prototype"&&a!=="superclass"&&(t[a]=this[a]);return i.statics&&(Rt(t,i.statics),delete i.statics),i.includes&&(Rt.apply(null,[s].concat(i.includes)),delete i.includes),i.options&&s.options&&(i.options=Rt({},s.options,i.options)),Rt(s,i),t.extend=te.extend,t.include=function(o){Rt(this.prototype,o)},t};class ht{on(t,e,s){if(!e)throw new J("No callback function provided");var a=this._tl_events=this._tl_events||{};return a[t]=a[t]||[],a[t].push({action:e,context:s||this}),this}addEventListener(t,e,s){return this.on(t,e,s)}hasEventListeners(t){var e="_tl_events";return e in this&&t in this[e]&&this[e][t].length>0}removeEventListener(t,e,s){if(!this.hasEventListeners(t))return this;for(var a=0,o=this._tl_events,l=o[t].length;a<l;a++)if(o[t][a].action===e&&(!s||o[t][a].context===s))return o[t].splice(a,1),this;return this}off(t,e,s){return this.removeEventListener(t,e,s)}fire(t,e){if(!this.hasEventListeners(t))return this;for(var s=V({type:t,target:this},e),a=this._tl_events[t].slice(),o=0,l=a.length;o<l;o++)a[o].action?a[o].action.call(a[o].context||this,s):F(`no action defined for ${t} listener`);return this}}function Mt(i,t){return Ji(i,t)}const Ji=function(){var i=document,t=window,e=t.performance,s=e&&(e.now||e.webkitNow||e.msNow||e.mozNow),a=s?function(){return s.call(e)}:function(){return+new Date},o=i.documentElement,l=!1,u=1e3,v=/^rgb\(|#/,b=/^([+\-])=([\d\.]+)/,D=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,L=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,H=/scale\(((?:[+\-]=)?([\d\.]+))\)/,B=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,X=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,Y={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},R=function(){var w=i.createElement("a").style,m=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],y;for(y=0;y<m.length;y++)if(m[y]in w)return m[y]}(),$=function(){return typeof i.createElement("a").style.opacity!="undefined"}(),G=i.defaultView&&i.defaultView.getComputedStyle?function(w,m){m=m=="transform"?R:m,m=x(m);var y=null,M=i.defaultView.getComputedStyle(w,"");return M&&(y=M[m]),w.style[m]||y}:o.currentStyle?function(w,m){if(m=x(m),m=="opacity"){var y=100;try{y=w.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{y=w.filters("alpha").opacity}catch{}}return y/100}var M=w.currentStyle?w.currentStyle[m]:null;return w.style[m]||M}:function(w,m){return w.style[x(m)]},Z=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(w){t.setTimeout(function(){w(+new Date)},17)}}(),U=[];Z(function(w){l=w>1e12!=a()>1e12});function st(w,m,y){if(Array.prototype.indexOf)return w.indexOf(m);for(y=0;y<w.length;++y)if(w[y]===m)return y}function ct(w){var m,y=U.length;for(s&&w>1e12&&(w=a()),l&&(w=a()),m=y;m--;)U[m](w);U.length&&Z(ct)}function at(w){U.push(w)===1&&Z(ct)}function kt(w){var m,y=st(U,w);y>=0&&(m=U.slice(y+1),U.length=y,U=U.concat(m))}function f(w,m){var y={},M;return(M=w.match(L))&&(y.rotate=K(M[1],m?m.rotate:null)),(M=w.match(H))&&(y.scale=K(M[1],m?m.scale:null)),(M=w.match(B))&&(y.skewx=K(M[1],m?m.skewx:null),y.skewy=K(M[3],m?m.skewy:null)),(M=w.match(X))&&(y.translatex=K(M[1],m?m.translatex:null),y.translatey=K(M[3],m?m.translatey:null)),y}function c(w){var m="";return"rotate"in w&&(m+="rotate("+w.rotate+"deg) "),"scale"in w&&(m+="scale("+w.scale+") "),"translatex"in w&&(m+="translate("+w.translatex+"px,"+w.translatey+"px) "),"skewx"in w&&(m+="skew("+w.skewx+"deg,"+w.skewy+"deg)"),m}function d(w,m,y){return"#"+(1<<24|w<<16|m<<8|y).toString(16).slice(1)}function g(w){var m=w.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(m?d(m[1],m[2],m[3]):w).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function x(w){return w.replace(/-(.)/g,function(m,y){return y.toUpperCase()})}function E(w){return typeof w=="function"}function I(w){return Math.sin(w*Math.PI/2)}function A(w,m,y,M,N,O){M=E(M)?M:z.easings[M]||I;var it=w||u,et=this,mt=O-N,nt=a(),pt=0,rt=0;function vt(ut){var r=ut-nt;if(r>it||pt)return O=isFinite(O)?O:1,pt?rt&&m(O):m(O),kt(vt),y&&y.apply(et);isFinite(O)?m(mt*M(r/it)+N):m(M(r/it))}return at(vt),{stop:function(ut){pt=1,rt=ut,ut||(y=null)}}}function W(w,m){var y=w.length,M=[],N,O;for(N=0;N<y;++N)M[N]=[w[N][0],w[N][1]];for(O=1;O<y;++O)for(N=0;N<y-O;++N)M[N][0]=(1-m)*M[N][0]+m*M[parseInt(N+1,10)][0],M[N][1]=(1-m)*M[N][1]+m*M[parseInt(N+1,10)][1];return[M[0][0],M[0][1]]}function j(w,m,y){var M=[],N,O,it,et;for(N=0;N<6;N++)it=Math.min(15,parseInt(m.charAt(N),16)),et=Math.min(15,parseInt(y.charAt(N),16)),O=Math.floor((et-it)*w+it),O=O>15?15:O<0?0:O,M[N]=O.toString(16);return"#"+M.join("")}function S(w,m,y,M,N,O,it){if(N=="transform"){it={};for(var et in y[O][N])it[et]=et in M[O][N]?Math.round(((M[O][N][et]-y[O][N][et])*w+y[O][N][et])*u)/u:y[O][N][et];return it}else return typeof y[O][N]=="string"?j(w,y[O][N],M[O][N]):(it=Math.round(((M[O][N]-y[O][N])*w+y[O][N])*u)/u,N in Y||(it+=m[O][N]||"px"),it)}function K(w,m,y,M,N){return(y=b.exec(w))?(N=parseFloat(y[2]))&&m+(y[1]=="+"?1:-1)*N:parseFloat(w)}function z(w,m){var y=w?y=isFinite(w.length)?w:[w]:[],M,N=m.complete,O=m.duration,it=m.easing,et=m.bezier,mt=[],nt=[],pt=[],rt=[],vt,ut;for(et&&(vt=m.left,ut=m.top,delete m.right,delete m.bottom,delete m.left,delete m.top),M=y.length;M--;){if(mt[M]={},nt[M]={},pt[M]={},et){var r=G(y[M],"left"),h=G(y[M],"top"),_=[K(E(vt)?vt(y[M]):vt||0,parseFloat(r)),K(E(ut)?ut(y[M]):ut||0,parseFloat(h))];rt[M]=E(et)?et(y[M],_):et,rt[M].push(_),rt[M].unshift([parseInt(r,10),parseInt(h,10)])}for(var p in m){switch(p){case"complete":case"duration":case"easing":case"bezier":continue}var C=G(y[M],p),P,Q=E(m[p])?m[p](y[M]):m[p];if(typeof Q=="string"&&v.test(Q)&&!v.test(C)){delete m[p];continue}mt[M][p]=p=="transform"?f(C):typeof Q=="string"&&v.test(Q)?g(C).slice(1):parseFloat(C),nt[M][p]=p=="transform"?f(Q,mt[M][p]):typeof Q=="string"&&Q.charAt(0)=="#"?g(Q).slice(1):K(Q,parseFloat(C)),typeof Q=="string"&&(P=Q.match(D))&&(pt[M][p]=P[1])}}return A.apply(y,[O,function(ot,ft,Dt){for(M=y.length;M--;){et&&(Dt=W(rt[M],ot),y[M].style.left=Dt[0]+"px",y[M].style.top=Dt[1]+"px");for(var gt in m)ft=S(ot,pt,mt,nt,gt,M),gt=="transform"?y[M].style[R]=c(ft):gt=="opacity"&&!$?y[M].style.filter="alpha(opacity="+ft*100+")":y[M].style[x(gt)]=ft}},N,it])}return z.tween=A,z.getStyle=G,z.bezier=W,z.transform=R,z.parseTransform=f,z.formatTransform=c,z.easings={},z}();class Et{show(t){t||(this._el.container.style.display="block")}hide(t){this._el.container.style.display="none"}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}animatePosition(t,e){var s={duration:this.options.duration,easing:this.options.ease};for(var a in t)t.hasOwnProperty(a)&&(s[a]=t[a]+"px");this.animator&&this.animator.stop(),this.animator=Mt(e,s)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(t,e){for(var s in t)t.hasOwnProperty(s)&&(e?e.style[s]=t[s]+"px":this._el.container.style[s]=t[s]+"px")}getPosition(){return fe(this._el.container)}}class Xi{constructor(t,e,s){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},s&&(this._el.move=s),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ft},this.animator=null,this.dragevent=this.mousedrag,wt&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},V(this.options,e)}enable(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){q.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),q.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){wt?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=fe(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),q.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),q.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,q.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),q.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){t.preventDefault(),this.data.sliding=!0,wt?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=fe(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},s=!1;t.time=(new Date().getTime()-this.data.time.start)*10,e.time=(new Date().getTime()-this.data.time.start)*10,e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<3e3&&(s=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right")),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down")),this._animateMomentum(),s&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:Gt};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),e.left=Math.floor(t.x)+"px"),this.animator=Mt(this._el.move,e),this.fire("momentum",this.data)}}lt(ht);var q={addListener:function(i,t,e,s){var a=De(e),o="_tl_"+t+a;if(!i[o]){var l=function(b){return e.call(s||i,b||q._getEvent())};if(wt&&t==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(i,l,a);else if("addEventListener"in i)if(t==="mousewheel")i.addEventListener("DOMMouseScroll",l,!1),i.addEventListener(t,l,!1);else if(t==="mouseenter"||t==="mouseleave"){var u=l,v=t==="mouseenter"?"mouseover":"mouseout";l=function(b){if(!!q._checkMouse(i,b))return u(b)},i.addEventListener(v,l,!1)}else i.addEventListener(t,l,!1);else"attachEvent"in i&&i.attachEvent("on"+t,l);i[o]=l}},removeListener:function(i,t,e){var s=De(e),a="_tl_"+t+s,o=i[a];!o||(wt&&t==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(i,s):"removeEventListener"in i?t==="mousewheel"?(i.removeEventListener("DOMMouseScroll",o,!1),i.removeEventListener(t,o,!1)):t==="mouseenter"||t==="mouseleave"?i.removeEventListener(t==="mouseenter"?"mouseover":"mouseout",o,!1):i.removeEventListener(t,o,!1):"detachEvent"in i&&i.detachEvent("on"+t,o),i[a]=null)},_checkMouse:function(i,t){var e=t.relatedTarget;if(!e)return!0;try{for(;e&&e!==i;)e=e.parentNode}catch{return!1}return e!==i},_getEvent:function(){var i=window.event;if(!i)for(var t=arguments.callee.caller;t&&(i=t.arguments[0],!(i&&window.Event===i.constructor));)t=t.caller;return i},stopPropagation:function(i){i.stopPropagation?i.stopPropagation():i.cancelBubble=!0},disableClickPropagation:function(i){q.addListener(i,Xi.START,q.stopPropagation),q.addListener(i,"click",q.stopPropagation),q.addListener(i,"dblclick",q.stopPropagation)},preventDefault:function(i){i.preventDefault?i.preventDefault():i.returnValue=!1},stop:function(i){q.preventDefault(i),q.stopPropagation(i)},getWheelDelta:function(i){var t=0;return i.wheelDelta&&(t=i.wheelDelta/120),i.detail&&(t=-i.detail/3),t}},Lt=function(){var i,t,e,s,a=[],o=a.slice,l=a.filter,u=window.document,v={},b={},D={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,H=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,B=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,X=/^(?:body|html)$/i,Y=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],$=["after","prepend","before","append"],G=u.createElement("table"),Z=u.createElement("tr"),U={tr:u.createElement("tbody"),tbody:G,thead:G,tfoot:G,td:Z,th:Z,"*":u.createElement("div")},st=/complete|loaded|interactive/,ct=/^[\w-]*$/,at={},kt=at.toString,f={},c,d,g=u.createElement("div"),x={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},E=Array.isArray||function(r){return r instanceof Array};f.matches=function(r,h){if(!h||!r||r.nodeType!==1)return!1;var _=r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.matchesSelector;if(_)return _.call(r,h);var p,C=r.parentNode,P=!C;return P&&(C=g).appendChild(r),p=~f.qsa(C,h).indexOf(r),P&&g.removeChild(r),p};function I(r){return r==null?String(r):at[kt.call(r)]||"object"}function A(r){return I(r)=="function"}function W(r){return r!=null&&r==r.window}function j(r){return r!=null&&r.nodeType==r.DOCUMENT_NODE}function S(r){return I(r)=="object"}function K(r){return S(r)&&!W(r)&&Object.getPrototypeOf(r)==Object.prototype}function z(r){return typeof r.length=="number"}function w(r){return l.call(r,function(h){return h!=null})}function m(r){return r.length>0?e.fn.concat.apply([],r):r}c=function(r){return r.replace(/-+(.)?/g,function(h,_){return _?_.toUpperCase():""})};function y(r){return r.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}d=function(r){return l.call(r,function(h,_){return r.indexOf(h)==_})};function M(r){return r in b?b[r]:b[r]=new RegExp("(^|\\s)"+r+"(\\s|$)")}function N(r,h){return typeof h=="number"&&!D[y(r)]?h+"px":h}function O(r){var h,_;return v[r]||(h=u.createElement(r),u.body.appendChild(h),_=getComputedStyle(h,"").getPropertyValue("display"),h.parentNode.removeChild(h),_=="none"&&(_="block"),v[r]=_),v[r]}function it(r){return"children"in r?o.call(r.children):e.map(r.childNodes,function(h){if(h.nodeType==1)return h})}f.fragment=function(r,h,_){var p,C,P;return H.test(r)&&(p=e(u.createElement(RegExp.$1))),p||(r.replace&&(r=r.replace(B,"<$1></$2>")),h===i&&(h=L.test(r)&&RegExp.$1),h in U||(h="*"),P=U[h],P.innerHTML=""+r,p=e.each(o.call(P.childNodes),function(){P.removeChild(this)})),K(_)&&(C=e(p),e.each(_,function(Q,ot){R.indexOf(Q)>-1?C[Q](ot):C.attr(Q,ot)})),p},f.Z=function(r,h){return r=r||[],r.__proto__=e.fn,r.selector=h||"",r},f.isZ=function(r){return r instanceof f.Z},f.init=function(r,h){var _;if(r)if(typeof r=="string")if(r=r.trim(),r[0]=="<"&&L.test(r))_=f.fragment(r,RegExp.$1,h),r=null;else{if(h!==i)return e(h).find(r);_=f.qsa(u,r)}else{if(A(r))return e(u).ready(r);if(f.isZ(r))return r;if(E(r))_=w(r);else if(S(r))_=[r],r=null;else if(L.test(r))_=f.fragment(r.trim(),RegExp.$1,h),r=null;else{if(h!==i)return e(h).find(r);_=f.qsa(u,r)}}else return f.Z();return f.Z(_,r)},e=function(r,h){return f.init(r,h)};function et(r,h,_){for(t in h)_&&(K(h[t])||E(h[t]))?(K(h[t])&&!K(r[t])&&(r[t]={}),E(h[t])&&!E(r[t])&&(r[t]=[]),et(r[t],h[t],_)):h[t]!==i&&(r[t]=h[t])}e.extend=function(r){var h,_=o.call(arguments,1);return typeof r=="boolean"&&(h=r,r=_.shift()),_.forEach(function(p){et(r,p,h)}),r},f.qsa=function(r,h){var _,p=h[0]=="#",C=!p&&h[0]==".",P=p||C?h.slice(1):h,Q=ct.test(P);return j(r)&&Q&&p?(_=r.getElementById(P))?[_]:[]:r.nodeType!==1&&r.nodeType!==9?[]:o.call(Q&&!p?C?r.getElementsByClassName(P):r.getElementsByTagName(h):r.querySelectorAll(h))};function mt(r,h){return h==null?e(r):e(r).filter(h)}e.contains=function(r,h){return r!==h&&r.contains(h)};function nt(r,h,_,p){return A(h)?h.call(r,_,p):h}function pt(r,h,_){_==null?r.removeAttribute(h):r.setAttribute(h,_)}function rt(r,h){var _=r.className,p=_&&_.baseVal!==i;if(h===i)return p?_.baseVal:_;p?_.baseVal=h:r.className=h}function vt(r){var h;try{return r&&(r=="true"||(r=="false"?!1:r=="null"?null:!/^0/.test(r)&&!isNaN(h=Number(r))?h:/^[\[\{]/.test(r)?e.parseJSON(r):r))}catch{return r}}e.type=I,e.isFunction=A,e.isWindow=W,e.isArray=E,e.isPlainObject=K,e.isEmptyObject=function(r){var h;for(h in r)return!1;return!0},e.inArray=function(r,h,_){return a.indexOf.call(h,r,_)},e.camelCase=c,e.trim=function(r){return r==null?"":String.prototype.trim.call(r)},e.uuid=0,e.support={},e.expr={},e.map=function(r,h){var _,p=[],C,P;if(z(r))for(C=0;C<r.length;C++)_=h(r[C],C),_!=null&&p.push(_);else for(P in r)_=h(r[P],P),_!=null&&p.push(_);return m(p)},e.each=function(r,h){var _,p;if(z(r)){for(_=0;_<r.length;_++)if(h.call(r[_],_,r[_])===!1)return r}else for(p in r)if(h.call(r[p],p,r[p])===!1)return r;return r},e.grep=function(r,h){return l.call(r,h)},window.JSON&&(e.parseJSON=JSON.parse),e.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(r,h){at["[object "+h+"]"]=h.toLowerCase()}),e.fn={forEach:a.forEach,reduce:a.reduce,push:a.push,sort:a.sort,indexOf:a.indexOf,concat:a.concat,map:function(r){return e(e.map(this,function(h,_){return r.call(h,_,h)}))},slice:function(){return e(o.apply(this,arguments))},ready:function(r){return st.test(u.readyState)&&u.body?r(e):u.addEventListener("DOMContentLoaded",function(){r(e)},!1),this},get:function(r){return r===i?o.call(this):this[r>=0?r:r+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(r){return a.every.call(this,function(h,_){return r.call(h,_,h)!==!1}),this},filter:function(r){return A(r)?this.not(this.not(r)):e(l.call(this,function(h){return f.matches(h,r)}))},add:function(r,h){return e(d(this.concat(e(r,h))))},is:function(r){return this.length>0&&f.matches(this[0],r)},not:function(r){var h=[];if(A(r)&&r.call!==i)this.each(function(p){r.call(this,p)||h.push(this)});else{var _=typeof r=="string"?this.filter(r):z(r)&&A(r.item)?o.call(r):e(r);this.forEach(function(p){_.indexOf(p)<0&&h.push(p)})}return e(h)},has:function(r){return this.filter(function(){return S(r)?e.contains(this,r):e(this).find(r).size()})},eq:function(r){return r===-1?this.slice(r):this.slice(r,+r+1)},first:function(){var r=this[0];return r&&!S(r)?r:e(r)},last:function(){var r=this[this.length-1];return r&&!S(r)?r:e(r)},find:function(r){var h,_=this;return typeof r=="object"?h=e(r).filter(function(){var p=this;return a.some.call(_,function(C){return e.contains(C,p)})}):this.length==1?h=e(f.qsa(this[0],r)):h=this.map(function(){return f.qsa(this,r)}),h},closest:function(r,h){var _=this[0],p=!1;for(typeof r=="object"&&(p=e(r));_&&!(p?p.indexOf(_)>=0:f.matches(_,r));)_=_!==h&&!j(_)&&_.parentNode;return e(_)},parents:function(r){for(var h=[],_=this;_.length>0;)_=e.map(_,function(p){if((p=p.parentNode)&&!j(p)&&h.indexOf(p)<0)return h.push(p),p});return mt(h,r)},parent:function(r){return mt(d(this.pluck("parentNode")),r)},children:function(r){return mt(this.map(function(){return it(this)}),r)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(r){return mt(this.map(function(h,_){return l.call(it(_.parentNode),function(p){return p!==_})}),r)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(r){return e.map(this,function(h){return h[r]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=O(this.nodeName))})},replaceWith:function(r){return this.before(r).remove()},wrap:function(r){var h=A(r);if(this[0]&&!h)var _=e(r).get(0),p=_.parentNode||this.length>1;return this.each(function(C){e(this).wrapAll(h?r.call(this,C):p?_.cloneNode(!0):_)})},wrapAll:function(r){if(this[0]){e(this[0]).before(r=e(r));for(var h;(h=r.children()).length;)r=h.first();e(r).append(this)}return this},wrapInner:function(r){var h=A(r);return this.each(function(_){var p=e(this),C=p.contents(),P=h?r.call(this,_):r;C.length?C.wrapAll(P):p.append(P)})},unwrap:function(){return this.parent().each(function(){e(this).replaceWith(e(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(r){return this.each(function(){var h=e(this);(r===i?h.css("display")=="none":r)?h.show():h.hide()})},prev:function(r){return e(this.pluck("previousElementSibling")).filter(r||"*")},next:function(r){return e(this.pluck("nextElementSibling")).filter(r||"*")},html:function(r){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(h){var _=this.innerHTML;e(this).empty().append(nt(this,r,h,_))})},text:function(r){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=r===i?"":""+r})},attr:function(r,h){var _;return typeof r=="string"&&h===i?this.length==0||this[0].nodeType!==1?i:r=="value"&&this[0].nodeName=="INPUT"?this.val():!(_=this[0].getAttribute(r))&&r in this[0]?this[0][r]:_:this.each(function(p){if(this.nodeType===1)if(S(r))for(t in r)pt(this,t,r[t]);else pt(this,r,nt(this,h,p,this.getAttribute(r)))})},removeAttr:function(r){return this.each(function(){this.nodeType===1&&pt(this,r)})},prop:function(r,h){return r=x[r]||r,h===i?this[0]&&this[0][r]:this.each(function(_){this[r]=nt(this,h,_,this[r])})},data:function(r,h){var _=this.attr("data-"+r.replace(Y,"-$1").toLowerCase(),h);return _!==null?vt(_):i},val:function(r){return arguments.length===0?this[0]&&(this[0].multiple?e(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(h){this.value=nt(this,r,h,this.value)})},offset:function(r){if(r)return this.each(function(_){var p=e(this),C=nt(this,r,_,p.offset()),P=p.offsetParent().offset(),Q={top:C.top-P.top,left:C.left-P.left};p.css("position")=="static"&&(Q.position="relative"),p.css(Q)});if(this.length==0)return null;var h=this[0].getBoundingClientRect();return{left:h.left+window.pageXOffset,top:h.top+window.pageYOffset,width:Math.round(h.width),height:Math.round(h.height)}},css:function(r,h){if(arguments.length<2){var _=this[0],p=getComputedStyle(_,"");if(!_)return;if(typeof r=="string")return _.style[c(r)]||p.getPropertyValue(r);if(E(r)){var C={};return e.each(E(r)?r:[r],function(Q,ot){C[ot]=_.style[c(ot)]||p.getPropertyValue(ot)}),C}}var P="";if(I(r)=="string")!h&&h!==0?this.each(function(){this.style.removeProperty(y(r))}):P=y(r)+":"+N(r,h);else for(t in r)!r[t]&&r[t]!==0?this.each(function(){this.style.removeProperty(y(t))}):P+=y(t)+":"+N(t,r[t])+";";return this.each(function(){this.style.cssText+=";"+P})},index:function(r){return r?this.indexOf(e(r)[0]):this.parent().children().indexOf(this[0])},hasClass:function(r){return r?a.some.call(this,function(h){return this.test(rt(h))},M(r)):!1},addClass:function(r){return r?this.each(function(h){s=[];var _=rt(this),p=nt(this,r,h,_);p.split(/\s+/g).forEach(function(C){e(this).hasClass(C)||s.push(C)},this),s.length&&rt(this,_+(_?" ":"")+s.join(" "))}):this},removeClass:function(r){return this.each(function(h){if(r===i)return rt(this,"");s=rt(this),nt(this,r,h,s).split(/\s+/g).forEach(function(_){s=s.replace(M(_)," ")}),rt(this,s.trim())})},toggleClass:function(r,h){return r?this.each(function(_){var p=e(this),C=nt(this,r,_,rt(this));C.split(/\s+/g).forEach(function(P){(h===i?!p.hasClass(P):h)?p.addClass(P):p.removeClass(P)})}):this},scrollTop:function(r){if(!!this.length){var h="scrollTop"in this[0];return r===i?h?this[0].scrollTop:this[0].pageYOffset:this.each(h?function(){this.scrollTop=r}:function(){this.scrollTo(this.scrollX,r)})}},scrollLeft:function(r){if(!!this.length){var h="scrollLeft"in this[0];return r===i?h?this[0].scrollLeft:this[0].pageXOffset:this.each(h?function(){this.scrollLeft=r}:function(){this.scrollTo(r,this.scrollY)})}},position:function(){if(!!this.length){var r=this[0],h=this.offsetParent(),_=this.offset(),p=X.test(h[0].nodeName)?{top:0,left:0}:h.offset();return _.top-=parseFloat(e(r).css("margin-top"))||0,_.left-=parseFloat(e(r).css("margin-left"))||0,p.top+=parseFloat(e(h[0]).css("border-top-width"))||0,p.left+=parseFloat(e(h[0]).css("border-left-width"))||0,{top:_.top-p.top,left:_.left-p.left}}},offsetParent:function(){return this.map(function(){for(var r=this.offsetParent||u.body;r&&!X.test(r.nodeName)&&e(r).css("position")=="static";)r=r.offsetParent;return r})}},e.fn.detach=e.fn.remove,["width","height"].forEach(function(r){var h=r.replace(/./,function(_){return _[0].toUpperCase()});e.fn[r]=function(_){var p,C=this[0];return _===i?W(C)?C["inner"+h]:j(C)?C.documentElement["scroll"+h]:(p=this.offset())&&p[r]:this.each(function(P){C=e(this),C.css(r,nt(this,_,P,C[r]()))})}});function ut(r,h){h(r);for(var _ in r.childNodes)ut(r.childNodes[_],h)}return $.forEach(function(r,h){var _=h%2;e.fn[r]=function(){var p,C=e.map(arguments,function(ot){return p=I(ot),p=="object"||p=="array"||ot==null?ot:f.fragment(ot)}),P,Q=this.length>1;return C.length<1?this:this.each(function(ot,ft){P=_?ft:ft.parentNode,ft=h==0?ft.nextSibling:h==1?ft.firstChild:h==2?ft:null,C.forEach(function(Dt){if(Q)Dt=Dt.cloneNode(!0);else if(!P)return e(Dt).remove();ut(P.insertBefore(Dt,ft),function(gt){gt.nodeName!=null&&gt.nodeName.toUpperCase()==="SCRIPT"&&(!gt.type||gt.type==="text/javascript")&&!gt.src&&window.eval.call(window,gt.innerHTML)})})})},e.fn[_?r+"To":"insert"+(h?"Before":"After")]=function(p){return e(p)[r](this),this}}),f.Z.prototype=e.fn,f.uniq=d,f.deserializeValue=vt,e.zepto=f,e}();window.Zepto=Lt;window.$===void 0&&(window.$=Lt);(function(i){i.zepto.qsa;var t=1,e,s=Array.prototype.slice,a=i.isFunction,o=function(f){return typeof f=="string"},l={},u={},v="onfocusin"in window,b={focus:"focusin",blur:"focusout"},D={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents";function L(f){return f._zid||(f._zid=t++)}function H(f,c,d,g){if(c=B(c),c.ns)var x=X(c.ns);return(l[L(f)]||[]).filter(function(E){return E&&(!c.e||E.e==c.e)&&(!c.ns||x.test(E.ns))&&(!d||L(E.fn)===L(d))&&(!g||E.sel==g)})}function B(f){var c=(""+f).split(".");return{e:c[0],ns:c.slice(1).sort().join(" ")}}function X(f){return new RegExp("(?:^| )"+f.replace(" "," .* ?")+"(?: |$)")}function Y(f,c){return f.del&&!v&&f.e in b||!!c}function R(f){return D[f]||v&&b[f]||f}function $(f,c,d,g,x,E,I){var A=L(f),W=l[A]||(l[A]=[]);c.split(/\s/).forEach(function(j){if(j=="ready")return i(document).ready(d);var S=B(j);S.fn=d,S.sel=x,S.e in D&&(d=function(z){var w=z.relatedTarget;if(!w||w!==this&&!i.contains(this,w))return S.fn.apply(this,arguments)}),S.del=E;var K=E||d;S.proxy=function(z){if(z=at(z),!z.isImmediatePropagationStopped()){z.data=g;var w=K.apply(f,z._args==e?[z]:[z].concat(z._args));return w===!1&&(z.preventDefault(),z.stopPropagation()),w}},S.i=W.length,W.push(S),"addEventListener"in f&&f.addEventListener(R(S.e),S.proxy,Y(S,I))})}function G(f,c,d,g,x){var E=L(f);(c||"").split(/\s/).forEach(function(I){H(f,I,d,g).forEach(function(A){delete l[E][A.i],"removeEventListener"in f&&f.removeEventListener(R(A.e),A.proxy,Y(A,x))})})}i.event={add:$,remove:G},i.proxy=function(f,c){if(a(f)){var d=function(){return f.apply(c,arguments)};return d._zid=L(f),d}else{if(o(c))return i.proxy(f[c],f);throw new TypeError("expected function")}},i.fn.bind=function(f,c,d){return this.on(f,c,d)},i.fn.unbind=function(f,c){return this.off(f,c)},i.fn.one=function(f,c,d,g){return this.on(f,c,d,g,1)};var Z=function(){return!0},U=function(){return!1},st=/^([A-Z]|returnValue$|layer[XY]$)/,ct={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function at(f,c){return(c||!f.isDefaultPrevented)&&(c||(c=f),i.each(ct,function(d,g){var x=c[d];f[d]=function(){return this[g]=Z,x&&x.apply(c,arguments)},f[g]=U}),(c.defaultPrevented!==e?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(f.isDefaultPrevented=Z)),f}function kt(f){var c,d={originalEvent:f};for(c in f)!st.test(c)&&f[c]!==e&&(d[c]=f[c]);return at(d,f)}i.fn.delegate=function(f,c,d){return this.on(c,f,d)},i.fn.undelegate=function(f,c,d){return this.off(c,f,d)},i.fn.live=function(f,c){return i(document.body).delegate(this.selector,f,c),this},i.fn.die=function(f,c){return i(document.body).undelegate(this.selector,f,c),this},i.fn.on=function(f,c,d,g,x){var E,I,A=this;return f&&!o(f)?(i.each(f,function(W,j){A.on(W,c,d,j,x)}),A):(!o(c)&&!a(g)&&g!==!1&&(g=d,d=c,c=e),(a(d)||d===!1)&&(g=d,d=e),g===!1&&(g=U),A.each(function(W,j){x&&(E=function(S){return G(j,S.type,g),g.apply(this,arguments)}),c&&(I=function(S){var K,z=i(S.target).closest(c,j).get(0);if(z&&z!==j)return K=i.extend(kt(S),{currentTarget:z,liveFired:j}),(E||g).apply(z,[K].concat(s.call(arguments,1)))}),$(j,f,g,d,c,I||E)}))},i.fn.off=function(f,c,d){var g=this;return f&&!o(f)?(i.each(f,function(x,E){g.off(x,c,E)}),g):(!o(c)&&!a(d)&&d!==!1&&(d=c,c=e),d===!1&&(d=U),g.each(function(){G(this,f,d,c)}))},i.fn.trigger=function(f,c){return f=o(f)||i.isPlainObject(f)?i.Event(f):at(f),f._args=c,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(f):i(this).triggerHandler(f,c)})},i.fn.triggerHandler=function(f,c){var d,g;return this.each(function(x,E){d=kt(o(f)?i.Event(f):f),d._args=c,d.target=E,i.each(H(E,f.type||f),function(I,A){if(g=A.proxy(d),d.isImmediatePropagationStopped())return!1})}),g},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(f){i.fn[f]=function(c){return c?this.bind(f,c):this.trigger(f)}}),["focus","blur"].forEach(function(f){i.fn[f]=function(c){return c?this.bind(f,c):this.each(function(){try{this[f]()}catch{}}),this}}),i.Event=function(f,c){o(f)||(c=f,f=c.type);var d=document.createEvent(u[f]||"Events"),g=!0;if(c)for(var x in c)x=="bubbles"?g=!!c[x]:d[x]=c[x];return d.initEvent(f,g,!0),at(d)}})(Lt);(function(i){var t=0,e=window.document,s,a,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,l=/^(?:text|application)\/javascript/i,u=/^(?:text|application)\/xml/i,v="application/json",b="text/html",D=/^\s*$/;function L(c,d,g){var x=i.Event(d);return i(c).trigger(x,g),!x.isDefaultPrevented()}function H(c,d,g,x){if(c.global)return L(d||e,g,x)}i.active=0;function B(c){c.global&&i.active++===0&&H(c,null,"ajaxStart")}function X(c){c.global&&!--i.active&&H(c,null,"ajaxStop")}function Y(c,d){var g=d.context;if(d.beforeSend.call(g,c,d)===!1||H(d,g,"ajaxBeforeSend",[c,d])===!1)return!1;H(d,g,"ajaxSend",[c,d])}function R(c,d,g,x){var E=g.context,I="success";g.success.call(E,c,I,d),x&&x.resolveWith(E,[c,I,d]),H(g,E,"ajaxSuccess",[d,g,c]),G(I,d,g)}function $(c,d,g,x,E){var I=x.context;x.error.call(I,g,d,c),E&&E.rejectWith(I,[g,d,c]),H(x,I,"ajaxError",[g,x,c||d]),G(d,g,x)}function G(c,d,g){var x=g.context;g.complete.call(x,d,c),H(g,x,"ajaxComplete",[d,g]),X(g)}function Z(){}i.ajaxJSONP=function(c,d){if(!("type"in c))return i.ajax(c);var g=c.jsonpCallback,x=(i.isFunction(g)?g():g)||"jsonp"+ ++t,E=e.createElement("script"),I=window[x],A,W=function(K){i(E).triggerHandler("error",K||"abort")},j={abort:W},S;return d&&d.promise(j),i(E).on("load error",function(K,z){clearTimeout(S),i(E).off().remove(),K.type=="error"||!A?$(null,z||"error",j,c,d):R(A[0],j,c,d),window[x]=I,A&&i.isFunction(I)&&I(A[0]),I=A=void 0}),Y(j,c)===!1?(W("abort"),j):(window[x]=function(){A=arguments},E.src=c.url.replace(/\?(.+)=\?/,"?$1="+x),e.head.appendChild(E),c.timeout>0&&(S=setTimeout(function(){W("timeout")},c.timeout)),j)},i.ajaxSettings={type:"GET",beforeSend:Z,success:Z,error:Z,complete:Z,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:v,xml:"application/xml, text/xml",html:b,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function U(c){return c&&(c=c.split(";",2)[0]),c&&(c==b?"html":c==v?"json":l.test(c)?"script":u.test(c)&&"xml")||"text"}function st(c,d){return d==""?c:(c+"&"+d).replace(/[&?]{1,2}/,"?")}function ct(c){c.processData&&c.data&&i.type(c.data)!="string"&&(c.data=i.param(c.data,c.traditional)),c.data&&(!c.type||c.type.toUpperCase()=="GET")&&(c.url=st(c.url,c.data),c.data=void 0)}i.ajax=function(c){var d=i.extend({},c||{}),g=i.Deferred&&i.Deferred();for(s in i.ajaxSettings)d[s]===void 0&&(d[s]=i.ajaxSettings[s]);B(d),d.crossDomain||(d.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(d.url)&&RegExp.$2!=window.location.host),d.url||(d.url=window.location.toString()),ct(d),d.cache===!1&&(d.url=st(d.url,"_="+Date.now()));var x=d.dataType,E=/\?.+=\?/.test(d.url);if(x=="jsonp"||E)return E||(d.url=st(d.url,d.jsonp?d.jsonp+"=?":d.jsonp===!1?"":"callback=?")),i.ajaxJSONP(d,g);var I=d.accepts[x],A={},W=function(m,y){A[m.toLowerCase()]=[m,y]},j=/^([\w-]+:)\/\//.test(d.url)?RegExp.$1:window.location.protocol,S=d.xhr(),K=S.setRequestHeader,z;if(g&&g.promise(S),d.crossDomain||W("X-Requested-With","XMLHttpRequest"),W("Accept",I||"*/*"),(I=d.mimeType||I)&&(I.indexOf(",")>-1&&(I=I.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(I)),(d.contentType||d.contentType!==!1&&d.data&&d.type.toUpperCase()!="GET")&&W("Content-Type",d.contentType||"application/x-www-form-urlencoded"),d.headers)for(a in d.headers)W(a,d.headers[a]);if(S.setRequestHeader=W,S.onreadystatechange=function(){if(S.readyState==4){S.onreadystatechange=Z,clearTimeout(z);var m,y=!1;if(S.status>=200&&S.status<300||S.status==304||S.status==0&&j=="file:"){x=x||U(d.mimeType||S.getResponseHeader("content-type")),m=S.responseText;try{x=="script"?(0,eval)(m):x=="xml"?m=S.responseXML:x=="json"&&(m=D.test(m)?null:i.parseJSON(m))}catch(M){y=M}y?$(y,"parsererror",S,d,g):R(m,S,d,g)}else $(S.statusText||null,S.status?"error":"abort",S,d,g)}},Y(S,d)===!1)return S.abort(),$(null,"abort",S,d,g),S;if(d.xhrFields)for(a in d.xhrFields)S[a]=d.xhrFields[a];var w="async"in d?d.async:!0;S.open(d.type,d.url,w,d.username,d.password);for(a in A)K.apply(S,A[a]);return d.timeout>0&&(z=setTimeout(function(){S.onreadystatechange=Z,S.abort(),$(null,"timeout",S,d,g)},d.timeout)),S.send(d.data?d.data:null),S};function at(c,d,g,x){var E=!i.isFunction(d);return{url:c,data:E?d:void 0,success:E?i.isFunction(g)?g:void 0:d,dataType:E&&x||g}}i.get=function(c,d,g,x){return i.ajax(at.apply(null,arguments))},i.post=function(c,d,g,x){var E=at.apply(null,arguments);return E.type="POST",i.ajax(E)},i.getJSON=function(c,d,g){var x=at.apply(null,arguments);return x.dataType="json",i.ajax(x)},i.fetchJSON=function(c){var d=new XMLHttpRequest;return new Promise(function(g,x){d.onreadystatechange=function(){try{if(d.readyState!==4)return;if(d.status>=200&&d.status<300){var E=JSON.parse(d.responseText);g(E)}else x({status:d.status,statusText:d.statusText})}catch(I){x({status:400,statusText:`Error fetching JSON from ${c}: ${I}`})}},d.open("GET",c,!0),d.send()})},i.fn.load=function(c,d,g){if(!this.length)return this;var x=this,E=c.split(/\s/),I,A=at(c,d,g),W=A.success;return E.length>1&&(A.url=E[0],I=E[1]),A.success=function(j){x.html(I?i("<div>").html(j.replace(o,"")).find(I):j),W&&W.apply(x,arguments)},i.ajax(A),this};var kt=encodeURIComponent;function f(c,d,g,x){var E,I=i.isArray(d),A=i.isPlainObject(d);i.each(d,function(W,j){E=i.type(j),x&&(W=g?x:x+"["+(A||E=="object"||E=="array"?W:"")+"]"),!x&&I?c.add(j.name,j.value):E=="array"||!g&&E=="object"?f(c,j,g,W):c.add(W,j)})}i.param=function(c,d){var g=[];return g.add=function(x,E){this.push(kt(x)+"="+kt(E))},f(g,c,d),g.join("&").replace(/%20/g,"+")}})(Lt);(function(i){i.fn.serializeArray=function(){var t=[],e;return i([].slice.call(this.get(0).elements)).each(function(){e=i(this);var s=e.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&s!="submit"&&s!="reset"&&s!="button"&&(s!="radio"&&s!="checkbox"||this.checked)&&t.push({name:e.attr("name"),value:e.val()})}),t},i.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},i.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var e=i.Event("submit");this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()}return this}})(Lt);(function(i){"__proto__"in{}||i.extend(i.zepto,{Z:function(e,s){return e=e||[],i.extend(e,i.fn),e.selector=s||"",e.__Z=!0,e},isZ:function(e){return i.type(e)==="array"&&"__Z"in e}});try{getComputedStyle(void 0)}catch{var t=getComputedStyle;window.getComputedStyle=function(s,a){try{return t(s,a)}catch{return null}}}})(Lt);const me=Lt.getJSON,$t=Lt.ajax,xe=Lt.fetchJSON,yt=[["millisecond",1,function(i){}],["second",1e3,function(i){i.setMilliseconds(0)}],["minute",1e3*60,function(i){i.setSeconds(0)}],["hour",1e3*60*60,function(i){i.setMinutes(0)}],["day",1e3*60*60*24,function(i){i.setHours(0)}],["month",1e3*60*60*24*30,function(i){i.setDate(1)}],["year",1e3*60*60*24*365,function(i){i.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(i){var t=i.getFullYear();i.setFullYear(t-t%10)}],["century",1e3*60*60*24*365*100,function(i){var t=i.getFullYear();i.setFullYear(t-t%100)}],["millennium",1e3*60*60*24*365*1e3,function(i){var t=i.getFullYear();i.setFullYear(t-t%1e3)}]],Nt=["millisecond","second","minute","hour","day","month","year"],Se=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,Ki=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Ce={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},re=te.extend({initialize:function(i,t,e){typeof i=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(i)}:Date==i.constructor?this.data={format:"yyyy mmmm",date_obj:i}:(this.data=JSON.parse(JSON.stringify(i)),this._createDateObj()),this._setFormat(t,e)},setDateFormat:function(i){this.data.format=i},getDisplayDate:function(i,t){if(this.data.display_date)return this.data.display_date;i||(i=_t.fallback),i.constructor!=_t&&(F("First argument to getDisplayDate must be type Language"),i=_t.fallback);var e=t||this.data.format;return i.formatDate(this.data.date_obj,e)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(i){if(!this.data.date_obj.constructor==i.data.date_obj.constructor)throw new J("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(i.data.date_obj):this.data.date_obj<i.data.date_obj},isAfter:function(i){if(!this.data.date_obj.constructor==i.data.date_obj.constructor)throw new J("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(i.data.date_obj):this.data.date_obj>i.data.date_obj},floor:function(i){for(var t=new Date(this.data.date_obj.getTime()),e=0;e<yt.length;e++)if(yt[e][2](t),yt[e][0]==i)return new re(t);throw new J("invalid_scale_err",i)},_getDateData:function(){var i={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};V(i,this.data);for(var t in Nt){var e=dt(i[Nt[t]]);if(!e.match(/^-?\d*$/))throw new J("invalid_date_err",Nt[t]+" = '"+i[Nt[t]]+"'");var s=parseInt(i[Nt[t]]);isNaN(s)&&(s=t==4||t==5?1:0),i[Nt[t]]=s}return i.month>0&&i.month<=12&&(i.month=i.month-1),i},_createDateObj:function(){var i=this._getDateData();this.data.date_obj=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond),this.data.date_obj.getFullYear()!=i.year&&this.data.date_obj.setFullYear(i.year)},findBestFormat:function(i){for(var t=Nt,e=0;e<t.length;e++)if(this.data[t[e]])return i?i in Ce||(i="short"):i="base",Ce[i][t[e]];return""},_setFormat:function(i,t){i?this.data.format=i:this.data.format||(this.data.format=this.findBestFormat()),t?this.data.format_short=t:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))}});function Ne(i){if(i.match(Se)){var t=i.match(Se).slice(1),e={year:t[0].replace("+","")};return t[1]&&(e.month=t[1].replace("-","")),t[2]&&(e.day=t[2].replace("-","")),e}if(i.match(Ki))return cls.parseISODate(i);if(i.match(/^\-?\d+$/))return{year:i};var s={};if(i.match(/\d+\/\d+\/\d+/)){var a=i.match(/\d+\/\d+\/\d+/)[0];i=dt(i.replace(a,""));var o=a.split("/");s.month=o[0],s.day=o[1],s.year=o[2]}if(i.match(/\d+\/\d+/)){var a=i.match(/\d+\/\d+/)[0];i=dt(i.replace(a,""));var o=a.split("/");s.month=o[0],s.year=o[1]}if(i.match(":")){var l=i.split(":");if(s.hour=l[0],s.minute=l[1],l[2]){let u=l[2].split(".");s.second=u[0],s.millisecond=u[1]}}return s}const Zt=te.extend({initialize:function(i){if(this.year=parseInt(i),isNaN(this.year))throw new J("invalid_year_err",i)},isBefore:function(i){return this.year<i.year},isAfter:function(i){return this.year>i.year},getTime:function(){return this.year}}),pe=1e6,ge=pe*10,ve=ge*10,Ie=ve*10;function St(i){return function(t){var e=t.getTime();return new Zt(Math.floor(e/i)*i)}}const Kt=[["year",1,new St(1)],["decade",10,new St(10)],["century",100,new St(100)],["millennium",1e3,new St(1e3)],["age",pe,new St(pe)],["epoch",ge,new St(ge)],["era",ve,new St(ve)],["eon",Ie,new St(Ie)]],oe=re.extend({initialize:function(i,t,e){Zt==i.constructor?this.data={date_obj:i}:(this.data=JSON.parse(JSON.stringify(i)),this._createDateObj()),this._setFormat(t,e)},_createDateObj:function(){var i=this._getDateData();this.data.date_obj=new Zt(i.year)},floor:function(i){for(var t=0;t<Kt.length;t++)if(Kt[t][0]==i){var e=Kt[t][2](this.data.date_obj);return new oe(e)}throw new J("invalid_scale_err",i)}});class _t{constructor(t,e){for(let o in Ct.en)this[o]=Ct.en[o];if(t&&typeof t=="string"&&t!="en"){var s=t;if(!(s in Ct)){console.log(`Expected language ${s} to be cached. Did you call the constructor directly?`);var a=Xe(s,e);xe(a).then(o=>{Ct[s]=o}).catch(o=>{console.log(`Error loading language [${a}] ${o.statusText} [${o.status}]`)})}V(this,Ct[s])}}mergeData(t){for(k in Ct.en)t[k]&&(typeof this[k]=="object"?V(t[k],this[k]):this[k]=t[k])}formatBigYear(t,e){var s=t.year,a=this.bigdateformats[e]||this.bigdateformats.fallback;if(a){for(var o=0;o<a.length;o++){var l=a[o];if(Math.abs(s/l[0])>1)return Ae(Math.abs(s/l[0]),l[1])}return s.toString()}else return F("Language file dateformats missing cosmological. Falling back."),Ae(s,e)}_(t){return this.messages[t]||_t.fallback.messages[t]||t}formatDate(t,e){return t.constructor==Date?this.formatJSDate(t,e):t.constructor==Zt?this.formatBigYear(t,e):t.data&&t.data.date_obj?this.formatDate(t.data.date_obj,e):(F("Unfamiliar date presented for formatting"),t.toString())}formatJSDate(t,e){var s=this,a=function(U,st){var ct=s.period_labels[U];if(ct)var U=st<12?ct[0]:ct[1];return"<span class='tl-timeaxis-timesuffix'>"+U+"</span>"},o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,l=/[^-+\dA-Z]/g;e||(e="full");var u=this.dateformats[e]||_t.fallback.dateformats[e];u||(u=e);var v="get",b=t[v+"Date"](),D=t[v+"Day"](),L=t[v+"Month"](),H=t[v+"FullYear"](),B=t[v+"Hours"](),X=t[v+"Minutes"](),Y=t[v+"Seconds"](),R=t[v+"Milliseconds"](),$=t.getTimezoneOffset(),G={d:b,dd:Tt(b),ddd:this.date.day_abbr[D],dddd:this.date.day[D],m:L+1,mm:Tt(L+1),mmm:this.date.month_abbr[L],mmmm:this.date.month[L],yy:String(H).slice(2),yyyy:H<0&&this.has_negative_year_modifier()?Math.abs(H):H,h:B%12||12,hh:Tt(B%12||12),H:B,HH:Tt(B),M:X,MM:Tt(X),s:Y,ss:Tt(Y),l:Tt(R,3),L:Tt(R>99?Math.round(R/10):R),t:a("t",B),tt:a("tt",B),T:a("T",B),TT:a("TT",B),Z:(String(t).match(o)||[""]).pop().replace(l,""),o:($>0?"-":"+")+Tt(Math.floor(Math.abs($)/60)*100+Math.abs($)%60,4),S:["th","st","nd","rd"][b%10>3?0:(b%100-b%10!=10)*b%10]},Z=u.replace(_t.DATE_FORMAT_TOKENS,function(U){return U in G?G[U]:U.slice(1,U.length-1)});return this._applyEra(Z,H)}has_negative_year_modifier(){return Boolean(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(t,e){var s=e<0?this.era_labels.negative_year:this.era_labels.positive_year,a="";return s.prefix&&(a+="<span>"+s.prefix+"</span> "),a+=t,s.suffix&&(a+=" <span>"+s.suffix+"</span>"),a}}async function Qi(i,t){var e=Xe(i,t);try{if(!Ct[i]){let s=await xe(e);Ct[i]=s}return new _t(i,t)}catch(s){return console.log(`Error loading language [${e}] ${s.statusText}`),null}}function Xe(i,t){if(/\.json$/.test(i))var e=i;else{var s="/locale/"+i+".json";/\/$/.test(t)&&(s=s.substr(1));var e=t+s}return e}function Ae(i,t){if(t.match(/%(\.(\d+))?f/)){var e=t.match(/%(\.(\d+))?f/),s=e[0];return e[2]&&(i=i.toFixed(e[2])),t.replace(s,i)}return t}_t.fallback={messages:{}};_t.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Ct={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",contract_timeline:"Contract Timeline",return_to_title:"Return to Title",loading_content:"Loading Content",expand_timeline:"Expand Timeline",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",invalid_url_share_required:"Because of unexpected changes to Google's data access API, the creator of this timeline must enable 'anyone with the url can read' access for this spreadsheet. See timeline.knightlab.com for more information.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",empty_feed_err:"No data entries found",missing_start_date_err:"Missing start_date",invalid_data_format_err:"Header row has been modified.",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_invalidurl_err:"Invalid Twitter URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",youtube_invalidurl_err:"Invalid YouTube URL",spotify_invalid_url:"Invalid Spotify URL",template_value_err:"No value provided for variable",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value\u2014must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let ke=new _t;_t.fallback=ke;class Bt{setLanguage(t){this.language=t}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;F(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return ke}_(t){return this.getLanguage()._(t)}}class le{constructor(t,e,s){s&&this.setLanguage(s),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=t,V(this.options,e),this._el.container=T("div",this.options.message_class),t&&(t.appendChild(this._el.container),this._el.parent=t),this.animator={},this._initLayout(),this._initEvents()}updateMessage(t){t?this._el.message.innerHTML=t:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(t,e){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=T("div","tl-message-container",this._el.container),this._el.loading_icon=T("div",this.options.message_icon_class,this._el.message_container),this._el.message=T("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){q.addListener(this._el.container,"click",this._onMouseClick,this),q.addListener(this,"removed",this._onRemove,this)}}lt(le,Bt,ht,Et);function Jt(i,e){var e=e||"start_date";i.sort(function(s,a){return s[e].isBefore(a[e])?-1:s[e].isAfter(a[e])?1:0})}function Oe(i){var t={hour:null,minute:null,second:null,millisecond:null},e=null,s=i.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);s&&(e=dt(s[0]),i=dt(i.substring(0,i.lastIndexOf(e))));var a=[],o=i.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(o?a=o.slice(1):(a=i.split(":"),a.length==1&&(a=i.split("."))),a.length>4)throw new J("invalid_separator_error");let l=a[0];if(t.hour=parseInt(l),e&&e.toLowerCase()[0]=="p"&&t.hour!=12?t.hour+=12:e&&e.toLowerCase()[0]=="a"&&t.hour==12&&(t.hour=0),isNaN(t.hour)||t.hour<0||t.hour>23)throw new J("invalid_hour_err",l);if(a.length>1){let b=a[1];if(t.minute=parseInt(b),isNaN(t.minute))throw new J("invalid_minute_err",b)}if(a.length>2){var u=a[2].split(/[\.,]/);if(a=u.concat(a.slice(3)),a.length>2)throw new J("invalid_second_fractional_err");if(t.second=parseInt(a[0]),isNaN(t.second))throw new J("invalid_second_err",a[0]);if(a.length==2){var v=parseInt(a[1]);if(isNaN(v))throw new J("invalid_fractional_err",a[1]);t.millisecond=100*v}}return t}const ts=new RegExp("(^-?\\d+$|^$)");function Pe(i){try{return Object.keys(i).forEach(t=>{let e=i[t];if(e&&e.match&&!e.match(ts))throw`invalid value ${e} for ${t}`}),!0}catch{return!1}}const Re={human:re,cosmological:oe},es={text:["headline","text"],media:["caption","credit"]},is={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};se.addHook("afterSanitizeAttributes",function(i){if(i.nodeName=="A"&&"href"in i){"target"in i.attributes||i.setAttribute("target","_blank");let t=i.attributes.rel;t?t.value.indexOf("noopener")==-1&&i.setAttribute("rel",`noopener ${t.value}`):i.setAttribute("rel","noopener")}});function ze(i,t,e){Object.keys(e).forEach(s=>{var a=s=="slide"?i:i[s];a&&e[s].forEach(o=>{typeof a[o]!="undefined"&&(a[o]=t(a[o]))})})}function ss(i){return se.sanitize(i,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class ee{constructor(t){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof t=="object"&&t.events){if(this.scale=t.scale,this.events=[],this._ensureValidScale(t.events),t.title){var e=this._assignID(t.title);this._tidyFields(t.title),this.title=t.title,this.event_dict[e]=this.title}for(var s=0;s<t.events.length;s++)try{this.addEvent(t.events[s],!0)}catch(a){this.logError(a)}t.eras&&t.eras.forEach((a,o)=>{try{this.addEra(a)}catch(l){this.logError("Era "+o+": "+l)}}),Jt(this.events),Jt(this.eras)}}logError(t){F(`logError: ${t}`),this.messages.errors.push(t)}getErrors(t){return t?this.messages.errors.join(t):this.messages.errors}validate(){(typeof this.events=="undefined"||typeof this.events.length=="undefined"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var t=0;t<this.eras.length;t++)if(typeof this.eras[t].start_date=="undefined"||typeof this.eras[t].end_date=="undefined"){var e;this.eras[t].headline?e=this.eras[t].headline:e="era "+(t+1),this.logError("All eras must have start and end dates. ["+e+"]")}}isValid(){return this.messages.errors.length==0}addEvent(t,e){var s=this._assignID(t);return typeof t.start_date=="undefined"?(F("Missing start date, skipping event"),console.log(t),null):(this._processDates(t),this._tidyFields(t),this.events.push(t),this.event_dict[s]=t,e||Jt(this.events),s)}addEra(t){var e=this._assignID(t);if(typeof t.start_date=="undefined")throw new J("missing_start_date_err",e);this._processDates(t),this._tidyFields(t),this.eras.push({start_date:t.start_date,end_date:t.end_date,headline:t.text.headline})}_assignID(t){var e=t.unique_id;return dt(e)||(e=t.text?he(t.text.headline):null),t.unique_id=Ri(this.event_dict,e),t.unique_id}_makeUniqueIdentifiers(t,e){for(var s=[t],a=0;a<e.length;a++)dt(e[a].unique_id)&&(e[a].unique_id=he(e[a].unique_id),s.indexOf(e[a].unique_id)==-1?s.push(e[a].unique_id):e[a].unique_id="");if(s.length!=e.length+1){for(var a=0;a<e.length;a++)if(!e[a].unique_id){var o=e[a].text?he(e[a].text.headline):null;o||(o=It(6)),s.indexOf(o)!=-1&&(o=o+"-"+a),s.push(o),e[a].unique_id=o}}}_ensureValidScale(t){if(!this.scale){this.scale="human";for(var e=0;e<t.length;e++){if(t[e].scale=="cosmological"){this.scale="cosmological";break}if(t[e].start_date&&typeof t[e].start_date.year!="undefined"){var s=new oe(t[e].start_date),a=s.data.date_obj.year;if(a<-271820||a>275759){this.scale="cosmological";break}}}F(`Determining scale dynamically: ${this.scale}`)}var o=Re[this.scale];o||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(t){var e=Re[this.scale];if(!(t.start_date instanceof e)){var s=t.start_date;if(t.start_date=new e(s),typeof t.end_date!="undefined"&&!(t.end_date instanceof e)){var a=t.end_date,o=!0;for(let l in s)o=o&&s[l]==a[l];o?(F("End date same as start date is redundant; dropping end date"),delete t.end_date):t.end_date=new e(a)}}}getEarliestDate(){var t=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(t)?this.eras[0].start_date:t}getLatestDate(){for(var t=[],e=0;e<this.events.length;e++)this.events[e].end_date?t.push({date:this.events[e].end_date}):t.push({date:this.events[e].start_date});for(var e=0;e<this.eras.length;e++)this.eras[e].end_date?t.push({date:this.eras[e].end_date}):t.push({date:this.eras[e].start_date});return Jt(t,"date"),t.slice(-1)[0].date}_tidyFields(t){function e(s,a,o){o||(o=""),s.hasOwnProperty(a)||(s[a]=o)}t.group&&(t.group=dt(t.group)),t.text||(t.text={}),e(t.text,"text"),e(t.text,"headline"),ze(t,ss,es),ze(t,Vi,is)}}function as(i,t){return i==null?"":(t=t||`
`,i.charAt(i.length-t.length)!==t?i:i.substring(0,i.length-t.length))}async function ns(i){return new Promise((t,e)=>{if(i.data){var s=Ke(Qe(i.data,i),i);s.useMemoryStore=!0,t(s)}else i.url&&window.fetch(i.url,{mode:"cors"}).then(function(a){if(a.status!=200){a.headers.get("content-type")=="application/json"?a.text().then(o=>{e(JSON.parse(o))}):e({status_code:a.status,message:`Error fetching CSV: [${a.status} ${a.statusText}]`});return}return a.text?a.text():a}).then(function(a){if(a){var o=ls(a,i);o.useMemoryStore=!0,t(o)}}).catch(a=>{e({status_code:500,message:`Error fetching CSV: ${a}`})})})}function Ke(i,t){return t=t||{},t.noHeaderRow!==!0&&i.length>0?{fields:i[0].map((e,s)=>e&&e.trim?e.trim():`untitled${s}`),records:i.slice(1)}:{records:i}}function rs(i){var t={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var e in i)e==="trim"?t.skipinitialspace=i.trim:t[e.toLowerCase()]=i[e];return t}function Qe(i,t){(!t||t&&!t.lineterminator)&&(i=os(i,t));var e=rs(t);i=as(i,e.lineterminator);var s="",a=!1,o=!1,l="",u=[],v=[],b,D;for(D=function(L){return o!==!0&&(L===""?L=null:e.skipinitialspace===!0&&(L=L.trim())),L},b=0;b<i.length;b+=1)s=i.charAt(b),a===!1&&(s===e.delimiter||s===e.lineterminator)?(l=D(l),u.push(l),s===e.lineterminator&&(v.push(u),u=[]),l="",o=!1):s!==e.quotechar?l+=s:a?i.charAt(b+1)===e.quotechar?(l+=e.quotechar,b+=1):a=!1:(a=!0,o=!0);return l=D(l),u.push(l),v.push(u),e.skipinitialrows&&(v=v.slice(e.skipinitialrows)),v}function os(i,t){return t&&!t.lineterminator?i.replace(/(\r\n|\n|\r)/gm,`
`):i}function ls(i,t){let e=Ke(Qe(i,t)),s=[];return e.records.forEach(a=>{let o={};e.fields.forEach((l,u)=>o[l]=a[u]),s.push(o)}),s}function Pt(i){if(i)return i.replace(/[\s,]+/g,"")}function hs(i){return typeof i!="string"?"":i.match(/^(https?:)?\/\/?/)?{url:i}:{color:i}}function ds(i){let t=["Media Caption","Media Credit","Media","Media Thumbnail","Headline","Text","Display Date","Group","Tag","Background","Type","Start Date","End Date"],e={};Object.keys(i).forEach(a=>{e[a]=dt(i[a])});let s={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||""},text:{headline:e.Headline||e.Title||"",text:e.Text||e.Description||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:hs(e.Background),type:e.Type||""};if(Object.keys(i).forEach(a=>{t.indexOf(a)<0&&(s[a]=dt(i[a]))}),Object.keys(e).includes("Start")||Object.keys(e).includes("End"))e.Start&&(s.start_date=Ne(e.Start)),e.End&&(s.end_date=Ne(e.End));else{if(e.Year&&(s.start_date={year:Pt(e.Year),month:Pt(e.Month)||"",day:Pt(e.Day)||""}),e["End Year"]&&(s.end_date={year:Pt(e["End Year"])||"",month:Pt(e["End Month"])||"",day:Pt(e["End Day"])||""}),e.Time)if(s.start_date)V(s.start_date,Oe(e.Time));else throw new J("invalid_start_time_without_date");if(e["End Time"])if(s.end_date)V(s.end_date,Oe(e["End Time"]));else throw new J("invalid_end_time_without_date");if(s.start_date&&!Pe(s.start_date))throw new J("invalid_date_err");if(s.end_date&&!Pe(s.end_date))throw new J("invalid_date_err")}return s}async function cs(i){let t=[];await ns({url:i}).then(s=>{t=s}).catch(s=>{throw s.proxy_err_code=="response_not_csv"?new J("Timeline could not read the data for your timeline. Make sure you have published it to the web."):new J(s.message)});let e={events:[],errors:[],warnings:[],eras:[]};return t.forEach((s,a)=>{try{if(!zi(s)){let o=ds(s);_s(o,e)}}catch(o){if(o.constructor==J)e.errors.push(o);else{o.message&&(o=o.message);let l=s.Headline||a;e.errors.push(o+`[${l}]`)}}}),e}async function us(i,t){var e=await cs(i);if(e)return e}async function fs(i,t){let e=null,s={};if(typeof t=="function"?e=t:typeof t=="object"&&(s=t,e=t.callback,typeof s.callback=="function"&&(e=s.callback)),!e)throw new J("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var a,o;{try{o=await us(i,s)}catch(u){a=new ee,u.name=="NetworkError"?a.logError(new J("network_err")):u.name=="TLError"?a.logError(u):a.logError(new J("unknown_read_err",u.name)),e(a);return}if(a=new ee(o),o.errors)for(var l=0;l<o.errors.length;l++)a.logError(o.errors[l]);e(a)}}function _s(i,t){var e="event";typeof i.type!="undefined"&&(e=i.type,delete i.type),e=="title"?t.title?(t.warnings.push("Multiple title slides detected."),t.events.push(i)):t.title=i:e=="era"?t.eras.push(i):t.events.push(i)}class ms{constructor(t){if(t)this.scale=t.scale,this.minor=t.minor,this.major=t.major;else throw new J("axis_helper_no_options_err")}getPixelsPerTick(t){return t*this.minor.factor}getMajorTicks(t){return this._getTicks(t,this.major)}getMinorTicks(t){return this._getTicks(t,this.minor)}_getTicks(t,e){for(var s=t._scaled_padding*e.factor,a=t._earliest-s,o=t._latest+s,l=[],u=a;u<o;u+=e.factor)l.push(t.getDateFromTime(u).floor(e.name));return{name:e.name,ticks:l}}}var ye={},ti=function(i,t){ye[i]=[];for(var e=0;e<t.length-1;e++){var s=t[e],a=t[e+1];ye[i].push(new ms({scale:s[3],minor:{name:s[0],factor:s[1]},major:{name:a[0],factor:a[1]}}))}};ti("human",yt);ti("cosmological",Kt);function ps(i,t){typeof t!="number"&&(t=100);var e=i.getScale(),s=ye[e];if(!s)throw new J("axis_helper_scale_err",e);for(var a=null,o=0;o<s.length;o++){var l=s[o],u=l.getPixelsPerTick(i._pixels_per_milli);if(u>t){if(a==null)return l;var v=Math.abs(t-u),b=Math.abs(t-u);return v<b?l:a}a=l}return s[s.length-1]}const gs={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class je{constructor(t,e){var s=t.events;this._scale=t.scale,e=V({display_width:500,screen_multiplier:3,max_rows:null},e),this._display_width=e.display_width,this._screen_multiplier=e.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=t.getEarliestDate().getTime(),this._latest=t.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(t)),this._average=this._span_in_millis/s.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=ps(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(s,e.max_rows)}_computeDefaultSpan(t){if(t.scale=="human"){for(var e={},s=0;s<t.events.length;s++){var a=t.events[s].start_date.findBestFormat();e[a]=e[a]?e[a]+1:1}for(var s=yt.length-1;s>=0;s--)if(e.hasOwnProperty(yt[s][0])){var o=yt[yt.length-1];return yt[s+1]&&(o=yt[s+1]),o[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(t){return(t-this._earliest)*this._pixels_per_milli}getPositionInfo(t){return this._positions[t]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(t){if(this._scale=="human")return new re(t);if(this._scale=="cosmological")return new oe(new Zt(t));throw new J("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(t){for(var e=[],s=!1,a=0;a<t.length;a++)t[a].group&&(e.indexOf(t[a].group)<0?e.push(t[a].group):s=!0);return e.length&&s&&e.push(""),e}_computeRowInfo(t,e){for(var s=[],a=0,o=0;o<t.length;o++){var l=t[o],u=[];delete l.row;for(var v=0;v<s.length;v++)if(u.push(s[v].end-l.start),u[v]<=0){l.row=v,s[v]=l;break}if(typeof l.row=="undefined")if(e===null)l.row=s.length,s.push(l);else if(e>0)l.row=s.length,s.push(l),e--;else{var b=Math.min.apply(null,u),D=u.indexOf(b);l.row=D,l.end>s[D].end&&(s[D]=l),a++}}return{n_rows:s.length,n_overlaps:a}}_computePositionInfo(t,e,s){s=s||100;for(var a=[],o=!1,l=0;l<t.length;l++){var u={start:this.getPosition(t[l].start_date.getTime())};if(this._positions.push(u),typeof t[l].end_date!="undefined"){var v=this.getPosition(t[l].end_date.getTime());u.width=v-u.start,u.width>s?u.end=u.start+u.width:u.end=u.start+s}else u.width=s,u.end=u.start+s;t[l].group?a.indexOf(t[l].group)<0&&a.push(t[l].group):o=!0}if(a.length){o&&a.push("");for(var D=[],l=0;l<a.length;l++)D[l]={label:a[l],idx:l,positions:[],n_rows:1,n_overlaps:0};for(var l=0;l<this._positions.length;l++){var u=this._positions[l];u.group=a.indexOf(t[l].group||""),u.row=0;for(var L=D[u.group],H=L.positions.length-1;H>=0;H--)L.positions[H].end>u.start&&L.n_overlaps++;L.positions.push(u)}for(var B=a.length;;){var X=Math.max(0,e-B);if(!X||(D.sort(function(G,Z){return G.n_overlaps>Z.n_overlaps?-1:G.n_overlaps<Z.n_overlaps?1:G.idx-Z.idx}),!D[0].n_overlaps))break;for(var B=0,l=0;l<D.length;l++){var L=D[l];if(L.n_overlaps&&X){var Y=this._computeRowInfo(L.positions,L.n_rows+1);L.n_rows=Y.n_rows,L.n_overlaps=Y.n_overlaps,X--}B+=L.n_rows}}this._number_of_rows=B,this._group_labels=[],D.sort(function($,G){return $.idx-G.idx});for(var l=0,R=0;l<D.length;l++){this._group_labels.push({label:D[l].label,rows:D[l].n_rows});for(var H=0;H<D[l].positions.length;H++){var u=D[l].positions[H];u.row+=R}R+=D[l].n_rows}}else{var b=this._computeRowInfo(this._positions,e);this._number_of_rows=b.n_rows}}getAxisTickDateFormat(t){return this._scale=="cosmological"?"compact":gs[t]}}class ei{constructor(t){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=T("div","tl-timegroup"),V(this.data,t),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(t,e){}setRowPosition(t,e){this.options.height=e*this.data.rows,this.setPosition({top:t}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(t,e){var s="tl-timegroup";t&&(s+=" tl-timegroup-alternate"),e&&(s+=" tl-timegroup-hidden"),this._el.container.className=s}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=T("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){q.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(t,e,s){}}lt(ei,ht,Et);class ii{constructor(t,e,s,a){this.start_date=t,this.end_date=e,this.headline=s,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:ne,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,V(this.options,a),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(t){var e=12,s=1;this._el.content_container.style.height=t+"px",this._el.content.className="tl-timeera-content",ae?(s=Math.floor(t/(e+2)),s<1&&(s=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=s):(s=t/e,s>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=s*e+"px")}setWidth(t){this.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,e){this.setPosition({top:t}),e<56&&Qt(this._el.content_container,"tl-timeera-content-container-small")}setColor(t){this._el.container.className="tl-timeera tl-timeera-color"+t}_initLayout(){this._el.container=T("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=T("div","tl-timeera-content-container",this._el.container),this._el.background=T("div","tl-timeera-background",this._el.content_container),this._el.content=T("div","tl-timeera-content",this._el.content_container),this._el.text=T("div","tl-timeera-text",this._el.content),this._text=T("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=zt(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(t,e,s){t&&(this.options.width=t),e&&(this.options.height=e)}}lt(ii,ht,Et);class si{constructor(t,e,s){s&&this.setLanguage(s),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:ne,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof t=="object"?this._el.container=t:this._el.container=Yt(t),V(this.options,e),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(t,e){var s=t.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(s.major.ticks,this._el.major,t.getAxisTickDateFormat(s.major.name)),this.minor_ticks=this._createTickElements(s.minor.ticks,this._el.minor,t.getAxisTickDateFormat(s.minor.name),s.major.ticks),this.positionTicks(t,e,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(t,e,s,a){e.innerHTML="";var o={},l=new Date(-1,13,-30);if(o[l.getTime()]=!0,a)for(var u=0;u<a.length;u++)o[a[u].getTime()]=!0;for(var v=[],u=0;u<t.length;u++){var b=t[u];if(!(b.getTime()in o)){var D=T("div","tl-timeaxis-tick",e),L=T("span","tl-timeaxis-tick-text tl-animate-opacity",D);let B=b.getDisplayDate(this.getLanguage(),s);L.innerHTML=B,v.push({tick:D,tick_text:L,display_date:B,date:b})}}return v}positionTicks(t,e,s){s?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,t,e),this._positionTickArray(this.minor_ticks,t,e)}_positionTickArray(t,e,s){if(t[1]&&t[0]){var a=e.getPosition(t[1].date.getMillisecond())-e.getPosition(t[0].date.getMillisecond()),o=1;a<s&&(o=Math.round(s/e.getPixelsPerTick()));for(var l=1,u=0;u<t.length;u++){var v=t[u];v.tick.style.left=e.getPosition(v.date.getMillisecond())+"px",v.tick_text.innerHTML=v.display_date,o>1?l>=o?(l=1,v.tick_text.style.opacity=1,v.tick.className="tl-timeaxis-tick"):(l++,v.tick_text.style.opacity=0,v.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(v.tick_text.style.opacity=1,v.tick.className="tl-timeaxis-tick")}}}_initLayout(){this._el.content_container=T("div","tl-timeaxis-content-container",this._el.container),this._el.major=T("div","tl-timeaxis-major",this._el.content_container),this._el.minor=T("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(t,e,s){t&&(this.options.width=t),e&&(this.options.height=e)}}lt(si,ht,Et,Bt);class ai{constructor(t,e,s){this._el={container:{},content_container:{},content:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},Fi(this,t),V(this.options,e),this._el.container=T("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),s&&s.appendChild(this._el.container)}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(t){this._el.date.innerHTML=t}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=T("div","tl-text-content-container",this._el.container),this._el.date=T("h3","tl-headline-date",this._el.content_container),this.data.headline!=""){var t="tl-headline";this.options.title&&(t="tl-headline tl-headline-title"),this._el.headline=T("h2",t,this._el.content_container),this._el.headline.innerHTML=this.data.headline}if(this.data.text!=""){var e="";e+=Bi(this.options.autolink==!0?_e(this.data.text):this.data.text),this._el.content=T("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=e}this.onLoaded()}}lt(ai,ht);class tt{constructor(t,e,s){s&&this.setLanguage(s),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},V(this.options,e),V(this.data,t),this.options.background||(this._el.container=T("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){t.loadingMessage(),t._loadMedia(),t._updateDisplay()},1200)}catch(e){trace("Error loading media for ",this._media),trace(e)}}_updateMessage(t){this.message&&this.message.updateMessage(t)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(t){t?t=this._("error")+": "+t:t=this._("error"),this._updateMessage(t)}updateMediaDisplay(t){this._state.loaded&&!this.options.background&&(At?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",qt&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(t),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(t){qt&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(t,e){return""}show(){}hide(){}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}getImageURL(t,e){return this._getImageURL(t,e)}updateDisplay(t,e,s){this._updateDisplay(t,e,s)}stopMedia(){this._stopMedia()}loadErrorDisplay(t){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=T("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+t+"</p>",this.onLoaded(!0)}onLoaded(t){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),t||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(t){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(t,e){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=T("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?_e(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=T("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?_e(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=T("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=T("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new le(this._el.container,this.options,this.getLanguage()),this._el.content_container=T("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=T("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=T("div","tl-media-content",this._el.link)):this._el.content=T("div","tl-media-content",this._el.content_container)}_updateDisplay(t,e,s){t&&(this.options.width=t),e&&(this.options.height=e),s&&(this.options.layout=s),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...t){return T(...t)}_stopMedia(){}}lt(tt,ht,Bt);class qe extends tt{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=this,e="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(e="tl-media-item tl-media-image"),this.data.link?(this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.link,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img",e,this._el.content_link)):this._el.content_item=this.domCreate("img",e,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ht(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ht(this.data.caption)),this._el.content_item.addEventListener("load",function(s){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(t,e){return Je(this.data.url)}_updateMediaDisplay(t){qt&&(this._el.content_item.style.width="auto")}}class vs{constructor(t){this.doc=t,this.pending={},this.queue={css:[],js:[]},this.styleSheets=t.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(t,e){var s=this.doc.createElement(t),a;for(a in e)e.hasOwnProperty(a)&&s.setAttribute(a,e[a]);return s}finish(t){var e=this.pending[t],s,a;e&&(s=e.callback,a=e.urls,a.shift(),this.pollCount=0,a.length||(s&&s.call(e.context,e.obj),this.pending[t]=null,this.queue[t].length&&this.load(t)))}getEnv(){var t=navigator.userAgent,e={async:this.doc.createElement("script").async===!0};return(e.webkit=/AppleWebKit\//.test(t))||(e.ie=/MSIE/.test(t))||(e.opera=/Opera/.test(t))||(e.gecko=/Gecko\//.test(t))||(e.unknown=!0),e}load(t,e,s,a,o){var l=function(){this.finish(t)}.bind(this),u=t==="css",v=[],b,D,L,H,B,X;if(e)if(e=typeof e=="string"?[e]:e.concat(),u||this.env.async||this.env.gecko||this.env.opera)this.queue[t].push({urls:e,callback:s,obj:a,context:o});else for(b=0,D=e.length;b<D;++b)this.queue[t].push({urls:[e[b]],callback:b===D-1?s:null,obj:a,context:o});if(!(this.pending[t]||!(H=this.pending[t]=this.queue[t].shift()))){for(B=H.urls,b=0,D=B.length;b<D;++b)X=B[b],u?L=this.env.gecko?this.createNode("style"):this.createNode("link",{href:X,rel:"stylesheet"}):(L=this.createNode("script",{src:X}),L.async=!1),L.className="lazyload",L.setAttribute("charset","utf-8"),this.env.ie&&!u?L.onreadystatechange=function(){/loaded|complete/.test(L.readyState)&&(L.onreadystatechange=null,l())}:u&&(this.env.gecko||this.env.webkit)?this.env.webkit?(H.urls[b]=L.href,this.pollWebKit()):(L.innerHTML='@import "'+X+'";',this.pollGecko(L)):L.onload=L.onerror=l,v.push(L);for(b=0,D=v.length;b<D;++b)this.head.appendChild(v[b])}}pollGecko(t){var e;try{e=!!t.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var s=this;setTimeout(function(){s.pollGecko(t)},50)}else e&&this.finish("css");return}this.finish("css")}pollWebKit(){var t=this.pending.css,e;if(t){for(e=this.styleSheets.length;--e>=0;)if(this.styleSheets[e].href===t.urls[0]){this.finish("css");break}this.pollCount+=1,t&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(t,e,s,a){this.load("css",t,e,s,a)}js(t,e,s,a){this.load("js",t,e,s,a)}}function Ut(i,t,e,s){ni.js(i,t,e,s)}function ce(i,t,e,s){ni.css(i,t,e,s)}let ni=new vs(document);class ys extends tt{_loadMedia(){var t=this,e;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=It(7),e=Ui(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=e.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:F("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=de(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=de(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=de(this.data.url.split("end=")[1])),this.media_id.hd=Boolean(typeof e.hd!="undefined"),Ut("https://www.youtube.com/iframe_api",function(){t.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=Ot.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(t){F(t)}}createMedia(){var t=this;clearTimeout(this.timer),typeof YT!="undefined"&&typeof YT.Player!="undefined"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout(function(){t.createMedia()},1e3)}onPlayerReady(t){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(t){t.data==YT.PlayerState.ENDED&&(t.target.seekTo(0),t.target.pauseVideo())}}class ws extends tt{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var t=Ot.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=t.h+"px"}}makeGoogleMapsEmbedURL(t,e){var s=!1;function a(L){function H(Y,R){if(Y.slice(-1)=="z")R.zoom=Y;else if(Y.slice(-1)=="m")R.zoom=14,R.maptype="satellite";else if(Y.slice(-1)=="t"){if(s=!0,X=="place")var $=L.match(D.place)[3]+","+L.match(D.place)[4];else{var $=R.center;delete R.center}R={},R.location=$,streetview_params=Y.split(",");for(let Z in o.streetview){var G=parseInt(Z)+1;o.streetview[Z]=="pitch"&&streetview_params[G]=="90t"?R[o.streetview[Z]]=0:R[o.streetview[Z]]=streetview_params[G].slice(0,-1)}}return R}function B(Y,R){var $={},G=R[1],Z=R[R.length-1];for(let st in o[Y]){var U=parseInt(st)+2;o[Y][st]=="center"?$[o[Y][st]]=R[U]+","+R[++U]:$[o[Y][st]]=R[U]}return $=H(Z,$),$.key=e,s==!0&&(Y="streetview"),G+"/embed/v1/"+Y+Wi($)}let X="view";return L.match(D.place)?X="place":L.match(D.directions)?X="directions":L.match(D.search)&&(X="search"),B(X,L.match(D[X]))}var o={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},l=/(https:\/\/.+google.+?\/maps)/,u=/@([-\d.]+),([-\d.]+)/,v=/([\w\W]+)/,b=/,((?:[-\d.]+[zmayht],?)*)/,D={view:new RegExp(l.source+"/"+u.source+b.source),place:new RegExp(l.source+"/place/"+v.source+"/"+u.source+b.source),directions:new RegExp(l.source+"/dir/"+v.source+"/"+v.source+"/"+u.source+b.source),search:new RegExp(l.source+"/search/"+v.source+"/"+u.source+b.source)};return a(t)}}class bs extends tt{constructor(t,e,s){super(t,e,s);this.blockquote=se.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class xs extends tt{_loadMedia(){var t,e,s=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),e=this.data.url.split("//")[1].split(".wikipedia")[0],t="https://"+e+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",$t({type:"GET",url:t,dataType:"json",success:function(a){s.createMedia(a)},error:function(a,o){var l="";l+=s._("wikipedia_load_err")+"<br/>"+s.media_id+"<br/>"+o,s.loadErrorDisplay(l)}})}createMedia(t){var e="";if(t.query){var s="",e={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};e.entry=Gi(t.query.pages,0),e.extract=e.entry.extract,e.title=e.entry.title,e.page_image=e.entry.thumbnail,e.extract.match("<p>")?e.text_array=e.extract.split("<p>"):e.text_array.push(e.extract);for(var a=0;a<e.text_array.length;a++)a+1<=e.paragraphs&&a+1<e.text_array.length&&(e.text+="<p>"+e.text_array[a+1]);s+="<span class='tl-icon-wikipedia'></span>",s+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+e.title+"</a></h4>",s+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",e.page_image,s+=e.text,e.extract.match("REDIRECT")||(this._el.content_item.innerHTML=s,this.onLoaded())}}updateMediaDisplay(){}}class ks extends tt{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,t="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",me(t,function(s){Ut("https://w.soundcloud.com/player/api.js",function(){e.createMedia(s)})})}createMedia(t){this._el.content_item.innerHTML=t.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class Ts extends tt{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var s=null;this.data.url.match(/#t=([^&]+).*/)&&(s=this.data.url.match(/#t=([^&]+).*/)[1]),t="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",s&&(t=t+="&amp;#t="+s),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(a){e.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Ot.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){F(t)}}}class Ms extends tt{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],t="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=Ot.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class Es extends tt{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var t=Ot.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class Ls extends tt{_loadMedia(){var t,e=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?twitter.com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var s=this.data.url.match(/(status|statuses)\/(\d+)/);if(s&&s.length>2)this.media_id=s[2];else{e.loadErrorDisplay(e._("twitterembed_invalidurl_err"));return}}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",$t({type:"GET",url:t,dataType:"json",success:function(a){e.createMedia(a)},error:function(a,o){var l="";l+=e._("twitter_load_err")+"<br/>"+e.media_id+"<br/>"+o,e.loadErrorDisplay(l)}})}createMedia(t){var e="",s="",a="",o="",l="",u="",v=this;s=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",a=t.author_url.split("twitter.com/")[1],o=t.html.split("</p>&mdash;")[1].split('<a href="')[1],l=o.split('">')[0],u=o.split('">')[1].split("</a>")[0],s=s.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),s.includes("pic.twitter.com")?(Ut("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(v.media_id,v._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(e+=s,e+="<div class='vcard'>",e+="<a href='"+l+"' class='twitter-date' rel='noopener' target='_blank'>"+u+"</a>",e+="<img src='' class='tl-media-item tl-media-image'></a>",e+="<div class='author'>",e+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",e+="<span class='avatar'></span>",e+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",e+="<span class='nickname'>@"+a+"<span class='thumbnail-inline'></span></span>",e+="</a>",e+="</div>",e+="</div>",this._el.content_item.innerHTML=e,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class Ds extends tt{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var s=this.data.url.match(/(status|statuses)\/(\d+)/);if(s&&s.length>2)this.media_id=s[2];else{e.loadErrorDisplay(e._("twitterembed_invalidurl_err"));return}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(a,o,l){var u,v=a.getElementsByTagName(o)[0],b=window.twttr||{};return a.getElementById(l)||(u=a.createElement(o),u.id=l,u.src="https://platform.twitter.com/widgets.js",v.parentNode.insertBefore(u,v),b._e=[],b.ready=function(D){b._e.push(D)}),b}(document,"script","twitter-wjs"),$t({type:"GET",url:t,dataType:"json",success(a){e.createMedia(a)},error:function(a,o){var l="";l+=e._("twitter_load_err")+"<br/>"+e.media_id+"<br/>"+o,e.loadErrorDisplay(l)}})}createMedia(t){var e="",s="",a="",o="",l="",u="";s=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",a=t.author_url.split("twitter.com/")[1],o=t.html.split("</p>&mdash;")[1].split('<a href="')[1],l=o.split('">')[0],u=o.split('">')[1].split("</a>")[0],s=s.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let v=this.media_id;s.includes("pic.twitter.com")?(twttr.ready(function(b){e=document.getElementsByClassName("tl-media-twitter")[0];var D=String(v);twttr.widgets.createTweet(D,e,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(L){this.onLoaded()})}),this._el.content_item.innerHTML=e,this.onLoaded()):(e+=s,e+="<div class='vcard'>",e+="<a href='"+l+"' class='twitter-date' rel='noopener' target='_blank'>"+u+"</a>",e+="<div class='author'>",e+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",e+="<span class='avatar'></span>",e+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",e+="<span class='nickname'>@"+a+"<span class='thumbnail-inline'></span></span>",e+="</a>",e+="</div>",e+="</div>",this._el.content_item.innerHTML=e,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class He extends tt{_loadMedia(){var t,e=this;try{this.establishMediaID(),t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",me(t,function(s){s.stat=="ok"?(e.sizes=s.sizes.size,e.options.background||e.createMedia(),e.onLoaded()):e.loadErrorDisplay(e._("flickr_notfound_err"))})}catch(s){e.loadErrorDisplay(e._(s.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var t=this.data.url.split("/").slice(-1)[0];this.media_id=Zi.decode(t)}else{var e="flickr.com/photos/",s=this.data.url.indexOf(e);if(s==-1)throw new J("flickr_invalidurl_err");var a=s+e.length;this.media_id=this.data.url.substr(a).split("/")[1]}}createMedia(){var t=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ht(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ht(this.data.caption)),this._el.content_item.addEventListener("load",function(e){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(t,e){for(var s=this.size_label(e),a=this.sizes[this.sizes.length-2].source,o=0;o<this.sizes.length;o++)this.sizes[o].label==s&&(a=this.sizes[o].source);return a}_getMeta(){var t=this,e;e="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",me(e,function(s){t.data.credit_alternate="<a href='"+t.data.url+"' target='_blank' rel='noopener'>"+s.photo.owner.realname+"</a>",t.data.caption_alternate=s.photo.title._content+" "+s.photo.description._content,t.updateMeta()})}size_label(t){var e="";return t<=75?t<=0?e="Large":e="Thumbnail":t<=180?e="Small":t<=240?e="Small 320":t<=375?e="Medium":t<=480?e="Medium 640":(t<=600,e="Large"),e}}class Ss extends tt{_loadMedia(){var t=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=It(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||F("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),Ut(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){t.createMedia()})}_transformURL(t){return t.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const Cs="830b21071290df4f81a35c56abbea096",Ns="704270473831239",Is=`${Ns}|${Cs}`,Fe=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${Is}&fields=html,thumbnail_url,author_name&url=`;function As(i){this.oembed_response=i,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ht(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ht(this.data.caption)),this._el.content_item.addEventListener("load",function(t){this.onMediaLoaded()}.bind(this)),this._el.content_item.src=i.thumbnail_url,this.onLoaded()}function Os(i){let t=`${i.statusText} [${i.status}]`;i.status==400&&(t=this._("instagram_bad_request")),this.loadErrorDisplay(t)}class Ps extends tt{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let t=`${Fe}${this.data.url}`;try{$t({url:t,dataType:"json",success:As,error:Os,context:this})}catch(e){console.log(`Instagram: error fetching ${t}`),console.log(e);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;xe(`${Fe}${this.data.url}`).then(t=>t.thumbnail_url).catch(t=>{F(`Instagram getImageURL Error: ${t.status} ${t.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(t){var e="";return t<=150?e="t":t<=306?e="m":e="l",e}}class Rs extends tt{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(t){qt&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class zs extends tt{_loadMedia(){var t;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var e=this.data.url.match(/open\?id=([^&]+)/)[1];t="https://drive.google.com/file/d/"+e+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var e=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];t="https://drive.google.com/file/d/"+e+"/preview"}else t=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function js(i){return i.match(/^spotify:/)?i:(i=new URL(i),`spotify${i.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class qs extends tt{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=js(this.data.url),this.media_id?(t="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(t){var e=this.options.height,s=0,a=0;At?e=this.options.height/2:e=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",F(e),F(this.options.width),e>this.options.width?(F("height is greater"),s=this.options.width+80+"px",a=this.options.width+"px"):(F("width is greater"),F(this.options.width),s=e+"px",a=e-80+"px"),this.player.style.width=a,this.player.style.height=s,this._el.credit&&(this._el.credit.style.width=a),this._el.caption&&(this._el.caption.style.width=a)}_stopMedia(){}}class Hs extends tt{constructor(t,e,s){super(t,e,s);this.iframe=se.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Fs extends tt{_loadMedia(){try{var t=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var e=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=e[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);Ut(["https://s.imgur.com/min/embed.js"],function(){t.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var t=this,e="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),$t({type:"GET",url:e,dataType:"json",success:function(s){try{t._el.content_item.innerHTML=s.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{F("Error processing imgur ajax response")}},error:function(s,a,o){a=="parsererror"?t.loadErrorDisplay(t._("imgur_invalidurl_err")):t.loadErrorDisplay(t._("unknown_read_err",a))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=Ot.r16_9({w:this.options.width})+"px"}}class Bs extends tt{_loadMedia(){var t=Je(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var e="";Vt||Ni||t.match(/dl.dropboxusercontent.com/)?e="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+t+"&amp;embedded=true'></iframe>":e="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this._el.content_item.innerHTML=e,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Us extends tt{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=this,e="tl-media-item tl-media-audio tl-media-shadow";this.data.link?(this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.link,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("audio",e,this._el.content_link)):this._el.content_item=this.domCreate("audio",e,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){t.onMediaLoaded()}),this._el.source_item.src=this.data.url,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){qt&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,e){var s=t.match(e),a="audio/";switch(s[1]){case"mp3":a+="mpeg";break;case"wav":a+="wav";break;case"m4a":a+="mp4";break;default:a="audio";break}return a}}class Ws extends tt{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=this,e="tl-media-item tl-media-video tl-media-shadow";this.data.link?(this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.link,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("video",e,this._el.content_link)):this._el.content_item=this.domCreate("video",e,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){t.onMediaLoaded()}),this._el.source_item.src=this.data.url,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){qt&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,e){var s=t.match(e),a="video/";switch(s[1]){case"mp4":a+="mp4";break;case"webm":a+="webm";break;default:a="video";break}return a}}class Gs extends tt{_loadMedia(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],F(`Wistia: media_id: ${this.media_id}`),t="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){e.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Ot.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){F(t)}}}function ie(i,t){var e={},s=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.)?youtube|youtu.be",cls:ys},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:Ts},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?dailymotion.com",cls:Ms},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:Es},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:ks},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?twitter.com",cls:Ls},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:Ds},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:ws},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:He},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:He},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:Ps},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:Rs},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:Ss},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:qe},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:Fs},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=sharing|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:zs},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:Bs},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/*(www.)?wikipedia.org|^(https?:)?/*([a-z][a-z].)?wikipedia.org",cls:xs},{type:"spotify",name:"spotify",match_str:"spotify",cls:qs},{type:"iframe",name:"iFrame",match_str:"iframe",cls:Hs},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:bs},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:Ws},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:Gs},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:Us},{type:"imageblank",name:"Imageblank",match_str:"",cls:qe}];if(t){if(i instanceof Array)return!1;for(var a=0;a<s.length;a++)switch(s[a].type){case"flickr":case"image":case"instagram":if(i.url.match(s[a].match_str))return e=s[a],e;break}}else for(var a=0;a<s.length;a++)if(i.url.match(s[a].match_str))return s[a];return!1}class ri{constructor(t,e){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:ne,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,V(this.options,e),V(this.data,t),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){this.active=t,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker"}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e){this._updateDisplay(t,e)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(t){var e=12,s=1;this._el.content_container.style.height=t+"px",this._el.timespan_content.style.height=t+"px",t<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",t<=56?bt(this._el.content_container,"tl-timemarker-content-container-small"):Qt(this._el.content_container,"tl-timemarker-content-container-small"),ae?(s=Math.floor(t/(e+2)),s<1&&(s=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=s):(s=t/e,s>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=s*e+"px")}setWidth(t){this.data.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,e){this.setPosition({top:t}),this._el.timespan.style.height=e+"px"}_onMarkerClick(t){this.fire("markerclick",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=T("div","tl-timemarker"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=T("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=T("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=T("div","tl-timemarker-content-container",this._el.container),this._el.content=T("div","tl-timemarker-content",this._el.content_container),this._el.line_left=T("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=T("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=T("div","tl-timemarker-media-container",this._el.content);var t={url:this.data.media.thumbnail},e=this.data.media.thumbnail?ie(t,!0):null;if(e){var s=new e.cls(t);s.on("loaded",function(){this._el.media=T("img","tl-timemarker-media",this._el.media_container),this._el.media.src=s.getImageURL()}.bind(this)),s.loadMedia()}else{var a=ie(this.data.media).type;this._el.media=T("span","tl-icon-"+a,this._el.media_container)}}this._el.text=T("div","tl-timemarker-text",this._el.content),this._text=T("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=zt(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=zt(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=zt(this.data.media.caption)),this.onLoaded()}_initEvents(){q.addListener(this._el.container,"click",this._onMarkerClick,this)}_updateDisplay(t,e,s){t&&(this.options.width=t),e&&(this.options.height=e)}}lt(ri,ht,Et);class Te{constructor(t,e,s){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},e&&(this._el.move=e),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ft},this.animator=null,this.dragevent=this.mousedrag,wt&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},V(this.options,s)}enable(t){q.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),q.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){q.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),q.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){this.animator&&this.animator.stop(),wt?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),q.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),q.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,q.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),q.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){var e={x:0,y:0};this.data.sliding=!0,wt?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),e.x=this.data.pagex.start-this.data.pagex.end,e.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(e.x-this.data.pos.start.x),this.data.new_pos.y=-(e.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(e.x)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(e.y)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},s={x:!1,y:!1},a=!1;this.data.direction=null,t.time=(new Date().getTime()-this.data.time.start)*10,e.time=(new Date().getTime()-this.data.time.start)*10,e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+t.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+t.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<2e3&&(a=!0),this.options.enable.x&&this.options.enable.y?Math.abs(e.x)>Math.abs(e.y)?s.x=!0:s.y=!0:this.options.enable.x?Math.abs(e.x)>Math.abs(e.y)&&(s.x=!0):Math.abs(e.y)>Math.abs(e.x)&&(s.y=!0),s.x&&(Math.abs(e.x)>this._el.drag.offsetWidth/2&&(a=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right"))),s.y&&(Math.abs(e.y)>this._el.drag.offsetHeight/2&&(a=!0),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down"))),e.time<1e3||this._animateMomentum(),a&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Mt(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Gt}))}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:Gt};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&t.x>=this.options.constraint.left&&(t.x=this.options.constraint.left),this.options.constraint.right&&t.x<this.options.constraint.right&&(t.x=this.options.constraint.right),e.left=Math.floor(t.x)+"px"),this.animator=Mt(this._el.move,e),this.fire("momentum",this.data)}}lt(Te,ht);class oi{constructor(t,e,s,a){this.language=a,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{},attribution:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=Yt(t),this.config=e,this.options={width:600,height:600,duration:1e3,ease:Ft,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,V(this.options,s)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(t){for(var e=0;e<this._markers.length;e++){var s=this.timescale.getPositionInfo(e);t?this._markers[e].setClass("tl-timemarker tl-timemarker-fast"):this._markers[e].setClass("tl-timemarker"),this._markers[e].setPosition({left:s.start}),this._markers[e].setWidth(s.width)}}updateDisplay(t,e,s){let a=!1;t&&(this.options.width==0&&t>0&&(a=!0),this.options.width=t),e&&e!=this.options.height&&(this.options.height=e,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),a&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var t=0;try{t=parseInt(this.options.marker_height_min)}catch{F("Invalid value for marker_height_min option."),t=30}return t==0&&(F("marker_height_min option must not be zero."),t=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/t),this.max_rows<1&&(this.max_rows=1),new je(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(t){this.options.scale_factor=t,this._updateDrawTimeline()}zoomIn(){var t=ji(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}zoomOut(){var t=qi(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}setZoom(t){var e=this.options.zoom_sequence[t];typeof e=="number"?this.setZoomFactor(e):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(t){t<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),t>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),t==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),t=.1),this.options.scale_factor=t,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var t=this.timescale.getGroupLabels();if(t){this.options.has_groups=!0;for(var e=0;e<t.length;e++)this._createGroup(t[e])}}_createGroup(t){var e=new ei(t);this._addGroup(e),this._groups.push(e)}_addGroup(t){t.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var t=this.options.height-this._el.timeaxis_background.offsetHeight,e=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var s=0,a=0;s<this._groups.length;s++){var o=Math.floor(a*(e+this.options.marker_padding)),l=!1;o>t-this.options.marker_padding&&(l=!0),this._groups[s].setRowPosition(o,this._calculated_row_height+this.options.marker_padding/2),this._groups[s].setAlternateRowColor(Hi(s),l),a+=this._groups[s].data.rows}}}_addMarker(t){t.addTo(this._el.marker_item_container),t.on("markerclick",this._onMarkerClick,this),t.on("added",this._onMarkerAdded,this)}_createMarker(t,e){var s=new ri(t,this.options);this._addMarker(s),e<0?this._markers.push(s):this._markers.splice(e,0,s)}_createMarkers(t){for(var e=0;e<t.length;e++)this._createMarker(t[e],-1)}_removeMarker(t){t.removeFrom(this._el.marker_item_container)}_destroyMarker(t){this._removeMarker(this._markers[t]),this._markers.splice(t,1)}_calculateMarkerHeight(t){return t/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(t){return t/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var t=this._calculateAvailableHeight(),e=this._calculateMarkerHeight(t);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(t);for(var s=0;s<this._markers.length;s++){this._markers[s].setHeight(e);var a=this.timescale.getPositionInfo(s).row,o=Math.floor(a*(e+this.options.marker_padding))+this.options.marker_padding,l=t-o+this.options.marker_padding;this._markers[s].setRowPosition(o,l)}}_resetMarkersActive(){for(var t=0;t<this._markers.length;t++)this._markers[t].setActive(!1)}_findMarkerIndex(t){var e=-1;return(typeof t=="string"||t instanceof String)&&(e=$e(t,this._markers,"unique_id",e)),e}_createEras(t){for(var e=0;e<t.length;e++){var s=t[e],a=new ii(s.start_date,s.end_date,s.headline,this.options);this._eras.push(a),a.addTo(this._el.marker_item_container),a.on("added",this._onEraAdded,this)}}_positionEras(t){for(var e=0,s=0;s<this._eras.length;s++){var a={start:0,end:0,width:0};a.start=this.timescale.getPosition(this._eras[s].start_date.getTime()),a.end=this.timescale.getPosition(this._eras[s].end_date.getTime()),a.width=a.end-a.start,t?this._eras[s].setClass("tl-timeera tl-timeera-fast"):this._eras[s].setClass("tl-timeera"),this._eras[s].setPosition({left:a.start}),this._eras[s].setWidth(a.width),e++,e>5&&(e=0),this._eras[s].setColor(e)}}createMarker(t,e){this._createMarker(t,e)}createMarkers(t){this._createMarkers(t)}destroyMarker(t){this._destroyMarker(t)}destroyMarkerId(t){this.destroyMarker(this._findMarkerIndex(t))}goTo(t,e,s){var a=this.options.ease,o=this.options.duration,l=t<0?0:t;this._resetMarkersActive(),t>=0&&t<this._markers.length&&this._markers[t].setActive(!0),this.animator&&this.animator.stop(),e?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[l].getLeft()+this.options.width/2+"px"):s?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[l].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Mt(this._el.slider,{left:-this._markers[l].getLeft()+this.options.width/2+"px",duration:o,easing:a})),t>=0&&t<this._markers.length?this.current_id=this._markers[t].data.unique_id:this.current_id=""}goToId(t,e,s){this.goTo(this._findMarkerIndex(t),e,s)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(t){this.fire("dateAdded",this.config)}_onEraAdded(t){this.fire("eraAdded",this.config)}_onMarkerRemoved(t){this.fire("dateRemoved",this.config)}_onMarkerClick(t){this.goToId(t.unique_id),this.fire("change",{unique_id:t.unique_id})}_onMouseScroll(t){var e=0,s=0,a={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};t||(t=window.event),t.originalEvent&&(t=t.originalEvent),typeof t.wheelDeltaX!="undefined"&&(e=t.wheelDeltaY/6,Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?e=t.wheelDeltaX/6:e=0),e&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),s=parseInt(this._el.slider.style.left.replace("px",""))+e,s>a.left?s=a.left:s<a.right&&(s=a.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=s+"px"}_onDragMove(t){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_drawTimeline(t){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(t),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(t)}_updateDrawTimeline(t){var e=!1;if(t){var s=new je(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==s.getMajorScale()&&this.timescale.getMinorScale()==s.getMinorScale()&&(e=!0)}else e=!0;return e?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),e}_initLayout(){this._el.attribution=T("div","tl-attribution",this._el.container),this._el.line=T("div","tl-timenav-line",this._el.container),this._el.slider=T("div","tl-timenav-slider",this._el.container),this._el.slider_background=T("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=T("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=T("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=T("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=T("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=T("div","tl-timeaxis-background",this._el.container),this._el.attribution.innerHTML="<a href='http://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.timeaxis=new si(this._el.timeaxis,this.options,this.language),this._swipable=new Te(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),q.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),q.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}lt(oi,ht,Et);class li{constructor(t,e,s,a){a&&this.setLanguage(a),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=s,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:ne,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},V(this.options,e),V(this.data,t),this._initLayout(),this._initEvents()}show(){this.animator=Mt(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this.loadMedia()):this.stopMedia()}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,e,s){var a,o=this.options.slide_padding_lr,l=this.options.slide_padding_lr;t?this.options.width=t:this.options.width=this._el.container.offsetWidth,a=this.options.width-this.options.slide_padding_lr*2,At&&this.options.width<=this.options.skinny_size?(o=0,l=0,a=this.options.width):s=="landscape"||this.options.width<=this.options.skinny_size&&(o=50,l=50,a=this.options.width-o-l),this._el.content.style.paddingLeft=o+"px",this._el.content.style.paddingRight=l+"px",this._el.content.style.width=a+"px",e?this.options.height=e:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(a,this.options.height-this._text.headlineHeight(),s):!this.has.text&&!this.has.headline?this._media.updateDisplay(a,this.options.height,s):this.options.width<=this.options.skinny_size?this._media.updateDisplay(a,this.options.height,s):this._media.updateDisplay(a/2,this.options.height,s)),this._updateBackgroundDisplay()}loadMedia(){var t=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){t._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(dt(this.data.display_date).length>0)return this.data.display_date;var t="";return this.has.title||(this.data.end_date&&(t=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=this.data.start_date.getDisplayDate(this.getLanguage())+t)),t}_initLayout(){if(this._el.container=T("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=T("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=T("div","tl-slide-content-container",this._el.scroll_container),this._el.content=T("div","tl-slide-content",this._el.content_container),this._el.background=T("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var t=ie(this.data.background,!0);t&&(this._background_media=new t.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block")}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=ie(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new ai(this.data.text,{title:this.has.title,language:this.options.language,autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(bt(this._el.container,"tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(bt(this._el.container,"tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._media.addTo(this._el.content),this._text.addTo(this._el.content)):(this.has.text||this.has.headline)&&(bt(this._el.container,"tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}}lt(li,Bt,ht,Et);class we{constructor(t,e,s){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,V(this.options,e),V(this.data,t),this._el.container=T("div","tl-slidenav-"+this.options.direction),At&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),s&&s.appendChild(this._el.container)}update(t){var e={title:"",description:"",date:t.getFormattedDate()};t.data.text&&t.data.text.headline&&(e.title=t.data.text.headline),this._update(e)}setColor(t){t?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(t){this.data=V(this.data,t),this._el.title.innerHTML=zt(this.data.title),this._el.description.innerHTML=zt(this.data.date)}_initLayout(){this._el.content_container=T("div","tl-slidenav-content-container",this._el.container),this._el.icon=T("div","tl-slidenav-icon",this._el.content_container),this._el.title=T("div","tl-slidenav-title",this._el.content_container),this._el.description=T("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){q.addListener(this._el.container,"click",this._onMouseClick,this)}}lt(we,Et,ht);class hi{constructor(t,e,s,a){a&&this.setLanguage(a),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Ft,dragging:!0,trackResize:!0},typeof t=="object"?(this._el.container=t,this.options.id=It(6,"tl")):(this.options.id=t,this._el.container=Yt(t)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,V(this.options,s),V(this.data,e)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)}_createSlide(t,e,s){var a=new li(t,this.options,e,this.getLanguage());this._addSlide(a),s<0?this._slides.push(a):this._slides.splice(s,0,a)}_createSlides(t){for(var e=0;e<t.length;e++)t[e].unique_id==""&&(t[e].unique_id=It(6,"tl-slide")),this._createSlide(t[e],!1,-1)}_removeSlide(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideRemoved,this),t.off("background_change",this._onBackgroundChange)}_destroySlide(t){this._removeSlide(this._slides[t]),this._slides.splice(t,1)}_findSlideIndex(t){var e=t;return(typeof t=="string"||t instanceof String)&&(e=$e(t,this._slides,"unique_id")),e}updateDisplay(t,e,s,a){var o,l;typeof a=="undefined"?l=this.options.layout:l=a,this.options.layout=l,t?this.options.width=t:this.options.width=this._el.container.offsetWidth,e?this.options.height=e:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,o=this.options.height/2,this._nav.next.setPosition({top:o}),this._nav.previous.setPosition({top:o});for(var u=0;u<this._slides.length;u++)this._slides[u].updateDisplay(this.options.width,this.options.height,l),this._slides[u].setPosition({left:this.slide_spacing*u,top:0});this.goToId(this.current_id,!0,!0)}createSlide(t,e){this._createSlide(t,!1,e)}createSlides(t){this._createSlides(t)}destroySlide(t){this._destroySlide(t)}destroySlideId(t){this.destroySlide(this._findSlideIndex(t))}goTo(t,e,s){t=parseInt(t),isNaN(t)&&(t=0);var a=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var o=0;o<this._slides.length;o++)this._slides[o].setActive(!1);t<this._slides.length&&t>=0&&(this.current_id=this._slides[t].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),e?(this._el.slider_container.style.left=-(this.slide_spacing*t)+"px",this._onSlideChange(s)):this.animator=Mt(this._el.slider_container,{left:-(this.slide_spacing*t)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(s)}),this._slides[t].setActive(!0),this._slides[t+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[t+1])):this.showNav(this._nav.next,!1),this._slides[t-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[t-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){a.preloadSlides(t)},this.options.duration))}goToId(t,e,s){this.goTo(this._findSlideIndex(t),e,s)}preloadSlides(t){this._slides[t+1]&&(this._slides[t+1].loadMedia(),this._slides[t+1].scrollToTop()),this._slides[t+2]&&(this._slides[t+2].loadMedia(),this._slides[t+2].scrollToTop()),this._slides[t-1]&&(this._slides[t-1].loadMedia(),this._slides[t-1].scrollToTop()),this._slides[t-2]&&(this._slides[t-2].loadMedia(),this._slides[t-2].scrollToTop())}next(){var t=this._findSlideIndex(this.current_id);t+1<this._slides.length?this.goTo(t+1):this.goTo(t)}previous(){var t=this._findSlideIndex(this.current_id);t-1>=0?this.goTo(t-1):this.goTo(t)}showNav(t,e){this.options.width<=500&&At||(e?t.show():t.hide())}changeBackground(t){var e={r:256,g:256,b:256};t.color_value&&t.color_value!=""?(e=Ve(t.color_value),e||(F("Invalid color value "+t.color_value),e=this.options.default_bg_color)):(e=this.options.default_bg_color,t.color_value="rgb("+e.r+" , "+e.g+", "+e.b+")"),e.r+""+e.g+e.b,this._el.background.style.backgroundImage="none",t.color_value?this._el.background.style.backgroundColor=t.color_value:this._el.background.style.backgroundColor="transparent",e.r<255||e.g<255||e.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var t=this.options.layout,e=0;e<this._slides.length;e++)this._slides[e].updateDisplay(this.options.width,this.options.height,t),this._slides[e].setPosition({left:this.slide_spacing*e,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){bt(this._el.container,"tl-storyslider"),this._el.slider_container_mask=T("div","tl-slider-container-mask",this._el.container),this._el.background=T("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=T("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=T("div","tl-slider-item-container",this._el.slider_container),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._nav.previous=new we({title:"Previous",description:"description"},{direction:"previous"}),this._nav.next=new we({title:"Next",description:"description"},{direction:"next"}),this._nav.next.addTo(this._el.container),this._nav.previous.addTo(this._el.container),this._el.slider_container.style.left="0px",wt&&(this._swipable=new Te(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new le(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(t){var e=this._findSlideIndex(this.current_id),s=this._slides[e].getBackground();this.changeBackground(t),this.fire("colorchange",s)}_onMessageClick(t){this._message.hide()}_onSwipeNoDirection(t){this.goToId(this.current_id)}_onNavigation(t){t.direction=="next"||t.direction=="left"?this.next():(t.direction=="previous"||t.direction=="right")&&this.previous(),this.fire("nav_"+t.direction,this.data)}_onSlideAdded(t){F("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(t){this.fire("slideRemoved",this.data)}_onSlideChange(t){t||this.fire("change",{unique_id:this.current_id})}_onMouseClick(t){}_fireMouseEvent(t){if(!!this._loaded){var e=t.type;e=e==="mouseenter"?"mouseover":e==="mouseleave"?"mouseout":e,!!this.hasEventListeners(e)&&(e==="contextmenu"&&q.preventDefault(t),this.fire(e,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}lt(hi,Bt,ht);class di{constructor(t,e,s){this._el={parent:{},container:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=Yt(t),e&&(this._el.parent=e),this.options={width:600,height:600,duration:1e3,ease:Ft,menubar_default_y:0},this.animator={},V(this.options,s),this._initLayout(),this._initEvents()}show(t){this.options.duration}hide(t){}toogleZoomIn(t){t?Qt(this._el.button_zoomin,"tl-menubar-button-inactive"):bt(this._el.button_zoomin,"tl-menubar-button-inactive")}toogleZoomOut(t){t?Qt(this._el.button_zoomout,"tl-menubar-button-inactive"):bt(this._el.button_zoomout,"tl-menubar-button-inactive")}setSticky(t){this.options.menubar_default_y=t}setColor(t){t?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(t,e,s,a){this._updateDisplay(t,e,s,a)}_onButtonZoomIn(t){this.fire("zoom_in",t)}_onButtonZoomOut(t){this.fire("zoom_out",t)}_onButtonBackToStart(t){this.fire("back_to_start",t)}_initLayout(){this._el.button_zoomin=T("span","tl-menubar-button",this._el.container),this._el.button_zoomout=T("span","tl-menubar-button",this._el.container),this._el.button_backtostart=T("span","tl-menubar-button",this._el.container),At&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>"}_initEvents(){q.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),q.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),q.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(t,e,s){t&&(this.options.width=t),e&&(this.options.height=e)}}lt(di,Et,ht);let be=null;if(document){let i=document.getElementsByTagName("script");i&&i.length>0&&(be=i[i.length-1].src)}function Zs(i){return function(t){if(i.config){var e=t.key,s=i._getSlideIndex(self.current_id),a=i.config.events.length-1,o=i.config.title?a+1:a,l=0;e=="ArrowLeft"?s!=l&&i.goToPrev():e=="ArrowRight"&&s!=o&&i.goToNext()}}}class ci{constructor(t,e,s){if(s||(s={}),this.ready=!1,this._el={container:Yt(t),storyslider:{},timenav:{},menubar:{}},s.lang&&!s.language&&(s.language=s.lang),this.language=ke,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Ft,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new le(this._el.container,{message_class:"tl-message-full"}),typeof s.default_bg_color=="string"){var a=Ve(s.default_bg_color);a?s.default_bg_color=a:(delete s.default_bg_color,F("Invalid default background color. Ignoring."))}V(this.options,s),this.options.script_path||(this.options.script_path=this.determineScriptPath()),s.soundcite&&this.on("ready",()=>{F("Loading Soundcite resources "),ce("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),Ut("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",Zs(this)),window.addEventListener("resize",function(o){this.updateDisplay()}.bind(this)),this.options.debug&&Pi(console.log),bt(this._el.container,"tl-timeline"),this.options.is_embed&&bt(this._el.container,"tl-timeline-embed"),this.options.is_full_embed&&bt(this._el.container,"tl-timeline-full-embed"),this._loadLanguage(e)}_loadStyles(){let t=null,e=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))t=this.options.font;else if(this.options.font){let s="../css/fonts/font."+this.options.font.toLowerCase()+".css";t=new URL(s,this.options.script_path).toString()}if(t&&ce(t),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))e=this.options.theme;else if(this.options.theme){let s="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";e=new URL(s,this.options.script_path).toString()}e&&ce(e)}_loadLanguage(t){try{var e=this.options.language,s=this.options.script_path;Qi(e,s).then(a=>{a?(this.language=a,this.message.setLanguage(this.language),this.options.language=this.language,this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${e}`),this._initData(t)})}catch(a){this.showMessage(this._translateError(a))}}_initData(t){typeof t=="string"?fs(t,{callback:function(e){this.setConfig(e)}.bind(this),sheets_proxy:this.options.sheets_proxy}):ee==t.constructor?this.setConfig(t):this.setConfig(new ee(t))}_translateError(t){return t.hasOwnProperty("stack")&&F(t.stack),t.message_key?this._(t.message_key)+(t.detail?" ["+t.detail+"]":""):t}showMessage(t){this.message?this.message.updateMessage(t):(F("No message display available."),F(t))}determineScriptPath(){let t=null;if(be)t=be;else{let e=document.getElementById("timeline-script-tag");e&&(t=e.src)}if(!t){let e=document.getElementsByTagName("script");for(let s=e.length-1;s>=0;s--)if(e[s].src){t=e[s].src;break}}return t?t.substr(0,t.lastIndexOf("/")+1):""}setConfig(t){if(this.config=t,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(o){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(o))}else{for(var e=[],s=0,a=this.config.getErrors();s<a.length;s++)e.push(this._translateError(a[s]));this.showMessage("<strong>"+this._("error")+":</strong> "+e.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let t=(s,a)=>{s.reduce((o,l)=>o||l.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(t.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=T("div","tl-timenav",this._el.container),this._el.storyslider=T("div","tl-storyslider",this._el.container)):(this._el.storyslider=T("div","tl-storyslider",this._el.container),this._el.timenav=T("div","tl-timenav",this._el.container)),this._el.menubar=T("div","tl-menubar",this._el.container),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new oi(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new hi(this._el.storyslider,this.config,this.options,this.language),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new di(this._el.menubar,this._el.container,this.options),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay(this._timenav.options.height,!0,2e3)}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(t){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._timenav.goToId(this.current_id),this._onChange(t))}_onTimeNavChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._storyslider.goToId(this.current_id),this._onChange(t))}_onZoomToggle(t){t.zoom=="in"?this._menubar.toogleZoomIn(t.show):t.zoom=="out"&&this._menubar.toogleZoomOut(t.show)}_onChange(t){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onBackToStart(t){this._storyslider.goTo(0),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(t){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(t){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(t){this.fire("nav_next",t)}_onStorySliderPrevious(t){this.fire("nav_previous",t)}_updateDisplay(t,e,s){var a=this.options.duration,o=this.options.base_class,l=0;s&&(a=s),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(o+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(o+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",wt&&(this.options.layout=Ii()),At?(o+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(t,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(t),this.options.layout=="portrait"?o+=" tl-layout-portrait":o+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?l=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:l=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),e?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Mt(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:a/2,easing:Gt}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Mt(this._el.menubar,{top:l+"px",duration:a/2,easing:Gt})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=l+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,e),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,e,this.options.layout),this.options.language.direction=="rtl"&&(o+=" tl-rtl"),this._el.container.className=o}_calculateTimeNavHeight(t,e){var s=0;return t?s=t:(this.options.timenav_height_percentage||e)&&(e?s=Math.round(this.options.height/100*e):s=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),s<this.options.timenav_height_min&&(s=this.options.timenav_height_min),s=s-this.options.marker_padding*2,s}_validateOptions(){for(var t=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],e=0;e<t.length;e++){var s=t[e],a=this.options[s];let o=!0;typeof a=="number"?o=a==parseInt(a):typeof a=="string"&&(o=a.match(/^\s*(\-?\d+)?\s*$/)),o||this.config.logError({message_key:"invalid_integer_option",detail:s})}}_getSlideIndex(t){if(this.config){if(this.config.title&&this.config.title.unique_id==t)return 0;for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return this.config.title?e+1:e}return-1}_getEventIndex(t){for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return e;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav)if(this.fire("loaded",this.config),this.options.hash_bookmark){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let t=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&t.goToId(window.location.hash.replace("#event-",""))},!1)}else Oi(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide)}_updateHashBookmark(t){if(t){var e="#event-"+t.toString();window.history.replaceState(null,"Browsing TimelineJS",e),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+t.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(t){this._timenav.setZoom(t)}goToId(t){this.current_id!=t&&(this.current_id=t,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(t){this.config.title?t==0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[t-1].unique_id):this.goToId(this.config.events[t].unique_id)}goToStart(){this.goTo(0)}goToEnd(){var t=this.config.events.length-1;this.goTo(this.config.title?t+1:t)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1)}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1)}add(t){var e=this.config.addEvent(t),s=this._getEventIndex(e),a=this.config.events[s];this._storyslider.createSlide(a,this.config.title?s+1:s),this._storyslider._updateDrawSlides(),this._timenav.createMarker(a,s),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:e})}remove(t){if(t>=0&&t<this.config.events.length){this.config.events[t].unique_id==this.current_id&&(t<this.config.events.length-1?this.goTo(t+1):this.goTo(t-1));var e=this.config.events.splice(t,1);delete this.config.event_dict[e[0].unique_id],this._storyslider.destroySlide(this.config.title?t+1:t),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(t),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:e[0].unique_id})}}removeId(t){this.remove(this._getEventIndex(t))}getData(t){if(this.config.title){if(t==0)return this.config.title;if(t>0&&t<=this.config.events.length)return this.config.events[t-1]}else if(t>=0&&t<this.config.events.length)return this.config.events[t];return null}getDataById(t){return this.getData(this._getSlideIndex(t))}getSlide(t){return t>=0&&t<this._storyslider._slides.length?this._storyslider._slides[t]:null}getSlideById(t){return this.getSlide(this._getSlideIndex(t))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():F("updateDisplay called but timeline is not in ready state")}_initGoogleAnalytics(){(function(t,e,s,a,o,l,u){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,l=e.createElement(s),u=e.getElementsByTagName(s)[0],l.async=1,l.src=a,u.parentNode.insertBefore(l,u)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",this.options.ga_property_id,"auto"),ga("set","anonymizeIp",!0)}_initAnalytics(){if(this.options.ga_property_id!==null){this._initGoogleAnalytics(),ga("send","pageview");var t=this.options.track_events;for(let s=0;s<t.length;s++){var e=t[s];this.addEventListener(e,function(a){ga("send","event",a.type,"clicked")})}}}}lt(ci,Bt,ht);var ui=(i,t)=>{const e=i.__vccOpts||i;for(const[s,a]of t)e[s]=a;return e};const Vs=Be({name:"TimeMap",components:{LMap:_i,"l-tile-layer":mi,LMarker:pi},props:{docId:String},data(){return{timeline:{},timelineLoaded:!1,zoom:10,center:[],docURL:"",positions:{},baseLayer:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'}}},mounted(){this.docURL=this.$route.query.url,console.log(this.docURL,"DOC ID"),this.timeline=new ci("timeline",this.docURL,{sheets_proxy:""}),this.timeline.on("loaded",()=>{this.timelineLoaded=!0;let i=this.timeline._storyslider.data.events.length,t="";for(let e=0;e<i;++e){let s=[],a=this.timeline.getData(e);"lat"in a&&"lon"in a?s=[a.lat,a.lon]:"Location_Original"in a?s=a.Location_Original.split(",").map(Number):"Location"in a&&(s=a.Location.split(",").map(Number)),e==0&&(t=this.timeline.getSlide(e).data.unique_id),this.positions[this.timeline.getSlide(e).data.unique_id]=s}this.center=this.positions[t]}),this.timeline.on("change",i=>{this.changeMapPoint(i)})},methods:{changeMapPoint(i){console.log(this.$refs.map),this.$refs.map&&this.$refs.map.leafletObject.flyTo(this.positions[i.unique_id])},changeSlide(i){this.timeline.goToId(i)}}}),Ys=i=>(yi("data-v-4d5bc836"),i=i(),wi(),i),$s={class:"hello"},Js=Ys(()=>Ue("div",{id:"timeline"},null,-1)),Xs={id:"mapDiv"};function Ks(i,t,e,s,a,o){const l=Xt("l-tile-layer"),u=Xt("l-marker"),v=Xt("l-map");return Wt(),ue("div",$s,[Js,Ue("div",Xs,[i.timelineLoaded?(Wt(),Me(v,{key:0,ref:"map",style:{height:"100%",width:"100%"},zoom:i.zoom,center:i.center},{default:gi(()=>[We(l,{url:i.baseLayer.url,attribution:i.baseLayer.attribution},null,8,["url","attribution"]),(Wt(!0),ue(bi,null,xi(i.positions,(b,D)=>(Wt(),Me(u,{key:D,"lat-lng":b,onClick:L=>i.changeSlide(D)},null,8,["lat-lng","onClick"]))),128))]),_:1},8,["zoom","center"])):vi("",!0)])])}var fi=ui(Vs,[["render",Ks],["__scopeId","data-v-4d5bc836"]]);const Qs=Be({name:"home",props:["docId"],components:{TimeMap:fi},mounted(){console.log("HERE",this.docId,this.$route.params)}}),ta={class:"home"};function ea(i,t,e,s,a,o){const l=Xt("router-view");return Wt(),ue("div",ta,[We(l)])}var ia=ui(Qs,[["render",ea]]);const sa=[{path:"/",name:"Home",component:fi,props:!0}],aa=ki({history:Ti({}.BASE_URL),routes:sa});Mi(ia).use(aa).mount("#app");
