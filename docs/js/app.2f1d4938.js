(function(t){function e(e){for(var n,o,r=e[0],l=e[1],h=e[2],c=0,u=[];c<r.length;c++)o=r[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(u.length)u.shift()();return s.push.apply(s,h||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},a={app:0},s=[];function o(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"1c7bf07f"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],i=a[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,n){i=a[t]=[e,n]}));e.push(i[2]=n);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=o(t);var h=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(c);var i=a[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",h.name="ChunkLoadError",h.type=n,h.request=s,i[1](h)}a[t]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/TimeMapper2/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],h=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=h;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"010e":function(t,e,i){},"034f":function(t,e,i){"use strict";i("85ec")},"0ee7":function(t,e,i){"use strict";i("3a27")},"3a27":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var a={};i.r(a),i.d(a,"get",(function(){return F})),i.d(a,"create",(function(){return B})),i.d(a,"getPosition",(function(){return $}));i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},r=[],l=(i("034f"),i("2877")),h={},c=Object(l["a"])(h,o,r,!1,null,null,null),d=c.exports,u=i("9483");Object(u["a"])("".concat("/TimeMapper2/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});i("d3b7"),i("3ca3"),i("ddb0");var _=i("8c4f"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("TimeMap",{attrs:{docId:"https://docs.google.com/spreadsheets/d/e/2PACX-1vS6AquASDUv_4AsotubJ4gchyrEGKuk8ZAeANJFOrvE4OToeW0tgFhXTQtsAfccU1UyV6d8a200LfCb/pubhtml"}})],1)},p=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("div",{attrs:{id:"timeline"}}),i("div",{attrs:{id:"mapDiv"}},[t.timelineLoaded?i("l-map",{ref:"map",staticStyle:{height:"100%",width:"100%"},attrs:{zoom:t.zoom,center:t.center}},[i("l-tile-layer",{attrs:{url:t.baseLayer.url,attribution:t.baseLayer.attribution}}),t._l(t.positions,(function(e,n){return i("l-marker",{key:n,attrs:{"lat-lng":e},on:{click:function(e){return t.changeSlide(n)}}})}))],2):t._e()],1)])},g=[],v=(i("d81d"),i("ac1f"),i("1276"),i("a9e3"),i("d4ec")),y=i("bee2"),b=(i("466d"),i("25f0"),i("2b3d"),i("9861"),i("a15b"),i("5319"),i("a434"),i("841c"),navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified"),w=document?document.documentElement:null,x=!!b&&-1!==b.indexOf("phantom"),M=window&&"ActiveXObject"in window,T=(Boolean(M&&b.match(/MSIE 9/i)),M&&document&&document.addEventListener,-1!==b.indexOf("webkit")),j=(b.indexOf("android"),-1!==b.search("android [23]")),O=!!window&&"undefined"!==typeof window.orientation,L=!(!navigator||!window)&&(navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent),E=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:L,D=!!window&&window.opera,S=(b.indexOf("gecko"),-1!==b.indexOf("gecko")&&!T&&!D&&!M),C=(b.indexOf("chrome"),-1!==b.indexOf("edge/")),N=!!w&&(M&&"transition"in w.style),I=!!window&&("WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!j),A=!!w&&"MozPerspective"in w.style,P=!!w&&"OTransition"in w.style,z=(window&&window.L_DISABLE_3D,O&&window.opera,!!window&&("devicePixelRatio"in window&&window.devicePixelRatio>1));if(!z&&window&&"matchMedia"in window){var q=window.matchMedia("(min-resolution:144dpi)");z=q&&q.matches}var R=window&&!window.L_NO_TOUCH&&!x&&(E||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function H(){var t=window.innerWidth,e=window.innerHeight,i="portrait";return t>e&&(i="landscape"),Math.abs(window.orientation),i}function F(t){return"string"===typeof t?document.getElementById(t):t}function B(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n}function $(t){var e={x:0,y:0};while(t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop))e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function W(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}W(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),W(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]),i("4d63");function U(t,e){return t.className.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}function Z(t,e){U(t,e)||(t.className+=(t.className?" ":"")+e)}function G(t,e){t.className=t.className.replace(/(\S+)\s*/g,(function(t,i){return i===e?"":t})).replace(/^\s+/,"")}var Y=i("b85c"),J=i("53ca"),V=(i("fb6a"),i("7039"),i("b64b"),i("262e")),X=i("2caf"),K=i("9072"),Q=(i("b0c0"),function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(t,n){var a;return Object(v["a"])(this,i),a=e.call(this),a.name="TLError",a.message=t||"error",a.message_key=a.message,a.detail=n||"",a}return i}(Object(K["a"])(Error))),tt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function et(t){tt[t.toLowerCase()]&&(t=tt[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,(function(t,e,i,n){return e+e+i+i+n+n}));var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function it(t,e){var i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function nt(t){return null!=t&&(1==t||"true"==String(t).toLowerCase()||1==Number(t))}function at(t){for(var e,i=Array.prototype.slice.call(arguments,1),n=0,a=i.length;n<a;n++)e=i[n]||{},it(t,e);return t}var st=[];function ot(t){st.push(t)}function rt(t){st.forEach((function(e){try{e(t)}catch(i){console&&console.log&&console.log("Error handling trace",i)}}))}function lt(t,e){t=String(t),e=e||2;while(t.length<e)t="0"+t;return t}var ht=function(){var t=0,e="_tl_id";return function(i){return i[e]=i[e]||++t,i[e]}}();function ct(t){return t&&"function"==typeof t.replace?t.replace(/^\s+|\s+$/g,""):""}function dt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];for(var a=0,s=i;a<s.length;a++){var o,r=s[a],l=Object(Y["a"])(Object.getOwnPropertyNames(r.prototype));try{for(l.s();!(o=l.n()).done;){var h=o.value;t.prototype[h]=r.prototype[h]}}catch(c){l.e(c)}finally{l.f()}}}function ut(t,e){if(e||(e=pt(6)),!(e in t))return e;var i=e.match(/^(.+)(-\d+)?$/)[1],n=[];for(var a in t)a.match(/^(.+?)(-\d+)?$/)[1]==i&&n.push(a);e=i+"-"+(n.length+1);for(var s=n.length;-1!=n.indexOf(e);s++)e=i+"-"+s;return e}function _t(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);for(var n=0;n<e.length;n++){var a=e[n];if(null!=t[a]&&"string"!=typeof t[a])return!1;if(0!=ct(t[a]).length)return!1}return!0}function mt(t){t=ct(t),t=t.toLowerCase();for(var e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",i="aaaaaeeeeeiiiiooooouuuunc------",n=0,a=e.length;n<a;n++)t=t.replace(new RegExp(e.charAt(n),"g"),i.charAt(n));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function pt(t,e){var i=function(t){return Math.floor(Math.random()*t)},n=function(){var t="abcdefghijklmnopqurstuvwxyz";return t.substr(i(32),1)},a=function(t){for(var e="",i=0;i<t;i++)e+=n();return e};return e?e+"-"+a(t):"tl-"+a(t)}function ft(t,e,i){for(var n=0;n<t.length;n++)if(e<t[n])return t[n];return i||e}function gt(t,e,i){for(var n=t.length-1;n>=0;n--)if(e>t[n])return t[n];return i||e}function vt(t){return t==parseFloat(t)?!(t%2):void 0}function yt(t,e,i,n){for(var a=n||0,s=0;s<e.length;s++)e[s].data[i]==t&&(a=s);return a}function kt(t){return t?(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t):t}function bt(t,e){t.data=at({},t.data,e),""===t.data.unique_id&&(t.data.unique_id=pt(6))}function wt(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function xt(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function Mt(t,e,i){var n=function(t,e,i){i||(i="");var n=30;return e&&e.length>n&&(e=e.substring(0,n)+"…"),i+"<a class='tl-makelink' href='"+t+"' onclick='void(0)'>"+e+"</a>"},a=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,s=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,o=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(a,(function(t,e,i,a){if(i>0){var s=a[i-1];if('"'==s||"'"==s||"="==s)return t}return n(t,e)})).replace(s,(function(t,e,i,a,s){return n("http://"+i,i,e)})).replace(o,(function(t,e,i,a){return n("mailto:"+e,e)}))}function Tt(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}var jt={square:function(t){var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:function(t){return null!==t.w&&""!==t.w?Math.round(t.w/16*9):null!==t.h&&""!==t.h?Math.round(t.h/9*16):0},r4_3:function(t){return null!==t.w&&""!==t.w?Math.round(t.w/4*3):null!==t.h&&""!==t.h?Math.round(t.h/3*4):void 0}};function Ot(t){var e,i,n,a=[];e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),n=e.slice(e.indexOf("?")+1).split("&");for(var s=0;s<n.length;s++)i=n[s].split("="),a.push(i[0]),a[i[0]]=i[1];return a}function Lt(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return"?"+e.join("&")}function Et(t,e){if("undefined"!=typeof t){var i=0;for(var n in t){if(e===i)return t[n];i++}return""}return""}var Dt=function(t){var e=t||"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",i=e.length;return{encode:function(t){if("number"!==typeof t||t!==parseInt(t))throw'"encode" only accepts integers.';var n="";while(t){var a=t%i;t=Math.floor(t/i),n=e[a].toString()+n}return n},decode:function(t){if("string"!==typeof t)throw'"decode" only accepts strings.';var n=0;while(t){var a=e.indexOf(t[0]);if(a<0)throw'"decode" can\'t find "'+t[0]+'" in the alphabet: "'+e+'"';var s=t.length-1;n+=a*Math.pow(i,s),t=t.substring(1)}return n}}}();function St(t){if("string"==typeof t){var e=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(e){var i=parseInt(e[1])||0,n=parseInt(e[2])||0,a=parseInt(e[3])||0;return a+60*n+60*i*60}}else if("number"==typeof t)return t;return 0}function Ct(t){var e=(new DOMParser).parseFromString(t,"text/html");return e.body.textContent||""}var Nt={ease:[.25,.1,.25,1],linear:[0,0,1,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[.42,0,.58,1]};function It(t){}function At(t){var e=new It(Nt.easein);return e.get(t)}function Pt(t){return 1==t?1:1-Math.pow(2,-10*t)}function zt(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}i("caad"),i("2532"),i("99af");var qt=function(){};qt.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},i=function(){};i.prototype=this.prototype;var n=new i;for(var a in n.constructor=e,e.prototype=n,e.superclass=this.prototype,this)this.hasOwnProperty(a)&&"prototype"!==a&&"superclass"!==a&&(e[a]=this[a]);return t.statics&&(at(e,t.statics),delete t.statics),t.includes&&(at.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=at({},n.options,t.options)),at(n,t),e.extend=qt.extend,e.include=function(t){at(this.prototype,t)},e};var Rt=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"on",value:function(t,e,i){if(!e)throw new Q("No callback function provided");var n=this._tl_events=this._tl_events||{};return n[t]=n[t]||[],n[t].push({action:e,context:i||this}),this}},{key:"addEventListener",value:function(t,e,i){return this.on(t,e,i)}},{key:"hasEventListeners",value:function(t){var e="_tl_events";return e in this&&t in this[e]&&this[e][t].length>0}},{key:"removeEventListener",value:function(t,e,i){if(!this.hasEventListeners(t))return this;for(var n=0,a=this._tl_events,s=a[t].length;n<s;n++)if(a[t][n].action===e&&(!i||a[t][n].context===i))return a[t].splice(n,1),this;return this}},{key:"off",value:function(t,e,i){return this.removeEventListener(t,e,i)}},{key:"fire",value:function(t,e){if(!this.hasEventListeners(t))return this;for(var i=it({type:t,target:this},e),n=this._tl_events[t].slice(),a=0,s=n.length;a<s;a++)n[a].action?n[a].action.call(n[a].context||this,i):rt("no action defined for ".concat(t," listener"));return this}}]),t}();i("4de4");function Ht(t,e){return Ft(t,e)}var Ft=function(){var t=document,e=window,i=e.performance,n=i&&(i.now||i.webkitNow||i.msNow||i.mozNow),a=n?function(){return n.call(i)}:function(){return+new Date},s=t.documentElement,o=!1,r=1e3,l=/^rgb\(|#/,h=/^([+\-])=([\d\.]+)/,c=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,d=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,u=/scale\(((?:[+\-]=)?([\d\.]+))\)/,_=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,m=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,p={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},f=function(){var e,i=t.createElement("a").style,n=["webkitTransform","MozTransform","OTransform","msTransform","Transform"];for(e=0;e<n.length;e++)if(n[e]in i)return n[e]}(),g=function(){return"undefined"!==typeof t.createElement("a").style.opacity}(),v=t.defaultView&&t.defaultView.getComputedStyle?function(e,i){i="transform"==i?f:i,i=E(i);var n=null,a=t.defaultView.getComputedStyle(e,"");return a&&(n=a[i]),e.style[i]||n}:s.currentStyle?function(t,e){if(e=E(e),"opacity"==e){var i=100;try{i=t.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(a){try{i=t.filters("alpha").opacity}catch(s){}}return i/100}var n=t.currentStyle?t.currentStyle[e]:null;return t.style[e]||n}:function(t,e){return t.style[E(e)]},y=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(t){e.setTimeout((function(){t(+new Date)}),17)}}(),k=[];function b(t,e,i){if(Array.prototype.indexOf)return t.indexOf(e);for(i=0;i<t.length;++i)if(t[i]===e)return i}function w(t){var e,i=k.length;for(n&&t>1e12&&(t=a()),o&&(t=a()),e=i;e--;)k[e](t);k.length&&y(w)}function x(t){1===k.push(t)&&y(w)}function M(t){var e,i=b(k,t);i>=0&&(e=k.slice(i+1),k.length=i,k=k.concat(e))}function T(t,e){var i,n={};return(i=t.match(d))&&(n.rotate=P(i[1],e?e.rotate:null)),(i=t.match(u))&&(n.scale=P(i[1],e?e.scale:null)),(i=t.match(_))&&(n.skewx=P(i[1],e?e.skewx:null),n.skewy=P(i[3],e?e.skewy:null)),(i=t.match(m))&&(n.translatex=P(i[1],e?e.translatex:null),n.translatey=P(i[3],e?e.translatey:null)),n}function j(t){var e="";return"rotate"in t&&(e+="rotate("+t.rotate+"deg) "),"scale"in t&&(e+="scale("+t.scale+") "),"translatex"in t&&(e+="translate("+t.translatex+"px,"+t.translatey+"px) "),"skewx"in t&&(e+="skew("+t.skewx+"deg,"+t.skewy+"deg)"),e}function O(t,e,i){return"#"+(1<<24|t<<16|e<<8|i).toString(16).slice(1)}function L(t){var e=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(e?O(e[1],e[2],e[3]):t).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function E(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function D(t){return"function"==typeof t}function S(t){return Math.sin(t*Math.PI/2)}function C(t,e,i,n,s,o){n=D(n)?n:z.easings[n]||S;var l=t||r,h=this,c=o-s,d=a(),u=0,_=0;function m(t){var a=t-d;if(a>l||u)return o=isFinite(o)?o:1,u?_&&e(o):e(o),M(m),i&&i.apply(h);isFinite(o)?e(c*n(a/l)+s):e(n(a/l))}return x(m),{stop:function(t){u=1,_=t,t||(i=null)}}}function N(t,e){var i,n,a=t.length,s=[];for(i=0;i<a;++i)s[i]=[t[i][0],t[i][1]];for(n=1;n<a;++n)for(i=0;i<a-n;++i)s[i][0]=(1-e)*s[i][0]+e*s[parseInt(i+1,10)][0],s[i][1]=(1-e)*s[i][1]+e*s[parseInt(i+1,10)][1];return[s[0][0],s[0][1]]}function I(t,e,i){var n,a,s,o,r=[];for(n=0;n<6;n++)s=Math.min(15,parseInt(e.charAt(n),16)),o=Math.min(15,parseInt(i.charAt(n),16)),a=Math.floor((o-s)*t+s),a=a>15?15:a<0?0:a,r[n]=a.toString(16);return"#"+r.join("")}function A(t,e,i,n,a,s,o){if("transform"==a){for(var l in o={},i[s][a])o[l]=l in n[s][a]?Math.round(((n[s][a][l]-i[s][a][l])*t+i[s][a][l])*r)/r:i[s][a][l];return o}return"string"==typeof i[s][a]?I(t,i[s][a],n[s][a]):(o=Math.round(((n[s][a]-i[s][a])*t+i[s][a])*r)/r,a in p||(o+=e[s][a]||"px"),o)}function P(t,e,i,n,a){return(i=h.exec(t))?(a=parseFloat(i[2]))&&e+("+"==i[1]?1:-1)*a:parseFloat(t)}function z(t,e){var i,n,a,s=t?s=isFinite(t.length)?t:[t]:[],o=e.complete,r=e.duration,h=e.easing,d=e.bezier,u=[],_=[],m=[],p=[];for(d&&(n=e.left,a=e.top,delete e.right,delete e.bottom,delete e.left,delete e.top),i=s.length;i--;){if(u[i]={},_[i]={},m[i]={},d){var y=v(s[i],"left"),k=v(s[i],"top"),b=[P(D(n)?n(s[i]):n||0,parseFloat(y)),P(D(a)?a(s[i]):a||0,parseFloat(k))];p[i]=D(d)?d(s[i],b):d,p[i].push(b),p[i].unshift([parseInt(y,10),parseInt(k,10)])}for(var w in e){switch(w){case"complete":case"duration":case"easing":case"bezier":continue}var x,M=v(s[i],w),O=D(e[w])?e[w](s[i]):e[w];"string"!=typeof O||!l.test(O)||l.test(M)?(u[i][w]="transform"==w?T(M):"string"==typeof O&&l.test(O)?L(M).slice(1):parseFloat(M),_[i][w]="transform"==w?T(O,u[i][w]):"string"==typeof O&&"#"==O.charAt(0)?L(O).slice(1):P(O,parseFloat(M)),"string"==typeof O&&(x=O.match(c))&&(m[i][w]=x[1])):delete e[w]}}return C.apply(s,[r,function(t,n,a){for(i=s.length;i--;)for(var o in d&&(a=N(p[i],t),s[i].style.left=a[0]+"px",s[i].style.top=a[1]+"px"),e)n=A(t,m,u,_,o,i),"transform"==o?s[i].style[f]=j(n):"opacity"!=o||g?s[i].style[E(o)]=n:s[i].style.filter="alpha(opacity="+100*n+")"},o,h])}return y((function(t){o=t>1e12!=a()>1e12})),z.tween=C,z.getStyle=v,z.bezier=N,z.transform=f,z.parseTransform=T,z.formatTransform=j,z.easings={},z}(),Bt=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"show",value:function(t){t||(this._el.container.style.display="block")}},{key:"hide",value:function(t){this._el.container.style.display="none"}},{key:"addTo",value:function(t){t.appendChild(this._el.container),this.onAdd()}},{key:"removeFrom",value:function(t){t.removeChild(this._el.container),this.onRemove()}},{key:"animatePosition",value:function(t,e){var i={duration:this.options.duration,easing:this.options.ease};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]+"px");this.animator&&this.animator.stop(),this.animator=Ht(e,i)}},{key:"onLoaded",value:function(){this.fire("loaded",this.data)}},{key:"onAdd",value:function(){this.fire("added",this.data)}},{key:"onRemove",value:function(){this.fire("removed",this.data)}},{key:"setPosition",value:function(t,e){for(var i in t)t.hasOwnProperty(i)&&(e?e.style[i]=t[i]+"px":this._el.container.style[i]=t[i]+"px")}},{key:"getPosition",value:function(){return $(this._el.container)}}]),t}(),$t=function(){function t(e,i,n){Object(v["a"])(this,t),this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},n&&(this._el.move=n),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:zt},this.animator=null,this.dragevent=this.mousedrag,R&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},it(this.options,i)}return Object(y["a"])(t,[{key:"enable",value:function(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}},{key:"disable",value:function(){Wt.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Wt.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}},{key:"stopMomentum",value:function(){this.animator&&this.animator.stop()}},{key:"updateConstraint",value:function(t){this.options.constraint=t}},{key:"_onDragStart",value:function(t){R?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=$(this._el.drag),this.data.time.start=(new Date).getTime(),this.fire("dragstart",this.data),Wt.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Wt.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}},{key:"_onDragEnd",value:function(t){this.data.sliding=!1,Wt.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Wt.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}},{key:"_onDragMove",value:function(t){t.preventDefault(),this.data.sliding=!0,R?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=$(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}},{key:"_momentum",value:function(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},i=!1;t.time=10*((new Date).getTime()-this.data.time.start),e.time=10*((new Date).getTime()-this.data.time.start),e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<3e3&&(i=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right")),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}},{key:"_animateMomentum",value:function(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:Pt};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),e.left=Math.floor(t.x)+"px"),this.animator=Ht(this._el.move,e),this.fire("momentum",this.data)}}]),t}();dt(Rt);var Wt={addListener:function(t,e,i,n){var a=ht(i),s="_tl_"+e+a;if(!t[s]){var o=function(e){return i.call(n||t,e||Wt._getEvent())};if(R&&"dblclick"===e&&this.addDoubleTapListener)this.addDoubleTapListener(t,o,a);else if("addEventListener"in t)if("mousewheel"===e)t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1);else if("mouseenter"===e||"mouseleave"===e){var r=o,l="mouseenter"===e?"mouseover":"mouseout";o=function(e){if(Wt._checkMouse(t,e))return r(e)},t.addEventListener(l,o,!1)}else t.addEventListener(e,o,!1);else"attachEvent"in t&&t.attachEvent("on"+e,o);t[s]=o}},removeListener:function(t,e,i){var n=ht(i),a="_tl_"+e+n,s=t[a];s&&(R&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1):t.removeEventListener(e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[a]=null)},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{while(i&&i!==t)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var t=window.event;if(!t){var e=arguments.callee.caller;while(e){if(t=e["arguments"][0],t&&window.Event===t.constructor)break;e=e.caller}}return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Wt.addListener(t,$t.START,Wt.stopPropagation),Wt.addListener(t,"click",Wt.stopPropagation),Wt.addListener(t,"dblclick",Wt.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Wt.preventDefault(t),Wt.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},Ut=i("1da1"),Zt=(i("96cf"),i("b680"),i("3410"),i("498a"),i("7db0"),i("159b"),i("4e82"),function(){var t,e,i,n,a,s,o=[],r=o.slice,l=o.filter,h=window.document,c={},d={},u={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},_=/^\s*<(\w+|!)[^>]*>/,m=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,f=/^(?:body|html)$/i,g=/([A-Z])/g,v=["val","css","html","text","data","width","height","offset"],y=["after","prepend","before","append"],k=h.createElement("table"),b=h.createElement("tr"),w={tr:h.createElement("tbody"),tbody:k,thead:k,tfoot:k,td:b,th:b,"*":h.createElement("div")},x=/complete|loaded|interactive/,M=/^[\w-]*$/,T={},j=T.toString,O={},L=h.createElement("div"),E={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},D=Array.isArray||function(t){return t instanceof Array};function S(t){return null==t?String(t):T[j.call(t)]||"object"}function C(t){return"function"==S(t)}function N(t){return null!=t&&t==t.window}function I(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function A(t){return"object"==S(t)}function P(t){return A(t)&&!N(t)&&Object.getPrototypeOf(t)==Object.prototype}function z(t){return"number"==typeof t.length}function q(t){return l.call(t,(function(t){return null!=t}))}function R(t){return t.length>0?i.fn.concat.apply([],t):t}function H(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function F(t){return t in d?d[t]:d[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function B(t,e){return"number"!=typeof e||u[H(t)]?e:e+"px"}function $(t){var e,i;return c[t]||(e=h.createElement(t),h.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),c[t]=i),c[t]}function W(t){return"children"in t?r.call(t.children):i.map(t.childNodes,(function(t){if(1==t.nodeType)return t}))}function U(i,n,a){for(e in n)a&&(P(n[e])||D(n[e]))?(P(n[e])&&!P(i[e])&&(i[e]={}),D(n[e])&&!D(i[e])&&(i[e]=[]),U(i[e],n[e],a)):n[e]!==t&&(i[e]=n[e])}function Z(t,e){return null==e?i(t):i(t).filter(e)}function G(t,e,i,n){return C(e)?e.call(t,i,n):e}function Y(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function V(e,i){var n=e.className,a=n&&n.baseVal!==t;if(i===t)return a?n.baseVal:n;a?n.baseVal=i:e.className=i}function X(t){var e;try{return t?"true"==t||"false"!=t&&("null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?i.parseJSON(t):t:e):t}catch(n){return t}}function K(t,e){for(var i in e(t),t.childNodes)K(t.childNodes[i],e)}return O.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,a=t.parentNode,s=!a;return s&&(a=L).appendChild(t),n=~O.qsa(a,e).indexOf(t),s&&L.removeChild(t),n},a=function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},s=function(t){return l.call(t,(function(e,i){return t.indexOf(e)==i}))},O.fragment=function(e,n,a){var s,o,l;return m.test(e)&&(s=i(h.createElement(RegExp.$1))),s||(e.replace&&(e=e.replace(p,"<$1></$2>")),n===t&&(n=_.test(e)&&RegExp.$1),n in w||(n="*"),l=w[n],l.innerHTML=""+e,s=i.each(r.call(l.childNodes),(function(){l.removeChild(this)}))),P(a)&&(o=i(s),i.each(a,(function(t,e){v.indexOf(t)>-1?o[t](e):o.attr(t,e)}))),s},O.Z=function(t,e){return t=t||[],t.__proto__=i.fn,t.selector=e||"",t},O.isZ=function(t){return t instanceof O.Z},O.init=function(e,n){var a;if(!e)return O.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&_.test(e))a=O.fragment(e,RegExp.$1,n),e=null;else{if(n!==t)return i(n).find(e);a=O.qsa(h,e)}else{if(C(e))return i(h).ready(e);if(O.isZ(e))return e;if(D(e))a=q(e);else if(A(e))a=[e],e=null;else if(_.test(e))a=O.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==t)return i(n).find(e);a=O.qsa(h,e)}}return O.Z(a,e)},i=function(t,e){return O.init(t,e)},i.extend=function(t){var e,i=r.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach((function(i){U(t,i,e)})),t},O.qsa=function(t,e){var i,n="#"==e[0],a=!n&&"."==e[0],s=n||a?e.slice(1):e,o=M.test(s);return I(t)&&o&&n?(i=t.getElementById(s))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:r.call(o&&!n?a?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},i.contains=function(t,e){return t!==e&&t.contains(e)},i.type=S,i.isFunction=C,i.isWindow=N,i.isArray=D,i.isPlainObject=P,i.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},i.inArray=function(t,e,i){return o.indexOf.call(e,t,i)},i.camelCase=a,i.trim=function(t){return null==t?"":String.prototype.trim.call(t)},i.uuid=0,i.support={},i.expr={},i.map=function(t,e){var i,n,a,s=[];if(z(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&s.push(i);else for(a in t)i=e(t[a],a),null!=i&&s.push(i);return R(s)},i.each=function(t,e){var i,n;if(z(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},i.grep=function(t,e){return l.call(t,e)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){T["[object "+e+"]"]=e.toLowerCase()})),i.fn={forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,indexOf:o.indexOf,concat:o.concat,map:function(t){return i(i.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return i(r.apply(this,arguments))},ready:function(t){return x.test(h.readyState)&&h.body?t(i):h.addEventListener("DOMContentLoaded",(function(){t(i)}),!1),this},get:function(e){return e===t?r.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(t){return o.every.call(this,(function(e,i){return!1!==t.call(e,i,e)})),this},filter:function(t){return C(t)?this.not(this.not(t)):i(l.call(this,(function(e){return O.matches(e,t)})))},add:function(t,e){return i(s(this.concat(i(t,e))))},is:function(t){return this.length>0&&O.matches(this[0],t)},not:function(e){var n=[];if(C(e)&&e.call!==t)this.each((function(t){e.call(this,t)||n.push(this)}));else{var a="string"==typeof e?this.filter(e):z(e)&&C(e.item)?r.call(e):i(e);this.forEach((function(t){a.indexOf(t)<0&&n.push(t)}))}return i(n)},has:function(t){return this.filter((function(){return A(t)?i.contains(this,t):i(this).find(t).size()}))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!A(t)?t:i(t)},last:function(){var t=this[this.length-1];return t&&!A(t)?t:i(t)},find:function(t){var e,n=this;return e="object"==Object(J["a"])(t)?i(t).filter((function(){var t=this;return o.some.call(n,(function(e){return i.contains(e,t)}))})):1==this.length?i(O.qsa(this[0],t)):this.map((function(){return O.qsa(this,t)})),e},closest:function(t,e){var n=this[0],a=!1;"object"==Object(J["a"])(t)&&(a=i(t));while(n&&!(a?a.indexOf(n)>=0:O.matches(n,t)))n=n!==e&&!I(n)&&n.parentNode;return i(n)},parents:function(t){var e=[],n=this;while(n.length>0)n=i.map(n,(function(t){if((t=t.parentNode)&&!I(t)&&e.indexOf(t)<0)return e.push(t),t}));return Z(e,t)},parent:function(t){return Z(s(this.pluck("parentNode")),t)},children:function(t){return Z(this.map((function(){return W(this)})),t)},contents:function(){return this.map((function(){return r.call(this.childNodes)}))},siblings:function(t){return Z(this.map((function(t,e){return l.call(W(e.parentNode),(function(t){return t!==e}))})),t)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return i.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=$(this.nodeName))}))},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=C(t);if(this[0]&&!e)var n=i(t).get(0),a=n.parentNode||this.length>1;return this.each((function(s){i(this).wrapAll(e?t.call(this,s):a?n.cloneNode(!0):n)}))},wrapAll:function(t){if(this[0]){var e;i(this[0]).before(t=i(t));while((e=t.children()).length)t=e.first();i(t).append(this)}return this},wrapInner:function(t){var e=C(t);return this.each((function(n){var a=i(this),s=a.contents(),o=e?t.call(this,n):t;s.length?s.wrapAll(o):a.append(o)}))},unwrap:function(){return this.parent().each((function(){i(this).replaceWith(i(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return this.each((function(){var n=i(this);(e===t?"none"==n.css("display"):e)?n.show():n.hide()}))},prev:function(t){return i(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return i(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each((function(e){var n=this.innerHTML;i(this).empty().append(G(this,t,e,n))}))},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each((function(){this.textContent=e===t?"":""+e}))},attr:function(i,n){var a;return"string"==typeof i&&n===t?0==this.length||1!==this[0].nodeType?t:"value"==i&&"INPUT"==this[0].nodeName?this.val():!(a=this[0].getAttribute(i))&&i in this[0]?this[0][i]:a:this.each((function(t){if(1===this.nodeType)if(A(i))for(e in i)Y(this,e,i[e]);else Y(this,i,G(this,n,t,this.getAttribute(i)))}))},removeAttr:function(t){return this.each((function(){1===this.nodeType&&Y(this,t)}))},prop:function(e,i){return e=E[e]||e,i===t?this[0]&&this[0][e]:this.each((function(t){this[e]=G(this,i,t,this[e])}))},data:function(e,i){var n=this.attr("data-"+e.replace(g,"-$1").toLowerCase(),i);return null!==n?X(n):t},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?i(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value):this.each((function(e){this.value=G(this,t,e,this.value)}))},offset:function(t){if(t)return this.each((function(e){var n=i(this),a=G(this,t,e,n.offset()),s=n.offsetParent().offset(),o={top:a.top-s.top,left:a.left-s.left};"static"==n.css("position")&&(o["position"]="relative"),n.css(o)}));if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,n){if(arguments.length<2){var s=this[0],o=getComputedStyle(s,"");if(!s)return;if("string"==typeof t)return s.style[a(t)]||o.getPropertyValue(t);if(D(t)){var r={};return i.each(D(t)?t:[t],(function(t,e){r[e]=s.style[a(e)]||o.getPropertyValue(e)})),r}}var l="";if("string"==S(t))n||0===n?l=H(t)+":"+B(t,n):this.each((function(){this.style.removeProperty(H(t))}));else for(e in t)t[e]||0===t[e]?l+=H(e)+":"+B(e,t[e])+";":this.each((function(){this.style.removeProperty(H(e))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(t){return t?this.indexOf(i(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&o.some.call(this,(function(t){return this.test(V(t))}),F(t))},addClass:function(t){return t?this.each((function(e){n=[];var a=V(this),s=G(this,t,e,a);s.split(/\s+/g).forEach((function(t){i(this).hasClass(t)||n.push(t)}),this),n.length&&V(this,a+(a?" ":"")+n.join(" "))})):this},removeClass:function(e){return this.each((function(i){if(e===t)return V(this,"");n=V(this),G(this,e,i,n).split(/\s+/g).forEach((function(t){n=n.replace(F(t)," ")})),V(this,n.trim())}))},toggleClass:function(e,n){return e?this.each((function(a){var s=i(this),o=G(this,e,a,V(this));o.split(/\s+/g).forEach((function(e){(n===t?!s.hasClass(e):n)?s.addClass(e):s.removeClass(e)}))})):this},scrollTop:function(e){if(this.length){var i="scrollTop"in this[0];return e===t?i?this[0].scrollTop:this[0].pageYOffset:this.each(i?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var i="scrollLeft"in this[0];return e===t?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),a=f.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(i(t).css("margin-top"))||0,n.left-=parseFloat(i(t).css("margin-left"))||0,a.top+=parseFloat(i(e[0]).css("border-top-width"))||0,a.left+=parseFloat(i(e[0]).css("border-left-width"))||0,{top:n.top-a.top,left:n.left-a.left}}},offsetParent:function(){return this.map((function(){var t=this.offsetParent||h.body;while(t&&!f.test(t.nodeName)&&"static"==i(t).css("position"))t=t.offsetParent;return t}))}},i.fn.detach=i.fn.remove,["width","height"].forEach((function(e){var n=e.replace(/./,(function(t){return t[0].toUpperCase()}));i.fn[e]=function(a){var s,o=this[0];return a===t?N(o)?o["inner"+n]:I(o)?o.documentElement["scroll"+n]:(s=this.offset())&&s[e]:this.each((function(t){o=i(this),o.css(e,G(this,a,t,o[e]()))}))}})),y.forEach((function(t,e){var n=e%2;i.fn[t]=function(){var t,a,s=i.map(arguments,(function(e){return t=S(e),"object"==t||"array"==t||null==e?e:O.fragment(e)})),o=this.length>1;return s.length<1?this:this.each((function(t,r){a=n?r:r.parentNode,r=0==e?r.nextSibling:1==e?r.firstChild:2==e?r:null,s.forEach((function(t){if(o)t=t.cloneNode(!0);else if(!a)return i(t).remove();K(a.insertBefore(t,r),(function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window["eval"].call(window,t.innerHTML)}))}))}))},i.fn[n?t+"To":"insert"+(e?"Before":"After")]=function(e){return i(e)[t](this),this}})),O.Z.prototype=i.fn,O.uniq=s,O.deserializeValue=X,i.zepto=O,i}());window.Zepto=Zt,void 0===window.$&&(window.$=Zt),function(t){t.zepto.qsa;var e,i=1,n=Array.prototype.slice,a=t.isFunction,s=function(t){return"string"==typeof t},o={},r={},l="onfocusin"in window,h={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(t){return t._zid||(t._zid=i++)}function u(t,e,i,n){if(e=_(e),e.ns)var a=m(e.ns);return(o[d(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||a.test(t.ns))&&(!i||d(t.fn)===d(i))&&(!n||t.sel==n)}))}function _(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function m(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function p(t,e){return t.del&&!l&&t.e in h||!!e}function f(t){return c[t]||l&&h[t]||t}function g(i,n,a,s,r,l,h){var u=d(i),m=o[u]||(o[u]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return t(document).ready(a);var o=_(n);o.fn=a,o.sel=r,o.e in c&&(a=function(e){var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return o.fn.apply(this,arguments)}),o.del=l;var d=l||a;o.proxy=function(t){if(t=x(t),!t.isImmediatePropagationStopped()){t.data=s;var n=d.apply(i,t._args==e?[t]:[t].concat(t._args));return!1===n&&(t.preventDefault(),t.stopPropagation()),n}},o.i=m.length,m.push(o),"addEventListener"in i&&i.addEventListener(f(o.e),o.proxy,p(o,h))}))}function v(t,e,i,n,a){var s=d(t);(e||"").split(/\s/).forEach((function(e){u(t,e,i,n).forEach((function(e){delete o[s][e.i],"removeEventListener"in t&&t.removeEventListener(f(e.e),e.proxy,p(e,a))}))}))}r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",t.event={add:g,remove:v},t.proxy=function(e,i){if(a(e)){var n=function(){return e.apply(i,arguments)};return n._zid=d(e),n}if(s(i))return t.proxy(e[i],e);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var y=function(){return!0},k=function(){return!1},b=/^([A-Z]|returnValue$|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function x(i,n){return!n&&i.isDefaultPrevented||(n||(n=i),t.each(w,(function(t,e){var a=n[t];i[t]=function(){return this[e]=y,a&&a.apply(n,arguments)},i[e]=k})),(n.defaultPrevented!==e?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(i.isDefaultPrevented=y)),i}function M(t){var i,n={originalEvent:t};for(i in t)b.test(i)||t[i]===e||(n[i]=t[i]);return x(n,t)}t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(i,o,r,l,h){var c,d,u=this;return i&&!s(i)?(t.each(i,(function(t,e){u.on(t,o,r,e,h)})),u):(s(o)||a(l)||!1===l||(l=r,r=o,o=e),(a(r)||!1===r)&&(l=r,r=e),!1===l&&(l=k),u.each((function(e,a){h&&(c=function(t){return v(a,t.type,l),l.apply(this,arguments)}),o&&(d=function(e){var i,s=t(e.target).closest(o,a).get(0);if(s&&s!==a)return i=t.extend(M(e),{currentTarget:s,liveFired:a}),(c||l).apply(s,[i].concat(n.call(arguments,1)))}),g(a,i,l,r,o,d||c)})))},t.fn.off=function(i,n,o){var r=this;return i&&!s(i)?(t.each(i,(function(t,e){r.off(t,n,e)})),r):(s(n)||a(o)||!1===o||(o=n,n=e),!1===o&&(o=k),r.each((function(){v(this,i,o,n)})))},t.fn.trigger=function(e,i){return e=s(e)||t.isPlainObject(e)?t.Event(e):x(e),e._args=i,this.each((function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)}))},t.fn.triggerHandler=function(e,i){var n,a;return this.each((function(o,r){n=M(s(e)?t.Event(e):e),n._args=i,n.target=r,t.each(u(r,e.type||e),(function(t,e){if(a=e.proxy(n),n.isImmediatePropagationStopped())return!1}))})),a},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}})),["focus","blur"].forEach((function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each((function(){try{this[e]()}catch(t){}})),this}})),t.Event=function(t,e){s(t)||(e=t,t=e.type);var i=document.createEvent(r[t]||"Events"),n=!0;if(e)for(var a in e)"bubbles"==a?n=!!e[a]:i[a]=e[a];return i.initEvent(t,n,!0),x(i)}}(Zt),function(t){var e,i,n=0,a=window.document,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,r=/^(?:text|application)\/xml/i,l="application/json",h="text/html",c=/^\s*$/;function d(e,i,n){var a=t.Event(i);return t(e).trigger(a,n),!a.isDefaultPrevented()}function u(t,e,i,n){if(t.global)return d(e||a,i,n)}function _(e){e.global&&0===t.active++&&u(e,null,"ajaxStart")}function m(e){e.global&&!--t.active&&u(e,null,"ajaxStop")}function p(t,e){var i=e.context;if(!1===e.beforeSend.call(i,t,e)||!1===u(e,i,"ajaxBeforeSend",[t,e]))return!1;u(e,i,"ajaxSend",[t,e])}function f(t,e,i,n){var a=i.context,s="success";i.success.call(a,t,s,e),n&&n.resolveWith(a,[t,s,e]),u(i,a,"ajaxSuccess",[e,i,t]),v(s,e,i)}function g(t,e,i,n,a){var s=n.context;n.error.call(s,i,e,t),a&&a.rejectWith(s,[i,e,t]),u(n,s,"ajaxError",[i,n,t||e]),v(e,i,n)}function v(t,e,i){var n=i.context;i.complete.call(n,e,t),u(i,n,"ajaxComplete",[e,i]),m(i)}function y(){}function k(t){return t&&(t=t.split(";",2)[0]),t&&(t==h?"html":t==l?"json":o.test(t)?"script":r.test(t)&&"xml")||"text"}function b(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function w(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=b(e.url,e.data),e.data=void 0)}function x(e,i,n,a){var s=!t.isFunction(i);return{url:e,data:s?i:void 0,success:s?t.isFunction(n)?n:void 0:i,dataType:s&&a||n}}t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var s,o,r=e.jsonpCallback,l=(t.isFunction(r)?r():r)||"jsonp"+ ++n,h=a.createElement("script"),c=window[l],d=function(e){t(h).triggerHandler("error",e||"abort")},u={abort:d};return i&&i.promise(u),t(h).on("load error",(function(n,a){clearTimeout(o),t(h).off().remove(),"error"!=n.type&&s?f(s[0],u,e,i):g(null,a||"error",u,e,i),window[l]=c,s&&t.isFunction(c)&&c(s[0]),c=s=void 0})),!1===p(u,e)?(d("abort"),u):(window[l]=function(){s=arguments},h.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),a.head.appendChild(h),e.timeout>0&&(o=setTimeout((function(){d("timeout")}),e.timeout)),u)},t.ajaxSettings={type:"GET",beforeSend:y,success:y,error:y,complete:y,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:h,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(n){var a=t.extend({},n||{}),s=t.Deferred&&t.Deferred();for(e in t.ajaxSettings)void 0===a[e]&&(a[e]=t.ajaxSettings[e]);_(a),a.crossDomain||(a.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(a.url)&&RegExp.$2!=window.location.host),a.url||(a.url=window.location.toString()),w(a),!1===a.cache&&(a.url=b(a.url,"_="+Date.now()));var o=a.dataType,r=/\?.+=\?/.test(a.url);if("jsonp"==o||r)return r||(a.url=b(a.url,a.jsonp?a.jsonp+"=?":!1===a.jsonp?"":"callback=?")),t.ajaxJSONP(a,s);var l,h=a.accepts[o],d={},u=function(t,e){d[t.toLowerCase()]=[t,e]},m=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:window.location.protocol,v=a.xhr(),x=v.setRequestHeader;if(s&&s.promise(v),a.crossDomain||u("X-Requested-With","XMLHttpRequest"),u("Accept",h||"*/*"),(h=a.mimeType||h)&&(h.indexOf(",")>-1&&(h=h.split(",",2)[0]),v.overrideMimeType&&v.overrideMimeType(h)),(a.contentType||!1!==a.contentType&&a.data&&"GET"!=a.type.toUpperCase())&&u("Content-Type",a.contentType||"application/x-www-form-urlencoded"),a.headers)for(i in a.headers)u(i,a.headers[i]);if(v.setRequestHeader=u,v.onreadystatechange=function(){if(4==v.readyState){v.onreadystatechange=y,clearTimeout(l);var e,i=!1;if(v.status>=200&&v.status<300||304==v.status||0==v.status&&"file:"==m){o=o||k(a.mimeType||v.getResponseHeader("content-type")),e=v.responseText;try{"script"==o?(0,eval)(e):"xml"==o?e=v.responseXML:"json"==o&&(e=c.test(e)?null:t.parseJSON(e))}catch(n){i=n}i?g(i,"parsererror",v,a,s):f(e,v,a,s)}else g(v.statusText||null,v.status?"error":"abort",v,a,s)}},!1===p(v,a))return v.abort(),g(null,"abort",v,a,s),v;if(a.xhrFields)for(i in a.xhrFields)v[i]=a.xhrFields[i];var M=!("async"in a)||a.async;for(i in v.open(a.type,a.url,M,a.username,a.password),d)x.apply(v,d[i]);return a.timeout>0&&(l=setTimeout((function(){v.onreadystatechange=y,v.abort(),g(null,"timeout",v,a,s)}),a.timeout)),v.send(a.data?a.data:null),v},t.get=function(e,i,n,a){return t.ajax(x.apply(null,arguments))},t.post=function(e,i,n,a){var s=x.apply(null,arguments);return s.type="POST",t.ajax(s)},t.getJSON=function(e,i,n){var a=x.apply(null,arguments);return a.dataType="json",t.ajax(a)},t.fetchJSON=function(t){var e=new XMLHttpRequest;return new Promise((function(i,n){e.onreadystatechange=function(){try{if(4!==e.readyState)return;if(e.status>=200&&e.status<300){var a=JSON.parse(e.responseText);i(a)}else n({status:e.status,statusText:e.statusText})}catch(s){n({status:400,statusText:"Error fetching JSON from ".concat(t,": ").concat(s)})}},e.open("GET",t,!0),e.send()}))},t.fn.load=function(e,i,n){if(!this.length)return this;var a,o=this,r=e.split(/\s/),l=x(e,i,n),h=l.success;return r.length>1&&(l.url=r[0],a=r[1]),l.success=function(e){o.html(a?t("<div>").html(e.replace(s,"")).find(a):e),h&&h.apply(o,arguments)},t.ajax(l),this};var M=encodeURIComponent;function T(e,i,n,a){var s,o=t.isArray(i),r=t.isPlainObject(i);t.each(i,(function(i,l){s=t.type(l),a&&(i=n?a:a+"["+(r||"object"==s||"array"==s?i:"")+"]"),!a&&o?e.add(l.name,l.value):"array"==s||!n&&"object"==s?T(e,l,n,i):e.add(i,l)}))}t.param=function(t,e){var i=[];return i.add=function(t,e){this.push(M(t)+"="+M(e))},T(i,t,e),i.join("&").replace(/%20/g,"+")}}(Zt),function(t){t.fn.serializeArray=function(){var e,i=[];return t([].slice.call(this.get(0).elements)).each((function(){e=t(this);var n=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&i.push({name:e.attr("name"),value:e.val()})})),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach((function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))})),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zt),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,i){return e=e||[],t.extend(e,t.fn),e.selector=i||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(i){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(i){return null}}}}(Zt);var Gt=Zt.getJSON,Yt=Zt.ajax,Jt=Zt.fetchJSON,Vt=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",6e4,function(t){t.setSeconds(0)}],["hour",36e5,function(t){t.setMinutes(0)}],["day",864e5,function(t){t.setHours(0)}],["month",2592e6,function(t){t.setDate(1)}],["year",31536e6,function(t){t.setMonth(0)}],["decade",31536e7,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",31536e8,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",31536e9,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],Xt=["millisecond","second","minute","hour","day","month","year"],Kt=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,Qt=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;var te={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},ee=qt.extend({initialize:function(t,e,i){"number"==typeof t?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),this._setFormat(e,i)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=de.fallback),t.constructor!=de&&(rt("First argument to getDisplayDate must be type Language"),t=de.fallback);var i=e||this.data.format;return t.formatDate(this.data.date_obj,i)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Q("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj["isBefore"](t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Q("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj["isAfter"](t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),i=0;i<Vt.length;i++)if(Vt[i][2](e),Vt[i][0]==t)return new ee(e);throw new Q("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};for(var e in it(t,this.data),Xt){var i=ct(t[Xt[e]]);if(!i.match(/^-?\d*$/))throw new Q("invalid_date_err",Xt[e]+" = '"+t[Xt[e]]+"'");var n=parseInt(t[Xt[e]]);isNaN(n)&&(n=4==e||5==e?1:0),t[Xt[e]]=n}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=Xt,i=0;i<e.length;i++)if(this.data[e[i]])return t?t in te||(t="short"):t="base",te[t][e[i]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))}});function ie(t){if(t.match(Kt)){var e=t.match(Kt).slice(1),i={year:e[0].replace("+","")};return e[1]&&(i["month"]=e[1].replace("-","")),e[2]&&(i["day"]=e[2].replace("-","")),i}if(t.match(Qt))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var n={};if(t.match(/\d+\/\d+\/\d+/)){var a=t.match(/\d+\/\d+\/\d+/)[0];t=ct(t.replace(a,""));var s=a.split("/");n.month=s[0],n.day=s[1],n.year=s[2]}if(t.match(/\d+\/\d+/)){a=t.match(/\d+\/\d+/)[0];t=ct(t.replace(a,""));s=a.split("/");n.month=s[0],n.year=s[1]}if(t.match(":")){var o=t.split(":");if(n.hour=o[0],n.minute=o[1],o[2]){var r=o[2].split(".");n.second=r[0],n.millisecond=r[1]}}return n}var ne=qt.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new Q("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),ae=1e6,se=10*ae,oe=10*se,re=10*oe;function le(t){return function(e){var i=e.getTime();return new ne(Math.floor(i/t)*t)}}var he=[["year",1,new le(1)],["decade",10,new le(10)],["century",100,new le(100)],["millennium",1e3,new le(1e3)],["age",ae,new le(ae)],["epoch",se,new le(se)],["era",oe,new le(oe)],["eon",re,new le(re)]],ce=ee.extend({initialize:function(t,e,i){ne==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),this._setFormat(e,i)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new ne(t.year)},floor:function(t){for(var e=0;e<he.length;e++)if(he[e][0]==t){var i=he[e][2](this.data.date_obj);return new ce(i)}throw new Q("invalid_scale_err",t)}}),de=function(){function t(e,i){for(var n in Object(v["a"])(this,t),fe.en)this[n]=fe.en[n];if(e&&"string"==typeof e&&"en"!=e){var a=e;if(!(a in fe)){console.log("Expected language ".concat(a," to be cached. Did you call the constructor directly?"));var s=me(a,i);Jt(s).then((function(t){fe[a]=t})).catch((function(t){console.log("Error loading language [".concat(s,"] ").concat(t.statusText," [").concat(t.status,"]"))}))}it(this,fe[a])}}return Object(y["a"])(t,[{key:"mergeData",value:function(t){for(k in fe.en)t[k]&&("object"==Object(J["a"])(this[k])?it(t[k],this[k]):this[k]=t[k])}},{key:"formatBigYear",value:function(t,e){var i=t.year,n=this.bigdateformats[e]||this.bigdateformats["fallback"];if(n){for(var a=0;a<n.length;a++){var s=n[a];if(Math.abs(i/s[0])>1)return pe(Math.abs(i/s[0]),s[1])}return i.toString()}return rt("Language file dateformats missing cosmological. Falling back."),pe(i,e)}},{key:"_",value:function(e){return this.messages[e]||t.fallback.messages[e]||e}},{key:"formatDate",value:function(t,e){return t.constructor==Date?this.formatJSDate(t,e):t.constructor==ne?this.formatBigYear(t,e):t.data&&t.data.date_obj?this.formatDate(t.data.date_obj,e):(rt("Unfamiliar date presented for formatting"),t.toString())}},{key:"formatJSDate",value:function(e,i){var n=this,a=function(t,e){var i=n.period_labels[t];if(i)t=e<12?i[0]:i[1];return"<span class='tl-timeaxis-timesuffix'>"+t+"</span>"},s=!1,o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g;i||(i="full");var l=this.dateformats[i]||t.fallback.dateformats[i];l||(l=i);var h=s?"getUTC":"get",c=e[h+"Date"](),d=e[h+"Day"](),u=e[h+"Month"](),_=e[h+"FullYear"](),m=e[h+"Hours"](),p=e[h+"Minutes"](),f=e[h+"Seconds"](),g=e[h+"Milliseconds"](),v=s?0:e.getTimezoneOffset(),y={d:c,dd:lt(c),ddd:this.date.day_abbr[d],dddd:this.date.day[d],m:u+1,mm:lt(u+1),mmm:this.date.month_abbr[u],mmmm:this.date.month[u],yy:String(_).slice(2),yyyy:_<0&&this.has_negative_year_modifier()?Math.abs(_):_,h:m%12||12,hh:lt(m%12||12),H:m,HH:lt(m),M:p,MM:lt(p),s:f,ss:lt(f),l:lt(g,3),L:lt(g>99?Math.round(g/10):g),t:a("t",m),tt:a("tt",m),T:a("T",m),TT:a("TT",m),Z:s?"UTC":(String(e).match(o)||[""]).pop().replace(r,""),o:(v>0?"-":"+")+lt(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]},k=l.replace(t.DATE_FORMAT_TOKENS,(function(t){return t in y?y[t]:t.slice(1,t.length-1)}));return this._applyEra(k,_)}},{key:"has_negative_year_modifier",value:function(){return Boolean(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}},{key:"_applyEra",value:function(t,e){var i=e<0?this.era_labels.negative_year:this.era_labels.positive_year,n="";return i.prefix&&(n+="<span>"+i.prefix+"</span> "),n+=t,i.suffix&&(n+=" <span>"+i.suffix+"</span>"),n}}]),t}();function ue(t,e){return _e.apply(this,arguments)}function _e(){return _e=Object(Ut["a"])(regeneratorRuntime.mark((function t(e,i){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=me(e,i),t.prev=1,fe[e]){t.next=7;break}return t.next=5,Jt(n);case 5:a=t.sent,fe[e]=a;case 7:return t.abrupt("return",new de(e,i));case 10:return t.prev=10,t.t0=t["catch"](1),console.log("Error loading language [".concat(n,"] ").concat(t.t0.statusText)),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),_e.apply(this,arguments)}function me(t,e){if(/\.json$/.test(t))var i=t;else{var n="/locale/"+t+".json";/\/$/.test(e)&&(n=n.substr(1));i=e+n}return i}function pe(t,e){if(e.match(/%(\.(\d+))?f/)){var i=e.match(/%(\.(\d+))?f/),n=i[0];return i[2]&&(t=t.toFixed(i[2])),e.replace(n,t)}return e}de.fallback={messages:{}},de.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var fe={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",contract_timeline:"Contract Timeline",return_to_title:"Return to Title",loading_content:"Loading Content",expand_timeline:"Expand Timeline",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",invalid_url_share_required:"Because of unexpected changes to Google's data access API, the creator of this timeline must enable 'anyone with the url can read' access for this spreadsheet. See timeline.knightlab.com for more information.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",empty_feed_err:"No data entries found",missing_start_date_err:"Missing start_date",invalid_data_format_err:"Header row has been modified.",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_invalidurl_err:"Invalid Twitter URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",youtube_invalidurl_err:"Invalid YouTube URL",spotify_invalid_url:"Invalid Spotify URL",template_value_err:"No value provided for variable",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value—must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}},ge=new de;de.fallback=ge;var ve=function(){function t(){Object(v["a"])(this,t)}return Object(y["a"])(t,[{key:"setLanguage",value:function(t){this.language=t}},{key:"getLanguage",value:function(){if(this.language){if("object"==Object(J["a"])(this.language))return this.language;rt("I18NMixins.getLanguage: this.language should be object, but is ".concat(Object(J["a"])(this.language)))}return ge}},{key:"_",value:function(t){return this.getLanguage()._(t)}}]),t}(),ye=function(){function t(e,i,n){Object(v["a"])(this,t),n&&this.setLanguage(n),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,it(this.options,i),this._el.container=B("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}return Object(y["a"])(t,[{key:"updateMessage",value:function(t){this._el.message.innerHTML=t||this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}},{key:"updateDisplay",value:function(t,e){}},{key:"_onMouseClick",value:function(){this.fire("clicked",this.options)}},{key:"_onRemove",value:function(){this._el.parent={}}},{key:"_initLayout",value:function(){this._el.message_container=B("div","tl-message-container",this._el.container),this._el.loading_icon=B("div",this.options.message_icon_class,this._el.message_container),this._el.message=B("div","tl-message-content",this._el.message_container),this.updateMessage()}},{key:"_initEvents",value:function(){Wt.addListener(this._el.container,"click",this._onMouseClick,this),Wt.addListener(this,"removed",this._onRemove,this)}}]),t}();dt(ye,ve,Rt,Bt);i("2ca0");function ke(t,e){e=e||"start_date";t.sort((function(t,i){return t[e].isBefore(i[e])?-1:t[e].isAfter(i[e])?1:0}))}function be(t){var e={hour:null,minute:null,second:null,millisecond:null},i=null,n=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);n&&(i=ct(n[0]),t=ct(t.substring(0,t.lastIndexOf(i))));var a=[],s=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(s?a=s.slice(1):(a=t.split(":"),1==a.length&&(a=t.split("."))),a.length>4)throw new Q("invalid_separator_error");var o=a[0];if(e.hour=parseInt(o),i&&"p"==i.toLowerCase()[0]&&12!=e.hour?e.hour+=12:i&&"a"==i.toLowerCase()[0]&&12==e.hour&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new Q("invalid_hour_err",o);if(a.length>1){var r=a[1];if(e.minute=parseInt(r),isNaN(e.minute))throw new Q("invalid_minute_err",r)}if(a.length>2){var l=a[2].split(/[\.,]/);if(a=l.concat(a.slice(3)),a.length>2)throw new Q("invalid_second_fractional_err");if(e.second=parseInt(a[0]),isNaN(e.second))throw new Q("invalid_second_err",a[0]);if(2==a.length){var h=parseInt(a[1]);if(isNaN(h))throw new Q("invalid_fractional_err",a[1]);e.millisecond=100*h}}return e}var we=new RegExp("(^-?\\d+$|^$)");function xe(t){try{return Object.keys(t).forEach((function(e){var i=t[e];if(i&&i.match&&!i.match(we))throw"invalid value ".concat(i," for ").concat(e)})),!0}catch(e){return!1}}var Me={human:ee,cosmological:ce},Te=i("d4a5"),je=i.n(Te),Oe={text:["headline","text"],media:["caption","credit"]},Le={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};function Ee(t,e,i){Object.keys(i).forEach((function(n){var a="slide"==n?t:t[n];a&&i[n].forEach((function(t){"undefined"!=typeof a[t]&&(a[t]=e(a[t]))}))}))}function De(t){return je.a.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}je.a.addHook("afterSanitizeAttributes",(function(t){if("A"==t.nodeName&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");var e=t.attributes["rel"];e?-1==e.value.indexOf("noopener")&&t.setAttribute("rel","noopener ".concat(e.value)):t.setAttribute("rel","noopener")}}));var Se=function(){function t(e){var i=this;if(Object(v["a"])(this,t),this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},"object"===Object(J["a"])(e)&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var n=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[n]=this.title}for(var a=0;a<e.events.length;a++)try{this.addEvent(e.events[a],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((function(t,e){try{i.addEra(t)}catch(s){i.logError("Era "+e+": "+s)}})),ke(this.events),ke(this.eras)}}return Object(y["a"])(t,[{key:"logError",value:function(t){rt("logError: ".concat(t)),this.messages.errors.push(t)}},{key:"getErrors",value:function(t){return t?this.messages.errors.join(t):this.messages.errors}},{key:"validate",value:function(){"undefined"!=typeof this.events&&"undefined"!=typeof this.events.length&&0!=this.events.length||this.logError("Timeline configuration has no events.");for(var t=0;t<this.eras.length;t++){var e;if("undefined"==typeof this.eras[t].start_date||"undefined"==typeof this.eras[t].end_date)e=this.eras[t].headline?this.eras[t].headline:"era "+(t+1),this.logError("All eras must have start and end dates. ["+e+"]")}}},{key:"isValid",value:function(){return 0==this.messages.errors.length}},{key:"addEvent",value:function(t,e){var i=this._assignID(t);return"undefined"==typeof t.start_date?(rt("Missing start date, skipping event"),console.log(t),null):(this._processDates(t),this._tidyFields(t),this.events.push(t),this.event_dict[i]=t,e||ke(this.events),i)}},{key:"addEra",value:function(t){var e=this._assignID(t);if("undefined"==typeof t.start_date)throw new Q("missing_start_date_err",e);this._processDates(t),this._tidyFields(t),this.eras.push({start_date:t.start_date,end_date:t.end_date,headline:t.text.headline})}},{key:"_assignID",value:function(t){var e=t.unique_id;return ct(e)||(e=t.text?mt(t.text.headline):null),t.unique_id=ut(this.event_dict,e),t.unique_id}},{key:"_makeUniqueIdentifiers",value:function(t,e){for(var i=[t],n=0;n<e.length;n++)ct(e[n].unique_id)&&(e[n].unique_id=mt(e[n].unique_id),-1==i.indexOf(e[n].unique_id)?i.push(e[n].unique_id):e[n].unique_id="");if(i.length!=e.length+1)for(n=0;n<e.length;n++)if(!e[n].unique_id){var a=e[n].text?mt(e[n].text.headline):null;a||(a=pt(6)),-1!=i.indexOf(a)&&(a=a+"-"+n),i.push(a),e[n].unique_id=a}}},{key:"_ensureValidScale",value:function(t){if(!this.scale){this.scale="human";for(var e=0;e<t.length;e++){if("cosmological"==t[e].scale){this.scale="cosmological";break}if(t[e].start_date&&"undefined"!=typeof t[e].start_date.year){var i=new ce(t[e].start_date),n=i.data.date_obj.year;if(n<-271820||n>275759){this.scale="cosmological";break}}}rt("Determining scale dynamically: ".concat(this.scale))}var a=Me[this.scale];a||this.logError("Don't know how to process dates on scale "+this.scale)}},{key:"_processDates",value:function(t){var e=Me[this.scale];if(!(t.start_date instanceof e)){var i=t.start_date;if(t.start_date=new e(i),"undefined"!=typeof t.end_date&&!(t.end_date instanceof e)){var n=t.end_date,a=!0;for(var s in i)a=a&&i[s]==n[s];a?(rt("End date same as start date is redundant; dropping end date"),delete t.end_date):t.end_date=new e(n)}}}},{key:"getEarliestDate",value:function(){var t=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(t)?this.eras[0].start_date:t}},{key:"getLatestDate",value:function(){for(var t=[],e=0;e<this.events.length;e++)this.events[e].end_date?t.push({date:this.events[e].end_date}):t.push({date:this.events[e].start_date});for(e=0;e<this.eras.length;e++)this.eras[e].end_date?t.push({date:this.eras[e].end_date}):t.push({date:this.eras[e].start_date});return ke(t,"date"),t.slice(-1)[0].date}},{key:"_tidyFields",value:function(t){function e(t,e,i){i||(i=""),t.hasOwnProperty(e)||(t[e]=i)}t.group&&(t.group=ct(t.group)),t.text||(t.text={}),e(t.text,"text"),e(t.text,"headline"),Ee(t,De,Oe),Ee(t,Ct,Le)}}]),t}();function Ce(t,e){return null==t?"":(e=e||"\n",t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}function Ne(t){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(Ut["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){if(e.data){var n=Ae(ze(e.data,e),e);n.useMemoryStore=!0,t(n)}else e.url&&window.fetch(e.url,{mode:"cors"}).then((function(t){if(200==t.status)return t.text?t.text():t;"application/json"==t.headers.get("content-type")?t.text().then((function(t){i(JSON.parse(t))})):i({status_code:t.status,message:"Error fetching CSV: [".concat(t.status," ").concat(t.statusText,"]")})})).then((function(i){if(i){var n=Re(i,e);n.useMemoryStore=!0,t(n)}})).catch((function(t){i({status_code:500,message:"Error fetching CSV: ".concat(t)})}))})));case 1:case"end":return t.stop()}}),t)}))),Ie.apply(this,arguments)}function Ae(t,e){return e=e||{},!0!==e.noHeaderRow&&t.length>0?{fields:t[0].map((function(t,e){return t&&t.trim?t.trim():"untitled".concat(e)})),records:t.slice(1)}:{records:t}}function Pe(t){var e={delimiter:",",doublequote:!0,lineterminator:"\n",quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var i in t)"trim"===i?e["skipinitialspace"]=t.trim:e[i.toLowerCase()]=t[i];return e}function ze(t,e){(!e||e&&!e.lineterminator)&&(t=qe(t,e));var i=Pe(e);t=Ce(t,i.lineterminator);var n,a,s="",o=!1,r=!1,l="",h=[],c=[];for(a=function(t){return!0!==r&&(""===t?t=null:!0===i.skipinitialspace&&(t=t.trim())),t},n=0;n<t.length;n+=1)s=t.charAt(n),!1!==o||s!==i.delimiter&&s!==i.lineterminator?s!==i.quotechar?l+=s:o?t.charAt(n+1)===i.quotechar?(l+=i.quotechar,n+=1):o=!1:(o=!0,r=!0):(l=a(l),h.push(l),s===i.lineterminator&&(c.push(h),h=[]),l="",r=!1);return l=a(l),h.push(l),c.push(h),i.skipinitialrows&&(c=c.slice(i.skipinitialrows)),c}function qe(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,"\n"):t}function Re(t,e){var i=Ae(ze(t,e)),n=[];return i.records.forEach((function(t){var e={};i.fields.forEach((function(i,n){return e[i]=t[n]})),n.push(e)})),n}function He(t){if(t)return t.replace(/[\s,]+/g,"")}function Fe(t){var e={key:null,worksheet:0},i=/\bkey=([-_A-Za-z0-9]+)&?/i,n=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(i))e.key=t.match(i)[1];else if(t.match(n)){var a=t.search(n)+t.match(n)[0].length,s=t.substr(a);e.key=s.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function Be(t){return"string"!=typeof t?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function $e(t){var e=["Media Caption","Media Credit","Media","Media Thumbnail","Headline","Text","Display Date","Group","Tag","Background","Type","Start Date","End Date"],i={};Object.keys(t).forEach((function(e){i[e]=ct(t[e])}));var n={media:{caption:i["Media Caption"]||"",credit:i["Media Credit"]||"",url:i["Media"]||"",thumbnail:i["Media Thumbnail"]||""},text:{headline:i["Headline"]||"",text:i["Text"]||""},display_date:i["Display Date"]||"",group:i["Group"]||i["Tag"]||"",background:Be(i["Background"]),type:i["Type"]||""};if(Object.keys(t).forEach((function(i){e.indexOf(i)<0&&(n[i]=ct(t[i]))})),Object.keys(i).includes("Start Date")||Object.keys(i).includes("End Date"))i["Start Date"]&&(n.start_date=ie(i["Start Date"])),i["End Date"]&&(n.end_date=ie(i["End Date"]));else{if(i["Year"]&&(n.start_date={year:He(i["Year"]),month:He(i["Month"])||"",day:He(i["Day"])||""}),i["End Year"]&&(n.end_date={year:He(i["End Year"])||"",month:He(i["End Month"])||"",day:He(i["End Day"])||""}),i["Time"]){if(!n.start_date)throw new Q("invalid_start_time_without_date");it(n.start_date,be(i["Time"]))}if(i["End Time"]){if(!n.end_date)throw new Q("invalid_end_time_without_date");it(n.end_date,be(i["End Time"]))}if(n.start_date&&!xe(n.start_date))throw new Q("invalid_date_err");if(n.end_date&&!xe(n.end_date))throw new Q("invalid_date_err")}return n}function We(t,e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(Ut["a"])(regeneratorRuntime.mark((function t(e,i){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],e=Ze(e),null,t.next=5,Ne({url:"".concat(i).concat(e)}).then((function(t){n=t})).catch((function(t){if("response_not_csv"==t.proxy_err_code)throw new Q("Timeline could not read the data for your timeline. Make sure you have published it to the web.");throw new Q(t.message)}));case 5:return a={events:[],errors:[],warnings:[],eras:[]},n.forEach((function(t,e){try{if(!_t(t)){var i=$e(t);Xe(i,a)}}catch(s){if(s.constructor==Q)a.errors.push(s);else{s.message&&(s=s.message);var n=t["Headline"]||e;a.errors.push(s+"[".concat(n,"]"))}}})),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)}))),Ue.apply(this,arguments)}function Ze(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return"https://docs.google.com/spreadsheets/d/".concat(t,"/pub?output=csv");if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;var e=new URL(t),i=new URLSearchParams(e.search);i.set("output","csv"),i.get("gid")&&i.set("single","true"),e.search="?".concat(i.toString());var n=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname="".concat(n,"/pub"),e.toString()}throw new Q("invalid_url_err",t)}function Ge(t,e){return Ye.apply(this,arguments)}function Ye(){return Ye=Object(Ut["a"])(regeneratorRuntime.mark((function t(e,i){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,We(e,i["sheets_proxy"]);case 2:if(n=t.sent,!n){t.next=5;break}return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),Ye.apply(this,arguments)}function Je(t,e){return Ve.apply(this,arguments)}function Ve(){return Ve=Object(Ut["a"])(regeneratorRuntime.mark((function t(e,i){var n,a,s,o,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=null,a={},"function"==typeof i?n=i:"object"==Object(J["a"])(i)&&(a=i,n=i["callback"],"function"==typeof a["callback"]&&(n=a["callback"])),n){t.next=4;break}throw new Q("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");case 4:if(r=Fe(e),!r){t.next=23;break}return t.prev=6,t.next=9,Ge(e,a);case 9:o=t.sent,t.next=18;break;case 12:return t.prev=12,t.t0=t["catch"](6),s=new Se,"NetworkError"==t.t0.name?s.logError(new Q("network_err")):"TLError"==t.t0.name?s.logError(t.t0):s.logError(new Q("unknown_read_err",t.t0.name)),n(s),t.abrupt("return");case 18:if(s=new Se(o),o.errors)for(l=0;l<o.errors.length;l++)s.logError(o.errors[l]);n(s),t.next=24;break;case 23:Yt({url:e,dataType:"json",success:function(t){try{s=new Se(t)}catch(e){s=new Se,s.logError(e)}n(s)},error:function(t,e,i){if(s=new Se,"parsererror"==e)i=new Q("invalid_url_err");else i=new Q("unknown_read_err",e);s.logError(i),n(s)}});case 24:case"end":return t.stop()}}),t,null,[[6,12]])}))),Ve.apply(this,arguments)}function Xe(t,e){var i="event";"undefined"!=typeof t.type&&(i=t.type,delete t.type),"title"==i?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:"era"==i?e.eras.push(t):e.events.push(t)}var Ke=function(){function t(e){if(Object(v["a"])(this,t),!e)throw new Q("axis_helper_no_options_err");this.scale=e.scale,this.minor=e.minor,this.major=e.major}return Object(y["a"])(t,[{key:"getPixelsPerTick",value:function(t){return t*this.minor.factor}},{key:"getMajorTicks",value:function(t){return this._getTicks(t,this.major)}},{key:"getMinorTicks",value:function(t){return this._getTicks(t,this.minor)}},{key:"_getTicks",value:function(t,e){for(var i=t._scaled_padding*e.factor,n=t._earliest-i,a=t._latest+i,s=[],o=n;o<a;o+=e.factor)s.push(t.getDateFromTime(o).floor(e.name));return{name:e.name,ticks:s}}}]),t}(),Qe={},ti=function(t,e){Qe[t]=[];for(var i=0;i<e.length-1;i++){var n=e[i],a=e[i+1];Qe[t].push(new Ke({scale:n[3],minor:{name:n[0],factor:n[1]},major:{name:a[0],factor:a[1]}}))}};function ei(t,e){"number"!=typeof e&&(e=100);var i=t.getScale(),n=Qe[i];if(!n)throw new Q("axis_helper_scale_err",i);for(var a=null,s=0;s<n.length;s++){var o=n[s],r=o.getPixelsPerTick(t._pixels_per_milli);if(r>e){if(null==a)return o;var l=Math.abs(e-r),h=Math.abs(e-r);return l<h?o:a}a=o}return n[n.length-1]}ti("human",Vt),ti("cosmological",he);var ii={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"},ni=function(){function t(e,i){Object(v["a"])(this,t);var n=e.events;this._scale=e.scale,i=it({display_width:500,screen_multiplier:3,max_rows:null},i),this._display_width=i.display_width,this._screen_multiplier=i.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/n.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=ei(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(n,i.max_rows)}return Object(y["a"])(t,[{key:"_computeDefaultSpan",value:function(t){if("human"==t.scale){for(var e={},i=0;i<t.events.length;i++){var n=t.events[i].start_date.findBestFormat();e[n]=e[n]?e[n]+1:1}for(i=Vt.length-1;i>=0;i--)if(e.hasOwnProperty(Vt[i][0])){var a=Vt[Vt.length-1];return Vt[i+1]&&(a=Vt[i+1]),a[1]}return 31536e6}return 2e5}},{key:"getGroupLabels",value:function(){return this._group_labels||[]}},{key:"getScale",value:function(){return this._scale}},{key:"getNumberOfRows",value:function(){return this._number_of_rows}},{key:"getPixelWidth",value:function(){return this._pixel_width}},{key:"getPosition",value:function(t){return(t-this._earliest)*this._pixels_per_milli}},{key:"getPositionInfo",value:function(t){return this._positions[t]}},{key:"getPixelsPerTick",value:function(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}},{key:"getTicks",value:function(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}},{key:"getDateFromTime",value:function(t){if("human"==this._scale)return new ee(t);if("cosmological"==this._scale)return new ce(new ne(t));throw new Q("time_scale_scale_err",this._scale)}},{key:"getMajorScale",value:function(){return this._axis_helper.major.name}},{key:"getMinorScale",value:function(){return this._axis_helper.minor.name}},{key:"_assessGroups",value:function(t){for(var e=[],i=!1,n=0;n<t.length;n++)t[n].group&&(e.indexOf(t[n].group)<0?e.push(t[n].group):i=!0);return e.length&&i&&e.push(""),e}},{key:"_computeRowInfo",value:function(t,e){for(var i=[],n=0,a=0;a<t.length;a++){var s=t[a],o=[];delete s.row;for(var r=0;r<i.length;r++)if(o.push(i[r].end-s.start),o[r]<=0){s.row=r,i[r]=s;break}if("undefined"==typeof s.row)if(null===e)s.row=i.length,i.push(s);else if(e>0)s.row=i.length,i.push(s),e--;else{var l=Math.min.apply(null,o),h=o.indexOf(l);s.row=h,s.end>i[h].end&&(i[h]=s),n++}}return{n_rows:i.length,n_overlaps:n}}},{key:"_computePositionInfo",value:function(t,e,i){i=i||100;for(var n=[],a=!1,s=0;s<t.length;s++){var o={start:this.getPosition(t[s].start_date.getTime())};if(this._positions.push(o),"undefined"!=typeof t[s].end_date){var r=this.getPosition(t[s].end_date.getTime());o.width=r-o.start,o.width>i?o.end=o.start+o.width:o.end=o.start+i}else o.width=i,o.end=o.start+i;t[s].group?n.indexOf(t[s].group)<0&&n.push(t[s].group):a=!0}if(n.length){a&&n.push("");var l=[];for(s=0;s<n.length;s++)l[s]={label:n[s],idx:s,positions:[],n_rows:1,n_overlaps:0};for(s=0;s<this._positions.length;s++){o=this._positions[s];o.group=n.indexOf(t[s].group||""),o.row=0;for(var h=l[o.group],c=h.positions.length-1;c>=0;c--)h.positions[c].end>o.start&&h.n_overlaps++;h.positions.push(o)}var d=n.length;while(1){var u=Math.max(0,e-d);if(!u)break;if(l.sort((function(t,e){return t.n_overlaps>e.n_overlaps?-1:t.n_overlaps<e.n_overlaps?1:t.idx-e.idx})),!l[0].n_overlaps)break;for(d=0,s=0;s<l.length;s++){h=l[s];if(h.n_overlaps&&u){var _=this._computeRowInfo(h.positions,h.n_rows+1);h.n_rows=_.n_rows,h.n_overlaps=_.n_overlaps,u--}d+=h.n_rows}}this._number_of_rows=d,this._group_labels=[],l.sort((function(t,e){return t.idx-e.idx}));s=0;for(var m=0;s<l.length;s++){this._group_labels.push({label:l[s].label,rows:l[s].n_rows});for(c=0;c<l[s].positions.length;c++){o=l[s].positions[c];o.row+=m}m+=l[s].n_rows}}else{var p=this._computeRowInfo(this._positions,e);this._number_of_rows=p.n_rows}}},{key:"getAxisTickDateFormat",value:function(t){return"cosmological"==this._scale?"compact":ii[t]}}]),t}(),ai=function(){function t(e){Object(v["a"])(this,t),this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=B("div","tl-timegroup"),it(this.data,e),this.animator={},this._initLayout(),this._initEvents()}return Object(y["a"])(t,[{key:"updateDisplay",value:function(t,e){}},{key:"setRowPosition",value:function(t,e){this.options.height=e*this.data.rows,this.setPosition({top:t}),this._el.container.style.height=this.options.height+"px"}},{key:"setAlternateRowColor",value:function(t,e){var i="tl-timegroup";t&&(i+=" tl-timegroup-alternate"),e&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}},{key:"_onMouseClick",value:function(){this.fire("clicked",this.options)}},{key:"_initLayout",value:function(){this._el.message=B("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}},{key:"_initEvents",value:function(){Wt.addListener(this._el.container,"click",this._onMouseClick,this)}},{key:"_updateDisplay",value:function(t,e,i){}}]),t}();dt(ai,Rt,Bt);i("9ad9");var si=function(){function t(e,i,n,a){Object(v["a"])(this,t),this.start_date=e,this.end_date=i,this.headline=n,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:At,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,it(this.options,a),this._initLayout(),this._initEvents()}return Object(y["a"])(t,[{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"setActive",value:function(t){}},{key:"addTo",value:function(t){t.appendChild(this._el.container)}},{key:"removeFrom",value:function(t){t.removeChild(this._el.container)}},{key:"updateDisplay",value:function(t,e){this._updateDisplay(t,e)}},{key:"getLeft",value:function(){return this._el.container.style.left.slice(0,-2)}},{key:"getTime",value:function(){return this.start_date.getTime()}},{key:"getEndTime",value:function(){return!!this.end_date&&this.end_date.getTime()}},{key:"setHeight",value:function(t){var e=12,i=1;this._el.content_container.style.height=t+"px",this._el.content.className="tl-timeera-content",T?(i=Math.floor(t/(e+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=t/e,this._text.className=i>1?"tl-headline tl-headline-fadeout":"tl-headline",this._text.style.height=i*e+"px")}},{key:"setWidth",value:function(t){this.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}},{key:"setClass",value:function(t){this._el.container.className=t}},{key:"setRowPosition",value:function(t,e){this.setPosition({top:t}),e<56&&G(this._el.content_container,"tl-timeera-content-container-small")}},{key:"setColor",value:function(t){this._el.container.className="tl-timeera tl-timeera-color"+t}},{key:"_initLayout",value:function(){this._el.container=B("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=B("div","tl-timeera-content-container",this._el.container),this._el.background=B("div","tl-timeera-background",this._el.content_container),this._el.content=B("div","tl-timeera-content",this._el.content_container),this._el.text=B("div","tl-timeera-text",this._el.content),this._text=B("h2","tl-headline",this._el.text),this.headline&&""!=this.headline&&(this._text.innerHTML=kt(this.headline)),this.onLoaded()}},{key:"_initEvents",value:function(){}},{key:"_updateDisplay",value:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}]),t}();dt(si,Rt,Bt);var oi=function(){function t(e,i,n){Object(v["a"])(this,t),n&&this.setLanguage(n),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:At,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],"object"===Object(J["a"])(e)?this._el.container=e:this._el.container=F(e),it(this.options,i),this._initLayout(),this._initEvents()}return Object(y["a"])(t,[{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"addTo",value:function(t){t.appendChild(this._el.container)}},{key:"removeFrom",value:function(t){t.removeChild(this._el.container)}},{key:"updateDisplay",value:function(t,e){this._updateDisplay(t,e)}},{key:"getLeft",value:function(){return this._el.container.style.left.slice(0,-2)}},{key:"drawTicks",value:function(t,e){var i=t.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i["major"].ticks,this._el.major,t.getAxisTickDateFormat(i["major"].name)),this.minor_ticks=this._createTickElements(i["minor"].ticks,this._el.minor,t.getAxisTickDateFormat(i["minor"].name),i["major"].ticks),this.positionTicks(t,e,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}},{key:"_createTickElements",value:function(t,e,i,n){e.innerHTML="";var a={},s=new Date(-1,13,-30);if(a[s.getTime()]=!0,n)for(var o=0;o<n.length;o++)a[n[o].getTime()]=!0;var r=[];for(o=0;o<t.length;o++){var l=t[o];if(!(l.getTime()in a)){var h=B("div","tl-timeaxis-tick",e),c=B("span","tl-timeaxis-tick-text tl-animate-opacity",h),d=l.getDisplayDate(this.getLanguage(),i);c.innerHTML=d,r.push({tick:h,tick_text:c,display_date:d,date:l})}}return r}},{key:"positionTicks",value:function(t,e,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,t,e),this._positionTickArray(this.minor_ticks,t,e)}},{key:"_positionTickArray",value:function(t,e,i){if(t[1]&&t[0]){var n=e.getPosition(t[1].date.getMillisecond())-e.getPosition(t[0].date.getMillisecond()),a=1;n<i&&(a=Math.round(i/e.getPixelsPerTick()));for(var s=1,o=0;o<t.length;o++){var r=t[o];r.tick.style.left=e.getPosition(r.date.getMillisecond())+"px",r.tick_text.innerHTML=r.display_date,a>1?s>=a?(s=1,r.tick_text.style.opacity=1,r.tick.className="tl-timeaxis-tick"):(s++,r.tick_text.style.opacity=0,r.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(r.tick_text.style.opacity=1,r.tick.className="tl-timeaxis-tick")}}}},{key:"_initLayout",value:function(){this._el.content_container=B("div","tl-timeaxis-content-container",this._el.container),this._el.major=B("div","tl-timeaxis-major",this._el.content_container),this._el.minor=B("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}},{key:"_initEvents",value:function(){}},{key:"_updateDisplay",value:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}]),t}();dt(oi,Rt,Bt,ve);i("9911");var ri=function(){function t(e,i,n){Object(v["a"])(this,t),this._el={container:{},content_container:{},content:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},bt(this,e),it(this.options,i),this._el.container=B("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),n&&n.appendChild(this._el.container)}return Object(y["a"])(t,[{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"addTo",value:function(t){t.appendChild(this._el.container)}},{key:"removeFrom",value:function(t){t.removeChild(this._el.container)}},{key:"headlineHeight",value:function(){return this._el.headline.offsetHeight+40}},{key:"addDateText",value:function(t){this._el.date.innerHTML=t}},{key:"onLoaded",value:function(){this.fire("loaded",this.data)}},{key:"onAdd",value:function(){this.fire("added",this.data)}},{key:"onRemove",value:function(){this.fire("removed",this.data)}},{key:"_initLayout",value:function(){if(this._el.content_container=B("div","tl-text-content-container",this._el.container),this._el.date=B("h3","tl-headline-date",this._el.content_container),""!=this.data.headline){var t="tl-headline";this.options.title&&(t="tl-headline tl-headline-title"),this._el.headline=B("h2",t,this._el.content_container),this._el.headline.innerHTML=this.data.headline}if(""!=this.data.text){var e="";e+=wt(1==this.options.autolink?Mt(this.data.text):this.data.text),this._el.content=B("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=e}this.onLoaded()}}]),t}();dt(ri,Rt);var li=function(){function t(e,i,n){Object(v["a"])(this,t),n&&this.setLanguage(n),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},it(this.options,i),it(this.data,e),this.options.background||(this._el.container=B("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}return Object(y["a"])(t,[{key:"loadMedia",value:function(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout((function(){t.loadingMessage(),t._loadMedia(),t._updateDisplay()}),1200)}catch(e){trace("Error loading media for ",this._media),trace(e)}}},{key:"_updateMessage",value:function(t){this.message&&this.message.updateMessage(t)}},{key:"loadingMessage",value:function(){this._updateMessage(this._("loading")+" "+this.options.media_name)}},{key:"errorMessage",value:function(t){t=t?this._("error")+": "+t:this._("error"),this._updateMessage(t)}},{key:"updateMediaDisplay",value:function(t){this._state.loaded&&!this.options.background&&(this._el.content_item.style.maxHeight=O?this.options.height/2+"px":this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",S&&(this._el.content_item.offsetWidth,this._el.content_item.offsetHeight),this._updateMediaDisplay(t),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}},{key:"_loadMedia",value:function(){this.onLoaded()}},{key:"_updateMediaDisplay",value:function(t){S&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}},{key:"_getMeta",value:function(){}},{key:"_getImageURL",value:function(t,e){return""}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"addTo",value:function(t){t.appendChild(this._el.container),this.onAdd()}},{key:"removeFrom",value:function(t){t.removeChild(this._el.container),this.onRemove()}},{key:"getImageURL",value:function(t,e){return this._getImageURL(t,e)}},{key:"updateDisplay",value:function(t,e,i){this._updateDisplay(t,e,i)}},{key:"stopMedia",value:function(){this._stopMedia()}},{key:"loadErrorDisplay",value:function(t){try{this._el.content.removeChild(this._el.content_item)}catch(e){}this._el.content_item=B("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+t+"</p>",this.onLoaded(!0)}},{key:"onLoaded",value:function(t){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),t||this.options.background||this.showMeta(),this.updateDisplay()}},{key:"onMediaLoaded",value:function(t){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}},{key:"showMeta",value:function(t,e){this._state.show_meta=!0,this.data.credit&&""!=this.data.credit&&(this._el.credit=B("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=1==this.options.autolink?Mt(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&""!=this.data.caption&&(this._el.caption=B("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=1==this.options.autolink?Mt(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),this.data.caption&&this.data.credit||this.getMeta()}},{key:"getMeta",value:function(){this._getMeta()}},{key:"updateMeta",value:function(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=B("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=B("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}},{key:"onAdd",value:function(){this.fire("added",this.data)}},{key:"onRemove",value:function(){this.fire("removed",this.data)}},{key:"_initLayout",value:function(){this.message=new ye(this._el.container,this.options,this.getLanguage()),this._el.content_container=B("div","tl-media-content-container",this._el.container),this.data.link&&""!=this.data.link?(this._el.link=B("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&""!=this.data.link_target?this._el.link.target=this.data.link_target:this._el.link.target="_blank","_blank"==this._el.link.target&&this._el.link.setAttribute("rel","noopener"),this._el.content=B("div","tl-media-content",this._el.link)):this._el.content=B("div","tl-media-content",this._el.content_container)}},{key:"_updateDisplay",value:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}},{key:"domCreate",value:function(){return B.apply(a,arguments)}},{key:"_stopMedia",value:function(){}}]),t}();dt(li,Rt,ve);var hi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}},{key:"createMedia",value:function(){var t=this,e="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(e="tl-media-item tl-media-image"),this.data.link?(this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.link,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img",e,this._el.content_link)):this._el.content_item=this.domCreate("img",e,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=xt(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=xt(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){t.onMediaLoaded()})),this._el.content_item.src=this.getImageURL()}},{key:"getImageURL",value:function(t,e){return Tt(this.data.url)}},{key:"_updateMediaDisplay",value:function(t){S&&(this._el.content_item.style.width="auto")}}]),i}(li),ci=function(){function t(e){Object(v["a"])(this,t),this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}return Object(y["a"])(t,[{key:"createNode",value:function(t,e){var i,n=this.doc.createElement(t);for(i in e)e.hasOwnProperty(i)&&n.setAttribute(i,e[i]);return n}},{key:"finish",value:function(t){var e,i,n=this.pending[t];n&&(e=n.callback,i=n.urls,i.shift(),this.pollCount=0,i.length||(e&&e.call(n.context,n.obj),this.pending[t]=null,this.queue[t].length&&this.load(t)))}},{key:"getEnv",value:function(){var t=navigator.userAgent,e={async:!0===this.doc.createElement("script").async};return(e.webkit=/AppleWebKit\//.test(t))||(e.ie=/MSIE/.test(t))||(e.opera=/Opera/.test(t))||(e.gecko=/Gecko\//.test(t))||(e.unknown=!0),e}},{key:"load",value:function(t,e,i,n,a){var s,o,r,l,h,c,d=function(){this.finish(t)}.bind(this),u="css"===t,_=[];if(e)if(e="string"===typeof e?[e]:e.concat(),u||this.env.async||this.env.gecko||this.env.opera)this.queue[t].push({urls:e,callback:i,obj:n,context:a});else for(s=0,o=e.length;s<o;++s)this.queue[t].push({urls:[e[s]],callback:s===o-1?i:null,obj:n,context:a});if(!this.pending[t]&&(l=this.pending[t]=this.queue[t].shift())){for(h=l.urls,s=0,o=h.length;s<o;++s)c=h[s],u?r=this.env.gecko?this.createNode("style"):this.createNode("link",{href:c,rel:"stylesheet"}):(r=this.createNode("script",{src:c}),r.async=!1),r.className="lazyload",r.setAttribute("charset","utf-8"),this.env.ie&&!u?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&(r.onreadystatechange=null,d())}:u&&(this.env.gecko||this.env.webkit)?this.env.webkit?(l.urls[s]=r.href,this.pollWebKit()):(r.innerHTML='@import "'+c+'";',this.pollGecko(r)):r.onload=r.onerror=d,_.push(r);for(s=0,o=_.length;s<o;++s)this.head.appendChild(_[s])}}},{key:"pollGecko",value:function(t){var e;try{e=!!t.sheet.cssRules}catch(n){if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout((function(){i.pollGecko(t)}),50)}else e&&this.finish("css");return}this.finish("css")}},{key:"pollWebKit",value:function(){var t,e=this.pending.css;if(e){t=this.styleSheets.length;while(--t>=0)if(this.styleSheets[t].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}},{key:"css",value:function(t,e,i,n){this.load("css",t,e,i,n)}},{key:"js",value:function(t,e,i,n){this.load("js",t,e,i,n)}}]),t}();function di(t,e,i,n){_i.js(t,e,i,n)}function ui(t,e,i,n){_i.css(t,e,i,n)}var _i=new ci(document),mi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t,e=this;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=pt(7),t=Ot(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=t["v"]:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:rt("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=St(this.data.url.split("start=")[1],10):this.data.url.match("t=")&&(this.media_id.start=St(this.data.url.split("t=")[1],10)),this.data.url.match("end=")&&(this.media_id.end=St(this.data.url.split("end=")[1],10)),this.media_id.hd=Boolean("undefined"!=typeof t["hd"]),di("https://www.youtube.com/iframe_api",(function(){e.createMedia()}))}},{key:"_updateMediaDisplay",value:function(){this._el.content_item.style.height=jt.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}},{key:"_stopMedia",value:function(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(t){rt(t)}}},{key:"createMedia",value:function(){var t=this;clearTimeout(this.timer),"undefined"!=typeof YT&&"undefined"!=typeof YT.Player?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout((function(){t.createMedia()}),1e3)}},{key:"onPlayerReady",value:function(t){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}},{key:"onStateChange",value:function(t){t.data==YT.PlayerState.ENDED&&(t.target.seekTo(0),t.target.pauseVideo())}}]),i}(li),pi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){if(this._state.loaded){var t=jt.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=t.h+"px"}}},{key:"makeGoogleMapsEmbedURL",value:function(t,e){var i=!1;function n(t){function n(e,n){if("z"==e.slice(-1))n["zoom"]=e;else if("m"==e.slice(-1))n["zoom"]=14,n["maptype"]="satellite";else if("t"==e.slice(-1)){if(i=!0,"place"==o)var s=t.match(h["place"])[3]+","+t.match(h["place"])[4];else{s=n["center"];delete n["center"]}for(var r in n={},n["location"]=s,streetview_params=e.split(","),a["streetview"]){var l=parseInt(r)+1;"pitch"==a["streetview"][r]&&"90t"==streetview_params[l]?n[a["streetview"][r]]=0:n[a["streetview"][r]]=streetview_params[l].slice(0,-1)}}return n}function s(t,s){var o={},r=s[1],l=s[s.length-1];for(var h in a[t]){var c=parseInt(h)+2;"center"==a[t][h]?o[a[t][h]]=s[c]+","+s[++c]:o[a[t][h]]=s[c]}return o=n(l,o),o["key"]=e,1==i&&(t="streetview"),r+"/embed/v1/"+t+Lt(o)}var o="view";return t.match(h["place"])?o="place":t.match(h["directions"])?o="directions":t.match(h["search"])&&(o="search"),s(o,t.match(h[o]))}var a={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},s=/(https:\/\/.+google.+?\/maps)/,o=/@([-\d.]+),([-\d.]+)/,r=/([\w\W]+)/,l=/,((?:[-\d.]+[zmayht],?)*)/,h={view:new RegExp(s.source+"/"+o.source+l.source),place:new RegExp(s.source+"/place/"+r.source+"/"+o.source+l.source),directions:new RegExp(s.source+"/dir/"+r.source+"/"+r.source+"/"+o.source+l.source),search:new RegExp(s.source+"/search/"+r.source+"/"+o.source+l.source)};return n(t)}}]),i}(li),fi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(t,n,a){var s;return Object(v["a"])(this,i),s=e.call(this,t,n,a),s.blockquote=je.a.sanitize(s.data.url),s}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}},{key:"updateMediaDisplay",value:function(){}}]),i}(li),gi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t,e,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),e=this.data.url.split("//")[1].split(".wikipedia")[0],t="https://"+e+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Yt({type:"GET",url:t,dataType:"json",success:function(t){i.createMedia(t)},error:function(t,e){var n="";n+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+e,i.loadErrorDisplay(n)}})}},{key:"createMedia",value:function(t){var e="";if(t.query){var i="";e={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};e.entry=Et(t.query.pages,0),e.extract=e.entry.extract,e.title=e.entry.title,e.page_image=e.entry.thumbnail,e.extract.match("<p>")?e.text_array=e.extract.split("<p>"):e.text_array.push(e.extract);for(var n=0;n<e.text_array.length;n++)n+1<=e.paragraphs&&n+1<e.text_array.length&&(e.text+="<p>"+e.text_array[n+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+e.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",e.page_image,i+=e.text,e.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}},{key:"updateMediaDisplay",value:function(){}}]),i}(li),vi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,t="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Gt(t,(function(t){di("https://w.soundcloud.com/player/api.js",(function(){e.createMedia(t)}))}))}},{key:"createMedia",value:function(t){this._el.content_item.innerHTML=t.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}},{key:"_stopMedia",value:function(){this.soundCloudCreated&&self.widget.pause()}}]),i}(li),yi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),t="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(t=t+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",(function(t){e.onMediaLoaded()})),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){this._el.content_item.style.height=jt.r16_9({w:this._el.content_item.offsetWidth})+"px"}},{key:"_stopMedia",value:function(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){rt(t)}}}]),i}(li),ki=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],t="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){this._state.loaded&&(this._el.content_item.style.height=jt.r16_9({w:this._el.content_item.offsetWidth})+"px")}},{key:"_stopMedia",value:function(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}]),i}(li),bi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){var t=jt.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}},{key:"_stopMedia",value:function(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}]),i}(li),wi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t,e=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?twitter.com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match("<blockquote class=['\"]twitter-tweet['\"]")){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(!(i&&i.length>2))return void e.loadErrorDisplay(e._("twitterembed_invalidurl_err"));this.media_id=i[2]}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Yt({type:"GET",url:t,dataType:"json",success:function(t){e.createMedia(t)},error:function(t,i){var n="";n+=e._("twitter_load_err")+"<br/>"+e.media_id+"<br/>"+i,e.loadErrorDisplay(n)}})}},{key:"createMedia",value:function(t){var e="",i="",n="",a="",s="",o="",r=this;i=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",n=t.author_url.split("twitter.com/")[1],a=t.html.split("</p>&mdash;")[1].split('<a href="')[1],s=a.split('">')[0],o=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/gi,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")?(di("https://platform.twitter.com/widgets.js",(function(){twttr.widgets.createTweet(r.media_id,r._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})})),this.onLoaded()):(e+=i,e+="<div class='vcard'>",e+="<a href='"+s+"' class='twitter-date' rel='noopener' target='_blank'>"+o+"</a>",e+="<img src='' class='tl-media-item tl-media-image'></a>",e+="<div class='author'>",e+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",e+="<span class='avatar'></span>",e+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",e+="<span class='nickname'>@"+n+"<span class='thumbnail-inline'></span></span>",e+="</a>",e+="</div>",e+="</div>",this._el.content_item.innerHTML=e,this.onLoaded())}},{key:"updateMediaDisplay",value:function(){}},{key:"_updateMediaDisplay",value:function(){}}]),i}(li),xi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);i&&i.length>2?(this.media_id=i[2],t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(t,e,i){var n,a=t.getElementsByTagName(e)[0],s=window.twttr||{};return t.getElementById(i)||(n=t.createElement(e),n.id=i,n.src="https://platform.twitter.com/widgets.js",a.parentNode.insertBefore(n,a),s._e=[],s.ready=function(t){s._e.push(t)}),s}(document,"script","twitter-wjs"),Yt({type:"GET",url:t,dataType:"json",success:function(t){e.createMedia(t)},error:function(t,i){var n="";n+=e._("twitter_load_err")+"<br/>"+e.media_id+"<br/>"+i,e.loadErrorDisplay(n)}})):e.loadErrorDisplay(e._("twitterembed_invalidurl_err"))}},{key:"createMedia",value:function(t){var e="",i="",n="",a="",s="",o="";i=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",n=t.author_url.split("twitter.com/")[1],a=t.html.split("</p>&mdash;")[1].split('<a href="')[1],s=a.split('">')[0],o=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/gi,'<a target="_blank" rel="noopener" href');var r=this.media_id;i.includes("pic.twitter.com")?(twttr.ready((function(t){e=document.getElementsByClassName("tl-media-twitter")[0];var i=String(r);twttr.widgets.createTweet(i,e,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then((function(t){this.onLoaded()}))})),this._el.content_item.innerHTML=e,this.onLoaded()):(e+=i,e+="<div class='vcard'>",e+="<a href='"+s+"' class='twitter-date' rel='noopener' target='_blank'>"+o+"</a>",e+="<div class='author'>",e+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",e+="<span class='avatar'></span>",e+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",e+="<span class='nickname'>@"+n+"<span class='thumbnail-inline'></span></span>",e+="</a>",e+="</div>",e+="</div>",this._el.content_item.innerHTML=e,this.onLoaded())}},{key:"updateMediaDisplay",value:function(){}},{key:"_updateMediaDisplay",value:function(){}}]),i}(li),Mi=(i("a4d3"),i("e01a"),function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t,e=this;try{this.establishMediaID(),t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Gt(t,(function(t){"ok"==t.stat?(e.sizes=t.sizes.size,e.options.background||e.createMedia(),e.onLoaded()):e.loadErrorDisplay(e._("flickr_notfound_err"))}))}catch(i){e.loadErrorDisplay(e._(i.message_key))}}},{key:"establishMediaID",value:function(){if(this.data.url.match(/flic.kr\/.+/i)){var t=this.data.url.split("/").slice(-1)[0];this.media_id=Dt.decode(t)}else{var e="flickr.com/photos/",i=this.data.url.indexOf(e);if(-1==i)throw new Q("flickr_invalidurl_err");var n=i+e.length;this.media_id=this.data.url.substr(n).split("/")[1]}}},{key:"createMedia",value:function(){var t=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=xt(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=xt(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){t.onMediaLoaded()})),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}},{key:"getImageURL",value:function(t,e){for(var i=this.size_label(e),n=this.sizes[this.sizes.length-2].source,a=0;a<this.sizes.length;a++)this.sizes[a].label==i&&(n=this.sizes[a].source);return n}},{key:"_getMeta",value:function(){var t,e=this;t="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Gt(t,(function(t){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+t.photo.owner.realname+"</a>",e.data.caption_alternate=t.photo.title._content+" "+t.photo.description._content,e.updateMeta()}))}},{key:"size_label",value:function(t){var e="";return e=t<=75?t<=0?"Large":"Thumbnail":t<=180?"Small":t<=240?"Small 320":t<=375?"Medium":t<=480?"Medium 640":"Large",e}}]),i}(li)),Ti=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=pt(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||rt("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),di(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],(function(){t.createMedia()}))}},{key:"_transformURL",value:function(t){return t.replace(/(.*)\.html$/,"$1.js")}},{key:"_updateMediaDisplay",value:function(){this._el.content_item.style.height=this.options.height+"px"}},{key:"createMedia",value:function(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}]),i}(li),ji="830b21071290df4f81a35c56abbea096",Oi="704270473831239",Li="".concat(Oi,"|").concat(ji),Ei="https://graph.facebook.com/v8.0/instagram_oembed?access_token=".concat(Li,"&fields=html,thumbnail_url,author_name&url=");function Di(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=xt(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=xt(this.data.caption)),this._el.content_item.addEventListener("load",function(t){this.onMediaLoaded()}.bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function Si(t){var e="".concat(t.statusText," [").concat(t.status,"]");400==t.status&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}var Ci=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}},{key:"createMedia",value:function(){this.oembed_response=null;var t="".concat(Ei).concat(this.data.url);try{Yt({url:t,dataType:"json",success:Di,error:Si,context:this})}catch(e){console.log("Instagram: error fetching ".concat(t)),console.log(e)}}},{key:"getImageURL",value:function(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;Jt("".concat(Ei).concat(this.data.url)).then((function(t){return t.thumbnail_url})).catch((function(t){rt("Instagram getImageURL Error: ".concat(t.status," ").concat(t.statusText))}))}},{key:"_getMeta",value:function(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate='Instagram: <a href="https://instagram.com/'.concat(this.oembed_response.author_name,'" target="_blank">@').concat(this.oembed_response.author_name,"</a>")),this.updateMeta()}},{key:"sizes",value:function(t){var e="";return e=t<=150?"t":t<=306?"m":"l",e}}]),i}(li),Ni=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}},{key:"_updateMediaDisplay",value:function(t){S&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}]),i}(li),Ii=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var e=this.data.url.match(/open\?id=([^&]+)/)[1];t="https://drive.google.com/file/d/"+e+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){e=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];t="https://drive.google.com/file/d/"+e+"/preview"}else t=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){this._el.content_item.style.height=this.options.height+"px"}}]),i}(li);function Ai(t){if(t.match(/^spotify:/))return t;t=new URL(t);var e=t.pathname.replace(/\/$/,"");return"spotify".concat(e.replace(/\//g,":"))}var Pi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=Ai(this.data.url),this.media_id?(t="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}},{key:"_updateMediaDisplay",value:function(t){var e=this.options.height,i=0,n=0;e=O?this.options.height/2:this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",rt(e),rt(this.options.width),e>this.options.width?(rt("height is greater"),i=this.options.width+80+"px",n=this.options.width+"px"):(rt("width is greater"),rt(this.options.width),i=e+"px",n=e-80+"px"),this.player.style.width=n,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=n),this._el.caption&&(this._el.caption.style.width=n)}},{key:"_stopMedia",value:function(){}}]),i}(li),zi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(t,n,a){var s;return Object(v["a"])(this,i),s=e.call(this,t,n,a),s.iframe=je.a.sanitize(s.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]}),s}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){this._el.content_item.style.height=this.options.height+"px"}}]),i}(li),qi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){try{var t=this;if(this.data.url.match("<blockquote class=['\"]imgur-embed-pub['\"]")){var e=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=e[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);di(["https://s.imgur.com/min/embed.js"],(function(){t.createMedia()}))}catch(i){this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}},{key:"createMedia",value:function(){var t=this,e="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Yt({type:"GET",url:e,dataType:"json",success:function(e){try{t._el.content_item.innerHTML=e.html,setInterval((function(){null==document.querySelector("blockquote.imgur-embed-pub")?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))}),2e3)}catch(i){rt("Error processing imgur ajax response",i)}},error:function(e,i,n){"parsererror"==i?t.loadErrorDisplay(t._("imgur_invalidurl_err")):t.loadErrorDisplay(t._("unknown_read_err",i))}}),this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=jt.r16_9({w:this.options.width})+"px"}}]),i}(li),Ri=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t=Tt(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var e="";e=M||C||t.match(/dl.dropboxusercontent.com/)?"<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+t+"&amp;embedded=true'></iframe>":"<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this._el.content_item.innerHTML=e,this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){this._el.content_item.style.height=this.options.height+"px"}}]),i}(li),Hi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}},{key:"createMedia",value:function(){var t=this,e="tl-media-item tl-media-audio tl-media-shadow";this.data.link?(this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.link,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("audio",e,this._el.content_link)):this._el.content_item=this.domCreate("audio",e,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",(function(e){t.onMediaLoaded()})),this._el.source_item.src=this.data.url,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}},{key:"_updateMediaDisplay",value:function(t){S&&(this._el.content_item.style.width="auto")}},{key:"_stopMedia",value:function(){this.player_element&&this.player_element.pause()}},{key:"_getType",value:function(t,e){var i=t.match(e),n="audio/";switch(i[1]){case"mp3":n+="mpeg";break;case"wav":n+="wav";break;case"m4a":n+="mp4";break;default:n="audio";break}return n}}]),i}(li),Fi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}},{key:"createMedia",value:function(){var t=this,e="tl-media-item tl-media-video tl-media-shadow";this.data.link?(this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.link,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("video",e,this._el.content_link)):this._el.content_item=this.domCreate("video",e,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",(function(e){t.onMediaLoaded()})),this._el.source_item.src=this.data.url,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}},{key:"_updateMediaDisplay",value:function(t){S&&(this._el.content_item.style.width="auto")}},{key:"_stopMedia",value:function(){this.player_element&&this.player_element.pause()}},{key:"_getType",value:function(t,e){var i=t.match(e),n="video/";switch(i[1]){case"mp4":n+="mp4";break;case"webm":n+="webm";break;default:n="video";break}return n}}]),i}(li),Bi=function(t){Object(V["a"])(i,t);var e=Object(X["a"])(i);function i(){return Object(v["a"])(this,i),e.apply(this,arguments)}return Object(y["a"])(i,[{key:"_loadMedia",value:function(){var t,e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],rt("Wistia: media_id: ".concat(this.media_id)),t="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",(function(t){e.onMediaLoaded()})),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}},{key:"_updateMediaDisplay",value:function(){this._el.content_item.style.height=jt.r16_9({w:this._el.content_item.offsetWidth})+"px"}},{key:"_stopMedia",value:function(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){rt(t)}}}]),i}(li);function $i(t,e){var i={},n=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.)?youtube|youtu.be",cls:mi},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:yi},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?dailymotion.com",cls:ki},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:bi},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:vi},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?twitter.com",cls:wi},{type:"twitterembed",name:"TwitterEmbed",match_str:"<blockquote class=['\"]twitter-tweet['\"]",cls:xi},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:pi},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:Mi},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:Mi},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:Ci},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:Ni},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:Ti},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:hi},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:qi},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=sharing|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:Ii},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:Ri},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/*(www.)?wikipedia.org|^(https?:)?/*([a-z][a-z].)?wikipedia.org",cls:gi},{type:"spotify",name:"spotify",match_str:"spotify",cls:Pi},{type:"iframe",name:"iFrame",match_str:"iframe",cls:zi},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:fi},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:Fi},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:Bi},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:Hi},{type:"imageblank",name:"Imageblank",match_str:"",cls:hi}];if(e){if(t instanceof Array)return!1;for(var a=0;a<n.length;a++)switch(n[a].type){case"flickr":case"image":case"instagram":if(t.url.match(n[a].match_str))return i=n[a],i;break;default:break}}else for(a=0;a<n.length;a++)if(t.url.match(n[a].match_str))return n[a];return!1}var Wi=function(){function t(e,i){Object(v["a"])(this,t),this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:At,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,it(this.options,i),it(this.data,e),this._initLayout(),this._initEvents()}return Object(y["a"])(t,[{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"setActive",value:function(t){this.active=t,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker"}},{key:"addTo",value:function(t){t.appendChild(this._el.container)}},{key:"removeFrom",value:function(t){t.removeChild(this._el.container)}},{key:"updateDisplay",value:function(t,e){this._updateDisplay(t,e)}},{key:"loadMedia",value:function(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}},{key:"stopMedia",value:function(){this._media&&this._state.loaded&&this._media.stopMedia()}},{key:"getLeft",value:function(){return this._el.container.style.left.slice(0,-2)}},{key:"getTime",value:function(){return this.data.start_date.getTime()}},{key:"getEndTime",value:function(){return!!this.data.end_date&&this.data.end_date.getTime()}},{key:"setHeight",value:function(t){var e=12,i=1;this._el.content_container.style.height=t+"px",this._el.timespan_content.style.height=t+"px",this._el.content.className=t<=30?"tl-timemarker-content tl-timemarker-content-small":"tl-timemarker-content",t<=56?Z(this._el.content_container,"tl-timemarker-content-container-small"):G(this._el.content_container,"tl-timemarker-content-container-small"),T?(i=Math.floor(t/(e+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=t/e,this._text.className=i>1?"tl-headline tl-headline-fadeout":"tl-headline",this._text.style.height=i*e+"px")}},{key:"setWidth",value:function(t){this.data.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}},{key:"setClass",value:function(t){this._el.container.className=t}},{key:"setRowPosition",value:function(t,e){this.setPosition({top:t}),this._el.timespan.style.height=e+"px"}},{key:"_onMarkerClick",value:function(t){this.fire("markerclick",{unique_id:this.data.unique_id})}},{key:"_initLayout",value:function(){if(this._el.container=B("div","tl-timemarker"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=B("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=B("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=B("div","tl-timemarker-content-container",this._el.container),this._el.content=B("div","tl-timemarker-content",this._el.content_container),this._el.line_left=B("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=B("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=B("div","tl-timemarker-media-container",this._el.content);var t={url:this.data.media.thumbnail},e=this.data.media.thumbnail?$i(t,!0):null;if(e){var i=new e.cls(t);i.on("loaded",function(){this._el.media=B("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}.bind(this)),i.loadMedia()}else{var n=$i(this.data.media).type;this._el.media=B("span","tl-icon-"+n,this._el.media_container)}}this._el.text=B("div","tl-timemarker-text",this._el.content),this._text=B("h2","tl-headline",this._el.text),this.data.text.headline&&""!=this.data.text.headline?this._text.innerHTML=kt(this.data.text.headline):this.data.text.text&&""!=this.data.text.text?this._text.innerHTML=kt(this.data.text.text):this.data.media&&this.data.media.caption&&""!=this.data.media.caption&&(this._text.innerHTML=kt(this.data.media.caption)),this.onLoaded()}},{key:"_initEvents",value:function(){Wt.addListener(this._el.container,"click",this._onMarkerClick,this)}},{key:"_updateDisplay",value:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}]),t}();dt(Wi,Rt,Bt);var Ui=function(){function t(e,i,n){Object(v["a"])(this,t),this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:zt},this.animator=null,this.dragevent=this.mousedrag,R&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},it(this.options,n)}return Object(y["a"])(t,[{key:"enable",value:function(t){Wt.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Wt.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}},{key:"disable",value:function(){Wt.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Wt.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}},{key:"stopMomentum",value:function(){this.animator&&this.animator.stop()}},{key:"updateConstraint",value:function(t){this.options.constraint=t}},{key:"_onDragStart",value:function(t){this.animator&&this.animator.stop(),R?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=(new Date).getTime(),this.fire("dragstart",this.data),Wt.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Wt.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}},{key:"_onDragEnd",value:function(t){this.data.sliding=!1,Wt.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Wt.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}},{key:"_onDragMove",value:function(t){var e={x:0,y:0};this.data.sliding=!0,R?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),e.x=this.data.pagex.start-this.data.pagex.end,e.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(e.x-this.data.pos.start.x),this.data.new_pos.y=-(e.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(e.x)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(e.y)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}},{key:"_momentum",value:function(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},i={x:!1,y:!1},n=!1;this.data.direction=null,t.time=10*((new Date).getTime()-this.data.time.start),e.time=10*((new Date).getTime()-this.data.time.start),e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+t.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+t.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<2e3&&(n=!0),this.options.enable.x&&this.options.enable.y?Math.abs(e.x)>Math.abs(e.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(e.x)>Math.abs(e.y)&&(i.x=!0):Math.abs(e.y)>Math.abs(e.x)&&(i.y=!0),i.x&&(Math.abs(e.x)>this._el.drag.offsetWidth/2&&(n=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(e.y)>this._el.drag.offsetHeight/2&&(n=!0),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down"))),e.time<1e3||this._animateMomentum(),n&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Ht(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Pt}))}},{key:"_animateMomentum",value:function(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:Pt};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&t.x>=this.options.constraint.left&&(t.x=this.options.constraint.left),this.options.constraint.right&&t.x<this.options.constraint.right&&(t.x=this.options.constraint.right),e.left=Math.floor(t.x)+"px"),this.animator=Ht(this._el.move,e),this.fire("momentum",this.data)}}]),t}();dt(Ui,Rt);var Zi=function(){function t(e,i,n,a){Object(v["a"])(this,t),this.language=a,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{},attribution:{}},this.collapsed=!1,"object"===Object(J["a"])(e)?this._el.container=e:this._el.container=F(e),this.config=i,this.options={width:600,height:600,duration:1e3,ease:zt,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,it(this.options,n)}return Object(y["a"])(t,[{key:"init",value:function(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}},{key:"positionMarkers",value:function(t){for(var e=0;e<this._markers.length;e++){var i=this.timescale.getPositionInfo(e);t?this._markers[e].setClass("tl-timemarker tl-timemarker-fast"):this._markers[e].setClass("tl-timemarker"),this._markers[e].setPosition({left:i.start}),this._markers[e].setWidth(i.width)}}},{key:"updateDisplay",value:function(t,e,i){var n=!1;t&&(0==this.options.width&&t>0&&(n=!0),this.options.width=t),e&&e!=this.options.height&&(this.options.height=e,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-this.options.width/2+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),n&&this._drawTimeline(),this.goToId(this.current_id,!0)}},{key:"_getTimeScale",value:function(){var t=0;try{t=parseInt(this.options.marker_height_min)}catch(e){rt("Invalid value for marker_height_min option."),t=30}return 0==t&&(rt("marker_height_min option must not be zero."),t=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/t),this.max_rows<1&&(this.max_rows=1),new ni(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}},{key:"_updateTimeScale",value:function(t){this.options.scale_factor=t,this._updateDrawTimeline()}},{key:"zoomIn",value:function(){var t=ft(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}},{key:"zoomOut",value:function(){var t=gt(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}},{key:"setZoom",value:function(t){var e=this.options.zoom_sequence[t];"number"==typeof e?this.setZoomFactor(e):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}},{key:"setZoomFactor",value:function(t){t<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),t>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),0==t&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),t=.1),this.options.scale_factor=t,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}},{key:"_createGroups",value:function(){this._groups=[];var t=this.timescale.getGroupLabels();if(t){this.options.has_groups=!0;for(var e=0;e<t.length;e++)this._createGroup(t[e])}}},{key:"_createGroup",value:function(t){var e=new ai(t);this._addGroup(e),this._groups.push(e)}},{key:"_addGroup",value:function(t){t.addTo(this._el.container)}},{key:"_positionGroups",value:function(){if(this.options.has_groups)for(var t=this.options.height-this._el.timeaxis_background.offsetHeight,e=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding),i=(this.timescale.getGroupLabels(),0),n=0;i<this._groups.length;i++){var a=Math.floor(n*(e+this.options.marker_padding)),s=!1;a>t-this.options.marker_padding&&(s=!0),this._groups[i].setRowPosition(a,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(vt(i),s),n+=this._groups[i].data.rows}}},{key:"_addMarker",value:function(t){t.addTo(this._el.marker_item_container),t.on("markerclick",this._onMarkerClick,this),t.on("added",this._onMarkerAdded,this)}},{key:"_createMarker",value:function(t,e){var i=new Wi(t,this.options);this._addMarker(i),e<0?this._markers.push(i):this._markers.splice(e,0,i)}},{key:"_createMarkers",value:function(t){for(var e=0;e<t.length;e++)this._createMarker(t[e],-1)}},{key:"_removeMarker",value:function(t){t.removeFrom(this._el.marker_item_container)}},{key:"_destroyMarker",value:function(t){this._removeMarker(this._markers[t]),this._markers.splice(t,1)}},{key:"_calculateMarkerHeight",value:function(t){return t/this.timescale.getNumberOfRows()-this.options.marker_padding}},{key:"_calculateRowHeight",value:function(t){return t/this.timescale.getNumberOfRows()}},{key:"_calculateAvailableHeight",value:function(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}},{key:"_calculateMinimumTimeNavHeight",value:function(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}},{key:"getMinimumHeight",value:function(){return this._calculateMinimumTimeNavHeight()}},{key:"_assignRowsToMarkers",value:function(){var t=this._calculateAvailableHeight(),e=this._calculateMarkerHeight(t);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(t);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(e);var n=this.timescale.getPositionInfo(i).row,a=Math.floor(n*(e+this.options.marker_padding))+this.options.marker_padding,s=t-a+this.options.marker_padding;this._markers[i].setRowPosition(a,s)}}},{key:"_resetMarkersActive",value:function(){for(var t=0;t<this._markers.length;t++)this._markers[t].setActive(!1)}},{key:"_findMarkerIndex",value:function(t){var e=-1;return("string"==typeof t||t instanceof String)&&(e=yt(t,this._markers,"unique_id",e)),e}},{key:"_createEras",value:function(t){for(var e=0;e<t.length;e++){var i=t[e],n=new si(i.start_date,i.end_date,i.headline,this.options);this._eras.push(n),n.addTo(this._el.marker_item_container),n.on("added",this._onEraAdded,this)}}},{key:"_positionEras",value:function(t){for(var e=0,i=0;i<this._eras.length;i++){var n={start:0,end:0,width:0};n.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),n.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),n.width=n.end-n.start,t?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:n.start}),this._eras[i].setWidth(n.width),e++,e>5&&(e=0),this._eras[i].setColor(e)}}},{key:"createMarker",value:function(t,e){this._createMarker(t,e)}},{key:"createMarkers",value:function(t){this._createMarkers(t)}},{key:"destroyMarker",value:function(t){this._destroyMarker(t)}},{key:"destroyMarkerId",value:function(t){this.destroyMarker(this._findMarkerIndex(t))}},{key:"goTo",value:function(t,e,i){var n=this.options.ease,a=this.options.duration,s=t<0?0:t;this._resetMarkersActive(),t>=0&&t<this._markers.length&&this._markers[t].setActive(!0),this.animator&&this.animator.stop(),e?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[s].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[s].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Ht(this._el.slider,{left:-this._markers[s].getLeft()+this.options.width/2+"px",duration:a,easing:n})),t>=0&&t<this._markers.length?this.current_id=this._markers[t].data.unique_id:this.current_id=""}},{key:"goToId",value:function(t,e,i){this.goTo(this._findMarkerIndex(t),e,i)}},{key:"_onLoaded",value:function(){this.ready=!0,this.fire("loaded",this.config)}},{key:"_onMarkerAdded",value:function(t){this.fire("dateAdded",this.config)}},{key:"_onEraAdded",value:function(t){this.fire("eraAdded",this.config)}},{key:"_onMarkerRemoved",value:function(t){this.fire("dateRemoved",this.config)}},{key:"_onMarkerClick",value:function(t){this.goToId(t.unique_id),this.fire("change",{unique_id:t.unique_id})}},{key:"_onMouseScroll",value:function(t){var e=0,i=0,n={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};t||(t=window.event),t.originalEvent&&(t=t.originalEvent),"undefined"!=typeof t.wheelDeltaX&&(e=t.wheelDeltaY/6,e=Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?t.wheelDeltaX/6:0),e&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+e,i>n.left?i=n.left:i<n.right&&(i=n.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}},{key:"_onDragMove",value:function(t){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}},{key:"_drawTimeline",value:function(t){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(t),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(t)}},{key:"_updateDrawTimeline",value:function(t){var e=!1;if(t){var i=new ni(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(e=!0)}else e=!0;return e?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),e}},{key:"_initLayout",value:function(){this._el.attribution=B("div","tl-attribution",this._el.container),this._el.line=B("div","tl-timenav-line",this._el.container),this._el.slider=B("div","tl-timenav-slider",this._el.container),this._el.slider_background=B("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=B("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=B("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=B("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=B("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=B("div","tl-timeaxis-background",this._el.container),this._el.attribution.innerHTML="<a href='http://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.timeaxis=new oi(this._el.timeaxis,this.options,this.language),this._swipable=new Ui(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}},{key:"_initEvents",value:function(){this._swipable.on("dragmove",this._onDragMove,this),Wt.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Wt.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this)}},{key:"_initData",value:function(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}]),t}();dt(Zi,Rt,Bt);var Gi=function(){function t(e,i,n,a){Object(v["a"])(this,t),a&&this.setLanguage(a),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=n,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:At,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},it(this.options,i),it(this.data,e),this._initLayout(),this._initEvents()}return Object(y["a"])(t,[{key:"show",value:function(){this.animator=Ht(this._el.slider_container,{left:-this._el.container.offsetWidth*n+"px",duration:this.options.duration,easing:this.options.ease})}},{key:"hide",value:function(){}},{key:"setActive",value:function(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this.loadMedia()):this.stopMedia()}},{key:"addTo",value:function(t){t.appendChild(this._el.container)}},{key:"removeFrom",value:function(t){t.removeChild(this._el.container)}},{key:"updateDisplay",value:function(t,e,i){var n,a=this.options.slide_padding_lr,s=this.options.slide_padding_lr;this.options.width=t||this._el.container.offsetWidth,n=this.options.width-2*this.options.slide_padding_lr,O&&this.options.width<=this.options.skinny_size?(a=0,s=0,n=this.options.width):"landscape"==i||this.options.width<=this.options.skinny_size&&(a=50,s=50,n=this.options.width-a-s),this._el.content.style.paddingLeft=a+"px",this._el.content.style.paddingRight=s+"px",this._el.content.style.width=n+"px",this.options.height=e||this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(n,this.options.height-this._text.headlineHeight(),i):this.has.text||this.has.headline?this.options.width<=this.options.skinny_size?this._media.updateDisplay(n,this.options.height,i):this._media.updateDisplay(n/2,this.options.height,i):this._media.updateDisplay(n,this.options.height,i)),this._updateBackgroundDisplay()}},{key:"loadMedia",value:function(){var t=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",(function(){t._updateBackgroundDisplay()})),this._background_media.loadMedia())}},{key:"stopMedia",value:function(){this._media&&this._state.loaded&&this._media.stopMedia()}},{key:"getBackground",value:function(){return this.has.background}},{key:"scrollToTop",value:function(){this._el.container.scrollTop=0}},{key:"getFormattedDate",value:function(){if(ct(this.data.display_date).length>0)return this.data.display_date;var t="";return this.has.title||(this.data.end_date&&(t=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=this.data.start_date.getDisplayDate(this.getLanguage())+t)),t}},{key:"_initLayout",value:function(){if(this._el.container=B("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=B("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=B("div","tl-slide-content-container",this._el.scroll_container),this._el.content=B("div","tl-slide-content",this._el.content_container),this._el.background=B("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var t=$i(this.data.background,!0);t&&(this._background_media=new t.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block")}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&""!=this.data.media.url&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=$i(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new ri(this.data.text,{title:this.has.title,language:this.options.language,autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),this.has.text||this.has.headline||!this.has.media?this.has.headline&&this.has.media&&!this.has.text?(Z(this._el.container,"tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._media.addTo(this._el.content),this._text.addTo(this._el.content)):(this.has.text||this.has.headline)&&(Z(this._el.container,"tl-slide-text-only"),this._text.addTo(this._el.content)):(Z(this._el.container,"tl-slide-media-only"),this._media.addTo(this._el.content)),this.onLoaded()}},{key:"_initEvents",value:function(){}},{key:"_updateBackgroundDisplay",value:function(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}}]),t}();dt(Gi,ve,Rt,Bt);var Yi=function(){function t(e,i,n){Object(v["a"])(this,t),this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,it(this.options,i),it(this.data,e),this._el.container=B("div","tl-slidenav-"+this.options.direction),O&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),n&&n.appendChild(this._el.container)}return Object(y["a"])(t,[{key:"update",value:function(t){var e={title:"",description:"",date:t.getFormattedDate()};t.data.text&&t.data.text.headline&&(e.title=t.data.text.headline),this._update(e)}},{key:"setColor",value:function(t){this._el.content_container.className=t?"tl-slidenav-content-container tl-slidenav-inverted":"tl-slidenav-content-container"}},{key:"_onMouseClick",value:function(){this.fire("clicked",this.options)}},{key:"_update",value:function(t){this.data=it(this.data,t),this._el.title.innerHTML=kt(this.data.title),this._el.description.innerHTML=kt(this.data.date)}},{key:"_initLayout",value:function(){this._el.content_container=B("div","tl-slidenav-content-container",this._el.container),this._el.icon=B("div","tl-slidenav-icon",this._el.content_container),this._el.title=B("div","tl-slidenav-title",this._el.content_container),this._el.description=B("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}},{key:"_initEvents",value:function(){Wt.addListener(this._el.container,"click",this._onMouseClick,this)}}]),t}();dt(Yi,Bt,Rt);var Ji=function(){function t(e,i,n,a){Object(v["a"])(this,t),a&&this.setLanguage(a),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:zt,dragging:!0,trackResize:!0},"object"===Object(J["a"])(e)?(this._el.container=e,this.options.id=pt(6,"tl")):(this.options.id=e,this._el.container=F(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,it(this.options,n),it(this.data,i)}return Object(y["a"])(t,[{key:"init",value:function(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}},{key:"_addSlide",value:function(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)}},{key:"_createSlide",value:function(t,e,i){var n=new Gi(t,this.options,e,this.getLanguage());this._addSlide(n),i<0?this._slides.push(n):this._slides.splice(i,0,n)}},{key:"_createSlides",value:function(t){for(var e=0;e<t.length;e++)""==t[e].unique_id&&(t[e].unique_id=pt(6,"tl-slide")),this._createSlide(t[e],!1,-1)}},{key:"_removeSlide",value:function(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideRemoved,this),t.off("background_change",this._onBackgroundChange)}},{key:"_destroySlide",value:function(t){this._removeSlide(this._slides[t]),this._slides.splice(t,1)}},{key:"_findSlideIndex",value:function(t){var e=t;return("string"==typeof t||t instanceof String)&&(e=yt(t,this._slides,"unique_id")),e}},{key:"updateDisplay",value:function(t,e,i,n){var a,s;s="undefined"===typeof n?this.options.layout:n,this.options.layout=s,this.options.width=t||this._el.container.offsetWidth,this.options.height=e||this._el.container.offsetHeight,this.slide_spacing=2*this.options.width,a=this.options.height/2,this._nav.next.setPosition({top:a}),this._nav.previous.setPosition({top:a});for(var o=0;o<this._slides.length;o++)this._slides[o].updateDisplay(this.options.width,this.options.height,s),this._slides[o].setPosition({left:this.slide_spacing*o,top:0});this.goToId(this.current_id,!0,!0)}},{key:"createSlide",value:function(t,e){this._createSlide(t,!1,e)}},{key:"createSlides",value:function(t){this._createSlides(t)}},{key:"destroySlide",value:function(t){this._destroySlide(t)}},{key:"destroySlideId",value:function(t){this.destroySlide(this._findSlideIndex(t))}},{key:"goTo",value:function(t,e,i){t=parseInt(t),isNaN(t)&&(t=0);var n=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var a=0;a<this._slides.length;a++)this._slides[a].setActive(!1);t<this._slides.length&&t>=0&&(this.current_id=this._slides[t].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),e?(this._el.slider_container.style.left=-this.slide_spacing*t+"px",this._onSlideChange(i)):this.animator=Ht(this._el.slider_container,{left:-this.slide_spacing*t+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[t].setActive(!0),this._slides[t+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[t+1])):this.showNav(this._nav.next,!1),this._slides[t-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[t-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout((function(){n.preloadSlides(t)}),this.options.duration))}},{key:"goToId",value:function(t,e,i){this.goTo(this._findSlideIndex(t),e,i)}},{key:"preloadSlides",value:function(t){this._slides[t+1]&&(this._slides[t+1].loadMedia(),this._slides[t+1].scrollToTop()),this._slides[t+2]&&(this._slides[t+2].loadMedia(),this._slides[t+2].scrollToTop()),this._slides[t-1]&&(this._slides[t-1].loadMedia(),this._slides[t-1].scrollToTop()),this._slides[t-2]&&(this._slides[t-2].loadMedia(),this._slides[t-2].scrollToTop())}},{key:"next",value:function(){var t=this._findSlideIndex(this.current_id);t+1<this._slides.length?this.goTo(t+1):this.goTo(t)}},{key:"previous",value:function(){var t=this._findSlideIndex(this.current_id);t-1>=0?this.goTo(t-1):this.goTo(t)}},{key:"showNav",value:function(t,e){this.options.width<=500&&O||(e?t.show():t.hide())}},{key:"changeBackground",value:function(t){var e={r:256,g:256,b:256};t.color_value&&""!=t.color_value?(e=et(t.color_value),e||(rt("Invalid color value "+t.color_value),e=this.options.default_bg_color)):(e=this.options.default_bg_color,t.color_value="rgb("+e.r+" , "+e.g+", "+e.b+")"),e.r,e.g,e.b,this._el.background.style.backgroundImage="none",t.color_value?this._el.background.style.backgroundColor=t.color_value:this._el.background.style.backgroundColor="transparent",e.r<255||e.g<255||e.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}},{key:"_updateDrawSlides",value:function(){for(var t=this.options.layout,e=0;e<this._slides.length;e++)this._slides[e].updateDisplay(this.options.width,this.options.height,t),this._slides[e].setPosition({left:this.slide_spacing*e,top:0});this.goToId(this.current_id,!0,!1)}},{key:"_initLayout",value:function(){Z(this._el.container,"tl-storyslider"),this._el.slider_container_mask=B("div","tl-slider-container-mask",this._el.container),this._el.background=B("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=B("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=B("div","tl-slider-item-container",this._el.slider_container),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._nav.previous=new Yi({title:"Previous",description:"description"},{direction:"previous"}),this._nav.next=new Yi({title:"Next",description:"description"},{direction:"next"}),this._nav.next.addTo(this._el.container),this._nav.previous.addTo(this._el.container),this._el.slider_container.style.left="0px",R&&(this._swipable=new Ui(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new ye(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}},{key:"_initEvents",value:function(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}},{key:"_initData",value:function(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}},{key:"_onBackgroundChange",value:function(t){var e=this._findSlideIndex(this.current_id),i=this._slides[e].getBackground();this.changeBackground(t),this.fire("colorchange",i)}},{key:"_onMessageClick",value:function(t){this._message.hide()}},{key:"_onSwipeNoDirection",value:function(t){this.goToId(this.current_id)}},{key:"_onNavigation",value:function(t){"next"==t.direction||"left"==t.direction?this.next():"previous"!=t.direction&&"right"!=t.direction||this.previous(),this.fire("nav_"+t.direction,this.data)}},{key:"_onSlideAdded",value:function(t){rt("slideadded"),this.fire("slideAdded",this.data)}},{key:"_onSlideRemoved",value:function(t){this.fire("slideRemoved",this.data)}},{key:"_onSlideChange",value:function(t){t||this.fire("change",{unique_id:this.current_id})}},{key:"_onMouseClick",value:function(t){}},{key:"_fireMouseEvent",value:function(t){if(this._loaded){var e=t.type;e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)&&("contextmenu"===e&&Wt.preventDefault(t),this.fire(e,{latlng:"something",layerPoint:"something else"}))}}},{key:"_onLoaded",value:function(){this.fire("loaded",this.data)}}]),t}();dt(Ji,ve,Rt);var Vi=function(){function t(e,i,n){Object(v["a"])(this,t),this._el={parent:{},container:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,"object"===Object(J["a"])(e)?this._el.container=e:this._el.container=F(e),i&&(this._el.parent=i),this.options={width:600,height:600,duration:1e3,ease:zt,menubar_default_y:0},this.animator={},it(this.options,n),this._initLayout(),this._initEvents()}return Object(y["a"])(t,[{key:"show",value:function(t){this.options.duration}},{key:"hide",value:function(t){}},{key:"toogleZoomIn",value:function(t){t?G(this._el.button_zoomin,"tl-menubar-button-inactive"):Z(this._el.button_zoomin,"tl-menubar-button-inactive")}},{key:"toogleZoomOut",value:function(t){t?G(this._el.button_zoomout,"tl-menubar-button-inactive"):Z(this._el.button_zoomout,"tl-menubar-button-inactive")}},{key:"setSticky",value:function(t){this.options.menubar_default_y=t}},{key:"setColor",value:function(t){this._el.container.className=t?"tl-menubar tl-menubar-inverted":"tl-menubar"}},{key:"updateDisplay",value:function(t,e,i,n){this._updateDisplay(t,e,i,n)}},{key:"_onButtonZoomIn",value:function(t){this.fire("zoom_in",t)}},{key:"_onButtonZoomOut",value:function(t){this.fire("zoom_out",t)}},{key:"_onButtonBackToStart",value:function(t){this.fire("back_to_start",t)}},{key:"_initLayout",value:function(){this._el.button_zoomin=B("span","tl-menubar-button",this._el.container),this._el.button_zoomout=B("span","tl-menubar-button",this._el.container),this._el.button_backtostart=B("span","tl-menubar-button",this._el.container),O&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>"}},{key:"_initEvents",value:function(){Wt.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Wt.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Wt.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}},{key:"_updateDisplay",value:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}]),t}();dt(Vi,Bt,Rt);var Xi=null;if(document){var Ki=document.getElementsByTagName("script");Ki&&Ki.length>0&&(Xi=Ki[Ki.length-1].src)}function Qi(t){return function(e){if(t.config){var i=e.key,n=t._getSlideIndex(self.current_id),a=t.config.events.length-1,s=t.config.title?a+1:a,o=0;"ArrowLeft"==i?n!=o&&t.goToPrev():"ArrowRight"==i&&n!=s&&t.goToNext()}}}var tn=function(){function t(e,i,n){if(Object(v["a"])(this,t),n||(n={}),this.ready=!1,this._el={container:F(e),storyslider:{},timenav:{},menubar:{}},n.lang&&!n.language&&(n.language=n.lang),this.language=ge,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:zt,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new ye(this._el.container,{message_class:"tl-message-full"}),"string"==typeof n.default_bg_color){var a=et(n.default_bg_color);a?n.default_bg_color=a:(delete n.default_bg_color,rt("Invalid default background color. Ignoring."))}it(this.options,n),this.options.script_path||(this.options.script_path=this.determineScriptPath()),n.soundcite&&this.on("ready",(function(){rt("Loading Soundcite resources "),ui("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),di("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")})),this._loadStyles(),document.addEventListener("keydown",Qi(this)),window.addEventListener("resize",function(t){this.updateDisplay()}.bind(this)),this.options.debug&&ot(console.log),Z(this._el.container,"tl-timeline"),this.options.is_embed&&Z(this._el.container,"tl-timeline-embed"),this.options.is_full_embed&&Z(this._el.container,"tl-timeline-full-embed"),this._loadLanguage(i)}return Object(y["a"])(t,[{key:"_loadStyles",value:function(){var t=null,e=null;if(this.options.font&&(0==this.options.font.indexOf("http")||this.options.font.match(/\.css$/)))t=this.options.font;else if(this.options.font){var i="../css/fonts/font."+this.options.font.toLowerCase()+".css";t=new URL(i,this.options.script_path).toString()}if(t&&ui(t),this.options.theme&&(0==this.options.theme.indexOf("http")||this.options.theme.match(/\.css$/)))e=this.options.theme;else if(this.options.theme){var n="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";e=new URL(n,this.options.script_path).toString()}e&&ui(e)}},{key:"_loadLanguage",value:function(t){var e=this;try{var i=this.options.language,n=this.options.script_path;ue(i,n).then((function(n){n?(e.language=n,e.message.setLanguage(e.language),e.options.language=e.language,e.showMessage(e._("loading_timeline"))):e.showMessage("Error loading ".concat(i)),e._initData(t)}))}catch(a){this.showMessage(this._translateError(a))}}},{key:"_initData",value:function(t){"string"==typeof t?Je(t,{callback:function(t){this.setConfig(t)}.bind(this),sheets_proxy:this.options.sheets_proxy}):Se==t.constructor?this.setConfig(t):this.setConfig(new Se(t))}},{key:"_translateError",value:function(t){return t.hasOwnProperty("stack")&&rt(t.stack),t.message_key?this._(t.message_key)+(t.detail?" ["+t.detail+"]":""):t}},{key:"showMessage",value:function(t){this.message?this.message.updateMessage(t):(rt("No message display available."),rt(t))}},{key:"determineScriptPath",value:function(){var t=null;if(Xi)t=Xi;else{var e=document.getElementById("timeline-script-tag");e&&(t=e.src)}if(!t)for(var i=document.getElementsByTagName("script"),n=i.length-1;n>=0;n--)if(i[n].src){t=i[n].src;break}return t?t.substr(0,t.lastIndexOf("/")+1):""}},{key:"setConfig",value:function(t){if(this.config=t,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(a){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(a))}else{for(var e=[],i=0,n=this.config.getErrors();i<n.length;i++)e.push(this._translateError(n[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+e.join("<br>"))}}},{key:"_onDataLoaded",value:function(){var t=this;this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();var e=function(e,i){e.reduce((function(t,e){return t||e.isIntersecting}),!1)&&t.updateDisplay()},i=new IntersectionObserver(e.bind(this));i.observe(this._el.container),this.ready=!0,this.fire("ready")}},{key:"_initLayout",value:function(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="","top"==this.options.timenav_position?(this._el.timenav=B("div","tl-timenav",this._el.container),this._el.storyslider=B("div","tl-storyslider",this._el.container)):(this._el.storyslider=B("div","tl-storyslider",this._el.container),this._el.timenav=B("div","tl-timenav",this._el.container)),this._el.menubar=B("div","tl-menubar",this._el.container),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new Zi(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new Ji(this._el.storyslider,this.config,this.options,this.language),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new Vi(this._el.menubar,this._el.container,this.options),"portrait"==this.options.layout?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay(this._timenav.options.height,!0,2e3)}},{key:"_initEvents",value:function(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("back_to_start",this._onBackToStart,this)}},{key:"_onColorChange",value:function(t){this.fire("color_change",{unique_id:this.current_id},this)}},{key:"_onSlideChange",value:function(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._timenav.goToId(this.current_id),this._onChange(t))}},{key:"_onTimeNavChange",value:function(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._storyslider.goToId(this.current_id),this._onChange(t))}},{key:"_onZoomToggle",value:function(t){"in"==t.zoom?this._menubar.toogleZoomIn(t.show):"out"==t.zoom&&this._menubar.toogleZoomOut(t.show)}},{key:"_onChange",value:function(t){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}},{key:"_onBackToStart",value:function(t){this._storyslider.goTo(0),this.fire("back_to_start",{unique_id:this.current_id},this)}},{key:"_onZoomIn",value:function(t){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}},{key:"_onZoomOut",value:function(t){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}},{key:"_onTimeNavLoaded",value:function(){this._loaded.timenav=!0,this._onLoaded()}},{key:"_onStorySliderLoaded",value:function(){this._loaded.storyslider=!0,this._onLoaded()}},{key:"_onStorySliderNext",value:function(t){this.fire("nav_next",t)}},{key:"_onStorySliderPrevious",value:function(t){this.fire("nav_previous",t)}},{key:"_updateDisplay",value:function(t,e,i){var n=this.options.duration,a=this.options.base_class,s=0;i&&(n=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(a+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(a+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",R&&(this.options.layout=H()),O?(a+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(t,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(t),"portrait"==this.options.layout?a+=" tl-layout-portrait":a+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,s="top"==this.options.timenav_position?Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-19.5:Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-17.5),e?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Ht(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:n/2,easing:Pt}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Ht(this._el.menubar,{top:s+"px",duration:n/2,easing:Pt})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=s+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,e),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,e,this.options.layout),"rtl"==this.options.language.direction&&(a+=" tl-rtl"),this._el.container.className=a}},{key:"_calculateTimeNavHeight",value:function(t,e){var i=0;return t?i=t:(this.options.timenav_height_percentage||e)&&(i=e?Math.round(this.options.height/100*e):Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i-=2*this.options.marker_padding,i}},{key:"_validateOptions",value:function(){for(var t=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],e=0;e<t.length;e++){var i=t[e],n=this.options[i],a=!0;"number"==typeof n?a=n==parseInt(n):"string"==typeof n&&(a=n.match(/^\s*(\-?\d+)?\s*$/)),a||this.config.logError({message_key:"invalid_integer_option",detail:i})}}},{key:"_getSlideIndex",value:function(t){if(this.config){if(this.config.title&&this.config.title.unique_id==t)return 0;for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return this.config.title?e+1:e}return-1}},{key:"_getEventIndex",value:function(t){for(var e=0;e<this.config.events.length;e++)if(t==this.config.events[e].unique_id)return e;return-1}},{key:"_onLoaded",value:function(){if(this._loaded.storyslider&&this._loaded.timenav)if(this.fire("loaded",this.config),this.options.hash_bookmark){""!=window.location.hash?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);var t=this;window.addEventListener("hashchange",(function(){0==window.location.hash.indexOf("#event-")&&t.goToId(window.location.hash.replace("#event-",""))}),!1)}else nt(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide)}},{key:"_updateHashBookmark",value:function(t){if(t){var e="#event-"+t.toString();window.history.replaceState(null,"Browsing TimelineJS",e),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+t.toString()},this)}}},{key:"zoomIn",value:function(){this._timenav.zoomIn()}},{key:"zoomOut",value:function(){this._timenav.zoomOut()}},{key:"setZoom",value:function(t){this._timenav.setZoom(t)}},{key:"goToId",value:function(t){this.current_id!=t&&(this.current_id=t,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}},{key:"goTo",value:function(t){this.config.title?0==t?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[t-1].unique_id):this.goToId(this.config.events[t].unique_id)}},{key:"goToStart",value:function(){this.goTo(0)}},{key:"goToEnd",value:function(){var t=this.config.events.length-1;this.goTo(this.config.title?t+1:t)}},{key:"goToPrev",value:function(){this.goTo(this._getSlideIndex(this.current_id)-1)}},{key:"goToNext",value:function(){this.goTo(this._getSlideIndex(this.current_id)+1)}},{key:"add",value:function(t){var e=this.config.addEvent(t),i=this._getEventIndex(e),n=this.config.events[i];this._storyslider.createSlide(n,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(n,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:e})}},{key:"remove",value:function(t){if(t>=0&&t<this.config.events.length){this.config.events[t].unique_id==this.current_id&&(t<this.config.events.length-1?this.goTo(t+1):this.goTo(t-1));var e=this.config.events.splice(t,1);delete this.config.event_dict[e[0].unique_id],this._storyslider.destroySlide(this.config.title?t+1:t),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(t),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:e[0].unique_id})}}},{key:"removeId",value:function(t){this.remove(this._getEventIndex(t))}},{key:"getData",value:function(t){if(this.config.title){if(0==t)return this.config.title;if(t>0&&t<=this.config.events.length)return this.config.events[t-1]}else if(t>=0&&t<this.config.events.length)return this.config.events[t];return null}},{key:"getDataById",value:function(t){return this.getData(this._getSlideIndex(t))}},{key:"getSlide",value:function(t){return t>=0&&t<this._storyslider._slides.length?this._storyslider._slides[t]:null}},{key:"getSlideById",value:function(t){return this.getSlide(this._getSlideIndex(t))}},{key:"getCurrentSlide",value:function(){return this.getSlideById(this.current_id)}},{key:"updateDisplay",value:function(){this.ready?this._updateDisplay():rt("updateDisplay called but timeline is not in ready state")}},{key:"_initGoogleAnalytics",value:function(){(function(t,e,i,n,a,s,o){t["GoogleAnalyticsObject"]=a,t[a]=t[a]||function(){(t[a].q=t[a].q||[]).push(arguments)},t[a].l=1*new Date,s=e.createElement(i),o=e.getElementsByTagName(i)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",this.options.ga_property_id,"auto"),ga("set","anonymizeIp",!0)}},{key:"_initAnalytics",value:function(){if(null!==this.options.ga_property_id){this._initGoogleAnalytics(),ga("send","pageview");for(var t=this.options.track_events,e=0;e<t.length;e++){var i=t[e];this.addEventListener(i,(function(t){ga("send","event",t.type,"clicked")}))}}}}]),t}();dt(tn,ve,Rt),i("010e");i("ff7b"),i("6cc5"),i("ef9d");var en=i("2699"),nn=i("a40a"),an=i("4e2b"),sn=(i("c293"),{name:"TimeMap",components:{LMap:en["a"],"l-tile-layer":nn["a"],LMarker:an["a"]},props:{docId:String},data:function(){return{timeline:{},timelineLoaded:!1,zoom:10,center:[],positions:{},baseLayer:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'}}},mounted:function(){var t=this;this.timeline=new tn("timeline",this.docId,{sheets_proxy:""}),this.timeline.on("loaded",(function(){t.timelineLoaded=!0;for(var e=t.timeline._storyslider.data.events.length,i="",n=0;n<e;++n){var a=t.timeline.getData(n)["Location_Original"].split(",").map(Number);0==n&&(i=t.timeline.getSlide(n).data.unique_id),t.positions[t.timeline.getSlide(n).data.unique_id]=a}t.center=t.positions[i]})),this.timeline.on("change",(function(e){t.changeMapPoint(e)}))},methods:{changeMapPoint:function(t){this.$refs.map&&this.$refs.map.mapObject.flyTo(this.positions[t.unique_id])},changeSlide:function(t){this.timeline.goToId(t)}}}),on=sn,rn=(i("0ee7"),Object(l["a"])(on,f,g,!1,null,"1b04bcfe",null)),ln=rn.exports,hn={name:"Home",components:{TimeMap:ln}},cn=hn,dn=(i("cccb"),Object(l["a"])(cn,m,p,!1,null,null,null)),un=dn.exports;s["a"].use(_["a"]);var _n=[{path:"/",name:"Home",component:un},{path:"/about",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}],mn=new _["a"]({mode:"history",base:"/TimeMapper2/",routes:_n}),pn=mn,fn=i("2f62");s["a"].use(fn["a"]);var gn=new fn["a"].Store({state:{},mutations:{},actions:{},modules:{}});s["a"].config.productionTip=!1,new s["a"]({router:pn,store:gn,render:function(t){return t(d)}}).$mount("#app")},"5ced":function(t,e,i){},"85ec":function(t,e,i){},cccb:function(t,e,i){"use strict";i("5ced")},ff7b:function(t,e,i){}});
//# sourceMappingURL=app.2f1d4938.js.map